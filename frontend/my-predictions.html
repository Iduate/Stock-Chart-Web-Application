<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë‚´ ì˜ˆì¸¡ - StockChart</title>
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ“ˆ</text></svg>">

    <!-- Tailwind CSS with TradingView Color Scheme -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'tv': {
                            'darker': '#0d1421',
                            'dark': '#131722',
                            'card': '#1e222d',
                            'light': '#2a2e39',
                            'border': '#363a45',
                            'blue': '#2962ff',
                            'green': '#26a69a',
                            'red': '#ef5350',
                            'text': '#d1d4dc',
                            'text-secondary': '#868993'
                        }
                    },
                    fontFamily: {
                        'sans': ['Inter', 'Noto Sans KR', 'system-ui', 'sans-serif']
                    }
                }
            }
        }
    </script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://unpkg.com/lightweight-charts@4.1.3/dist/lightweight-charts.standalone.production.js"></script>
</head>

<body class="bg-tv-darker text-tv-text font-sans">
    <!-- Navigation Bar -->
    <nav class="bg-tv-dark border-b border-tv-border sticky top-0 z-40 backdrop-blur-md">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <!-- Logo -->
                <div class="flex items-center space-x-3">
                    <a href="home.html"
                        class="flex items-center space-x-2 text-tv-text hover:text-tv-blue transition-colors">
                        <div class="w-8 h-8 bg-tv-blue rounded-lg flex items-center justify-center">
                            <i class="fas fa-chart-line text-white text-sm"></i>
                        </div>
                        <span class="text-xl font-bold">StockChart</span>
                    </a>
                </div>

                <!-- Desktop Navigation -->
                <div class="hidden lg:flex items-center space-x-1">
                    <a href="home.html"
                        class="px-4 py-2 rounded-lg text-tv-text-secondary hover:text-tv-text hover:bg-tv-light transition-all duration-200">í™ˆ</a>
                    <a href="charts.html"
                        class="px-4 py-2 rounded-lg text-tv-text-secondary hover:text-tv-text hover:bg-tv-light transition-all duration-200">ì°¨íŠ¸
                        ë³´ë“œ</a>
                    <a href="prediction.html"
                        class="px-4 py-2 rounded-lg text-tv-text-secondary hover:text-tv-text hover:bg-tv-light transition-all duration-200">ì˜ˆì¸¡í•˜ê¸°</a>
                    <a href="my-predictions.html"
                        class="px-4 py-2 rounded-lg text-tv-text bg-tv-blue bg-opacity-20 border border-tv-blue">ë‚´
                        ì˜ˆì¸¡</a>
                    <a href="ranking.html"
                        class="px-4 py-2 rounded-lg text-tv-text-secondary hover:text-tv-text hover:bg-tv-light transition-all duration-200">ë­í‚¹</a>
                    <a href="events.html"
                        class="px-4 py-2 rounded-lg text-tv-text-secondary hover:text-tv-text hover:bg-tv-light transition-all duration-200">ì´ë²¤íŠ¸</a>
                    <a href="subscription.html"
                        class="px-4 py-2 rounded-lg text-tv-text-secondary hover:text-tv-text hover:bg-tv-light transition-all duration-200">êµ¬ë…</a>
                    <button onclick="showLoginModal()"
                        class="ml-4 bg-tv-blue hover:bg-blue-600 text-white px-6 py-2 rounded-lg font-semibold transition-colors">ë¡œê·¸ì¸</button>
                </div>

                <!-- Mobile menu button -->
                <div class="lg:hidden">
                    <button onclick="toggleMobileMenu()" class="text-tv-text hover:text-tv-blue p-2">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Mobile Navigation -->
        <div id="mobileMenu" class="lg:hidden hidden bg-tv-card border-t border-tv-border">
            <div class="px-4 py-2 space-y-1">
                <a href="home.html"
                    class="block px-4 py-2 rounded-lg text-tv-text-secondary hover:text-tv-text hover:bg-tv-light transition-all duration-200">í™ˆ</a>
                <a href="charts.html"
                    class="block px-4 py-2 rounded-lg text-tv-text-secondary hover:text-tv-text hover:bg-tv-light transition-all duration-200">ì°¨íŠ¸
                    ë³´ë“œ</a>
                <a href="prediction.html"
                    class="block px-4 py-2 rounded-lg text-tv-text-secondary hover:text-tv-text hover:bg-tv-light transition-all duration-200">ì˜ˆì¸¡í•˜ê¸°</a>
                <a href="my-predictions.html"
                    class="block px-4 py-2 rounded-lg text-tv-text bg-tv-blue bg-opacity-20 border border-tv-blue">ë‚´
                    ì˜ˆì¸¡</a>
                <a href="ranking.html"
                    class="block px-4 py-2 rounded-lg text-tv-text-secondary hover:text-tv-text hover:bg-tv-light transition-all duration-200">ë­í‚¹</a>
                <a href="events.html"
                    class="block px-4 py-2 rounded-lg text-tv-text-secondary hover:text-tv-text hover:bg-tv-light transition-all duration-200">ì´ë²¤íŠ¸</a>
                <a href="subscription.html"
                    class="block px-4 py-2 rounded-lg text-tv-text-secondary hover:text-tv-text hover:bg-tv-light transition-all duration-200">êµ¬ë…</a>
                <button onclick="showLoginModal()"
                    class="block w-full text-left px-4 py-2 bg-tv-blue hover:bg-blue-600 text-white rounded-lg font-semibold transition-colors mt-2">ë¡œê·¸ì¸</button>
            </div>
        </div>
    </nav>

    <!-- My Predictions Section -->
    <section class="py-8 bg-tv-darker min-h-screen">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <!-- Page Header -->
            <div class="mb-8">
                <div class="flex items-center space-x-3 mb-4">
                    <i class="fas fa-user-chart text-tv-blue text-3xl"></i>
                    <h1 class="text-3xl lg:text-4xl font-bold text-tv-text">ë‚´ ì˜ˆì¸¡</h1>
                </div>
                <p class="text-lg text-tv-text-secondary max-w-2xl">ë‚˜ì˜ ì˜ˆì¸¡ í˜„í™©ê³¼ ì„±ê³¼ë¥¼ í™•ì¸í•˜ê³  ë¶„ì„í•´ë³´ì„¸ìš”</p>
            </div>

            <!-- Stats Overview -->
            <div class="grid grid-cols-2 lg:grid-cols-4 gap-6 mb-8" id="statsOverview">
                <!-- Stats will be loaded dynamically -->
            </div>

            <!-- Filters and Controls -->
            <div class="bg-tv-card border border-tv-border rounded-xl p-6 mb-6">
                <div class="flex flex-col lg:flex-row gap-4 items-start lg:items-center justify-between">
                    <div class="flex flex-wrap gap-4">
                        <select id="statusFilter"
                            class="bg-tv-light border border-tv-border rounded-lg px-4 py-2 text-tv-text focus:ring-2 focus:ring-tv-blue focus:border-transparent">
                            <option value="all">ì „ì²´ ìƒíƒœ</option>
                            <option value="active">ì§„í–‰ì¤‘</option>
                            <option value="completed">ì™„ë£Œ</option>
                            <option value="cancelled">ì·¨ì†Œë¨</option>
                        </select>
                        <select id="periodFilter"
                            class="bg-tv-light border border-tv-border rounded-lg px-4 py-2 text-tv-text focus:ring-2 focus:ring-tv-blue focus:border-transparent">
                            <option value="all">ì „ì²´ ê¸°ê°„</option>
                            <option value="week">ì´ë²ˆ ì£¼</option>
                            <option value="month">ì´ë²ˆ ë‹¬</option>
                            <option value="quarter">ìµœê·¼ 3ê°œì›”</option>
                        </select>
                    </div>
                    <button onclick="createNewPrediction()"
                        class="bg-tv-blue hover:bg-blue-600 text-white px-6 py-2 rounded-lg font-semibold transition-colors">
                        <i class="fas fa-plus mr-2"></i>ìƒˆ ì˜ˆì¸¡ ì¶”ê°€
                    </button>
                </div>
            </div>

            <!-- Prediction Cards Container -->
            <div id="predictionsContainer" class="space-y-6">
                <!-- Empty State -->
                <div id="emptyState" class="text-center py-16">
                    <div
                        class="w-24 h-24 mx-auto mb-6 bg-tv-card border border-tv-border rounded-2xl flex items-center justify-center">
                        <i class="fas fa-chart-line text-4xl text-tv-text-secondary"></i>
                    </div>
                    <h3 class="text-xl font-semibold text-tv-text mb-2">ì•„ì§ ì˜ˆì¸¡ì´ ì—†ìŠµë‹ˆë‹¤</h3>
                    <p class="text-tv-text-secondary mb-6">ì²« ë²ˆì§¸ ì˜ˆì¸¡ì„ ë§Œë“¤ì–´ íˆ¬ì ì—¬ì •ì„ ì‹œì‘í•´ë³´ì„¸ìš”!</p>
                    <button onclick="createNewPrediction()"
                        class="bg-tv-blue hover:bg-blue-600 text-white px-8 py-3 rounded-lg font-semibold transition-colors">
                        <i class="fas fa-plus mr-2"></i>ì²« ì˜ˆì¸¡ ë§Œë“¤ê¸°
                    </button>
                </div>
            </div>

            <!-- Load More -->
            <div id="loadMoreContainer" class="text-center mt-8 hidden">
                <button onclick="loadMorePredictions()"
                    class="bg-tv-light hover:bg-tv-border text-tv-text px-8 py-3 rounded-lg font-semibold transition-colors">
                    ë” ë§ì€ ì˜ˆì¸¡ ë³´ê¸°
                </button>
            </div>
        </div>
    </section>

    <!-- Enhanced Footer -->
    <footer class="bg-tv-darker border-t border-tv-border relative overflow-hidden">
        <!-- Background Gradient -->
        <div class="absolute inset-0 bg-gradient-to-br from-tv-blue/5 via-transparent to-tv-green/5"></div>

        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 relative z-10">
            <!-- Main Footer Content -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-12">
                <!-- Company Section -->
                <div class="lg:col-span-1">
                    <div class="flex items-center space-x-2 mb-6">
                        <div
                            class="w-10 h-10 bg-gradient-to-br from-tv-blue to-tv-green rounded-xl flex items-center justify-center">
                            <i class="fas fa-chart-line text-white text-lg"></i>
                        </div>
                        <h3 class="text-2xl font-bold text-tv-text">StockChart</h3>
                    </div>
                    <p class="text-tv-text-secondary mb-6 leading-relaxed">
                        AI ê¸°ë°˜ ì£¼ì‹ ì˜ˆì¸¡ê³¼ ì‹¤ì‹œê°„ ë¶„ì„ìœ¼ë¡œ<br>
                        ë” ìŠ¤ë§ˆíŠ¸í•œ íˆ¬ì ê²°ì •ì„ ë‚´ë¦¬ì„¸ìš”
                    </p>
                    <div class="flex space-x-3">
                        <a href="#"
                            class="w-10 h-10 bg-tv-light hover:bg-tv-blue rounded-lg flex items-center justify-center text-tv-text-secondary hover:text-white transition-all duration-200 hover:scale-110">
                            <i class="fab fa-facebook"></i>
                        </a>
                        <a href="#"
                            class="w-10 h-10 bg-tv-light hover:bg-tv-blue rounded-lg flex items-center justify-center text-tv-text-secondary hover:text-white transition-all duration-200 hover:scale-110">
                            <i class="fab fa-twitter"></i>
                        </a>
                        <a href="#"
                            class="w-10 h-10 bg-tv-light hover:bg-tv-blue rounded-lg flex items-center justify-center text-tv-text-secondary hover:text-white transition-all duration-200 hover:scale-110">
                            <i class="fab fa-instagram"></i>
                        </a>
                        <a href="#"
                            class="w-10 h-10 bg-tv-light hover:bg-tv-blue rounded-lg flex items-center justify-center text-tv-text-secondary hover:text-white transition-all duration-200 hover:scale-110">
                            <i class="fab fa-youtube"></i>
                        </a>
                    </div>
                </div>

                <!-- Services Section -->
                <div>
                    <h4 class="font-semibold text-tv-text mb-6 text-lg">ì„œë¹„ìŠ¤</h4>
                    <ul class="space-y-3">
                        <li><a href="charts.html"
                                class="text-tv-text-secondary hover:text-tv-blue transition-colors flex items-center space-x-2 group">
                                <i
                                    class="fas fa-chart-bar w-4 text-tv-text-secondary group-hover:text-tv-blue transition-colors"></i>
                                <span>ì°¨íŠ¸ ë³´ë“œ</span>
                            </a></li>
                        <li><a href="prediction.html"
                                class="text-tv-text-secondary hover:text-tv-blue transition-colors flex items-center space-x-2 group">
                                <i
                                    class="fas fa-target w-4 text-tv-text-secondary group-hover:text-tv-blue transition-colors"></i>
                                <span>ì˜ˆì¸¡í•˜ê¸°</span>
                            </a></li>
                        <li><a href="my-predictions.html"
                                class="text-tv-text-secondary hover:text-tv-blue transition-colors flex items-center space-x-2 group">
                                <i
                                    class="fas fa-user-chart w-4 text-tv-text-secondary group-hover:text-tv-blue transition-colors"></i>
                                <span>ë‚´ ì˜ˆì¸¡</span>
                            </a></li>
                        <li><a href="ranking.html"
                                class="text-tv-text-secondary hover:text-tv-blue transition-colors flex items-center space-x-2 group">
                                <i
                                    class="fas fa-trophy w-4 text-tv-text-secondary group-hover:text-tv-blue transition-colors"></i>
                                <span>ë­í‚¹</span>
                            </a></li>
                        <li><a href="events.html"
                                class="text-tv-text-secondary hover:text-tv-blue transition-colors flex items-center space-x-2 group">
                                <i
                                    class="fas fa-calendar w-4 text-tv-text-secondary group-hover:text-tv-blue transition-colors"></i>
                                <span>ì´ë²¤íŠ¸</span>
                            </a></li>
                    </ul>
                </div>

                <!-- Support Section -->
                <div>
                    <h4 class="font-semibold text-tv-text mb-6 text-lg">ê³ ê°ì§€ì›</h4>
                    <ul class="space-y-3">
                        <li><a href="#"
                                class="text-tv-text-secondary hover:text-tv-blue transition-colors flex items-center space-x-2 group">
                                <i
                                    class="fas fa-question-circle w-4 text-tv-text-secondary group-hover:text-tv-blue transition-colors"></i>
                                <span>FAQ</span>
                            </a></li>
                        <li><a href="#"
                                class="text-tv-text-secondary hover:text-tv-blue transition-colors flex items-center space-x-2 group">
                                <i
                                    class="fas fa-envelope w-4 text-tv-text-secondary group-hover:text-tv-blue transition-colors"></i>
                                <span>ë¬¸ì˜í•˜ê¸°</span>
                            </a></li>
                        <li><a href="#"
                                class="text-tv-text-secondary hover:text-tv-blue transition-colors flex items-center space-x-2 group">
                                <i
                                    class="fas fa-file-contract w-4 text-tv-text-secondary group-hover:text-tv-blue transition-colors"></i>
                                <span>ì´ìš©ì•½ê´€</span>
                            </a></li>
                        <li><a href="#"
                                class="text-tv-text-secondary hover:text-tv-blue transition-colors flex items-center space-x-2 group">
                                <i
                                    class="fas fa-shield-alt w-4 text-tv-text-secondary group-hover:text-tv-blue transition-colors"></i>
                                <span>ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</span>
                            </a></li>
                        <li><a href="#"
                                class="text-tv-text-secondary hover:text-tv-blue transition-colors flex items-center space-x-2 group">
                                <i
                                    class="fas fa-headset w-4 text-tv-text-secondary group-hover:text-tv-blue transition-colors"></i>
                                <span>24/7 ê³ ê°ì„¼í„°</span>
                            </a></li>
                    </ul>
                </div>

                <!-- Newsletter Section -->
                <div>
                    <h4 class="font-semibold text-tv-text mb-6 text-lg">ë‰´ìŠ¤ë ˆí„°</h4>
                    <p class="text-tv-text-secondary mb-4 text-sm">
                        ìµœì‹  ì‹œì¥ ë¶„ì„ê³¼ ì˜ˆì¸¡ íŒì„<br>
                        ì´ë©”ì¼ë¡œ ë°›ì•„ë³´ì„¸ìš”
                    </p>
                    <form class="space-y-3" onsubmit="subscribeNewsletter(event)">
                        <div class="relative">
                            <input type="email" id="newsletterEmail" placeholder="ì´ë©”ì¼ ì£¼ì†Œ ì…ë ¥"
                                class="w-full bg-tv-light border border-tv-border rounded-lg px-4 py-3 text-tv-text focus:ring-2 focus:ring-tv-blue focus:border-transparent text-sm">
                            <button type="submit"
                                class="absolute right-2 top-1/2 transform -translate-y-1/2 bg-tv-blue hover:bg-blue-600 text-white px-3 py-1.5 rounded-md text-sm font-medium transition-colors">
                                êµ¬ë…
                            </button>
                        </div>
                        <div class="flex items-start space-x-2">
                            <input type="checkbox" id="agreeMarketing"
                                class="mt-1 rounded border-tv-border bg-tv-light text-tv-blue focus:ring-tv-blue">
                            <label for="agreeMarketing" class="text-xs text-tv-text-secondary">
                                ë§ˆì¼€íŒ… ì •ë³´ ìˆ˜ì‹ ì— ë™ì˜í•©ë‹ˆë‹¤
                            </label>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Footer Bottom -->
            <div class="border-t border-tv-border pt-8">
                <div class="flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0">
                    <div class="text-tv-text-secondary text-sm">
                        <p>&copy; 2025 StockChart. ëª¨ë“  ê¶Œë¦¬ ë³´ìœ .</p>
                    </div>
                    <div class="flex items-center space-x-6 text-sm text-tv-text-secondary">
                        <span class="flex items-center space-x-1">
                            <i class="fas fa-shield-alt text-tv-green"></i>
                            <span>ë³´ì•ˆì¸ì¦</span>
                        </span>
                        <span class="flex items-center space-x-1">
                            <i class="fas fa-lock text-tv-blue"></i>
                            <span>SSL ì•”í˜¸í™”</span>
                        </span>
                        <span class="flex items-center space-x-1">
                            <i class="fas fa-award text-tv-green"></i>
                            <span>ê¸ˆìœµìœ„ì›íšŒ ì¸ê°€</span>
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Login Modal -->
    <div id="loginModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div id="loginModalContent"
            class="bg-tv-card border border-tv-border rounded-2xl p-8 max-w-md w-full mx-4 transform scale-95 opacity-0 transition-all duration-300">
            <div class="flex items-center justify-between mb-6">
                <h2 class="text-2xl font-bold text-tv-text">ë¡œê·¸ì¸</h2>
                <button onclick="hideLoginModal()" class="text-tv-text-secondary hover:text-tv-text transition-colors">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            <form id="loginForm" class="space-y-4">
                <div>
                    <input type="email" id="loginEmail" placeholder="ì´ë©”ì¼"
                        class="w-full bg-tv-light border border-tv-border rounded-lg px-4 py-3 text-tv-text focus:ring-2 focus:ring-tv-blue focus:border-transparent"
                        required>
                </div>
                <div class="relative">
                    <input type="password" id="loginPassword" placeholder="ë¹„ë°€ë²ˆí˜¸"
                        class="w-full bg-tv-light border border-tv-border rounded-lg px-4 py-3 text-tv-text focus:ring-2 focus:ring-tv-blue focus:border-transparent pr-12"
                        required>
                    <button type="button" onclick="togglePasswordVisibility('loginPassword')"
                        class="absolute right-3 top-1/2 transform -translate-y-1/2 text-tv-text-secondary hover:text-tv-text transition-colors">
                        <i id="loginPasswordEye" class="fas fa-eye"></i>
                    </button>
                </div>
                <button type="submit"
                    class="w-full bg-tv-blue hover:bg-blue-600 text-white py-3 rounded-lg font-semibold transition-colors">
                    ë¡œê·¸ì¸
                </button>
            </form>
        </div>
    </div>

    <!-- JavaScript -->
    <script>
        // User predictions data (will be loaded from localStorage or API)
        let userPredictions = [];

        // Initialize page
        document.addEventListener('DOMContentLoaded', function () {
            loadUserPredictions();
            setupEventListeners();
        });

        function loadUserPredictions() {
            // Load predictions from localStorage
            const saved = localStorage.getItem('userPredictions');
            userPredictions = saved ? JSON.parse(saved) : [];

            displayStats();
            displayPredictions();
        }

        function displayStats() {
            const stats = calculateStats();
            const container = document.getElementById('statsOverview');

            container.innerHTML = `
                <div class="bg-tv-card border border-tv-border rounded-xl p-6">
                    <div class="flex items-center justify-between mb-2">
                        <i class="fas fa-chart-line text-tv-blue text-2xl"></i>
                        <span class="text-sm ${stats.totalChange >= 0 ? 'text-tv-green bg-tv-green' : 'text-tv-red bg-tv-red'} bg-opacity-20 px-2 py-1 rounded">
                            ${stats.totalChange >= 0 ? '+' : ''}${stats.totalChange.toFixed(1)}%
                        </span>
                    </div>
                    <div class="text-2xl font-bold text-tv-text mb-1">${stats.totalCount}</div>
                    <div class="text-sm text-tv-text-secondary">ì´ ì˜ˆì¸¡ ìˆ˜</div>
                </div>

                <div class="bg-tv-card border border-tv-border rounded-xl p-6">
                    <div class="flex items-center justify-between mb-2">
                        <i class="fas fa-target text-tv-green text-2xl"></i>
                        <span class="text-sm text-tv-green bg-tv-green bg-opacity-20 px-2 py-1 rounded">â†‘</span>
                    </div>
                    <div class="text-2xl font-bold text-tv-text mb-1">${stats.accuracy.toFixed(1)}%</div>
                    <div class="text-sm text-tv-text-secondary">ì •í™•ë„</div>
                </div>

                <div class="bg-tv-card border border-tv-border rounded-xl p-6">
                    <div class="flex items-center justify-between mb-2">
                        <i class="fas fa-trophy text-tv-blue text-2xl"></i>
                        <span class="text-sm text-tv-text-secondary">#${stats.ranking}</span>
                    </div>
                    <div class="text-2xl font-bold text-tv-text mb-1">${stats.successStreak}</div>
                    <div class="text-sm text-tv-text-secondary">ì—°ì† ì„±ê³µ</div>
                </div>

                <div class="bg-tv-card border border-tv-border rounded-xl p-6">
                    <div class="flex items-center justify-between mb-2">
                        <i class="fas fa-coins text-tv-green text-2xl"></i>
                        <span class="text-sm ${stats.totalReturn >= 0 ? 'text-tv-green bg-tv-green' : 'text-tv-red bg-tv-red'} bg-opacity-20 px-2 py-1 rounded">
                            ${stats.totalReturn >= 0 ? '+' : ''}${stats.totalReturn.toFixed(1)}%
                        </span>
                    </div>
                    <div class="text-2xl font-bold text-tv-text mb-1">${stats.totalReturn >= 0 ? '+' : ''}${stats.totalReturn.toFixed(1)}%</div>
                    <div class="text-sm text-tv-text-secondary">ì´ ìˆ˜ìµë¥ </div>
                </div>
            `;
        }

        function calculateStats() {
            if (userPredictions.length === 0) {
                return {
                    totalCount: 0,
                    accuracy: 0,
                    totalReturn: 0,
                    successStreak: 0,
                    ranking: 999,
                    totalChange: 0
                };
            }

            const completed = userPredictions.filter(p => p.status === 'completed');
            const successful = completed.filter(p => p.success);

            return {
                totalCount: userPredictions.length,
                accuracy: completed.length > 0 ? (successful.length / completed.length) * 100 : 0,
                totalReturn: completed.reduce((sum, p) => sum + (p.return || 0), 0),
                successStreak: calculateSuccessStreak(),
                ranking: Math.floor(Math.random() * 50) + 1, // Simulated ranking
                totalChange: Math.random() * 10 - 5 // Simulated change
            };
        }

        function calculateSuccessStreak() {
            let streak = 0;
            const completed = userPredictions.filter(p => p.status === 'completed').reverse();

            for (const prediction of completed) {
                if (prediction.success) {
                    streak++;
                } else {
                    break;
                }
            }

            return streak;
        }

        function displayPredictions() {
            const container = document.getElementById('predictionsContainer');
            const emptyState = document.getElementById('emptyState');

            if (userPredictions.length === 0) {
                emptyState.style.display = 'block';
                return;
            }

            emptyState.style.display = 'none';

            const html = userPredictions.map(prediction => createPredictionCard(prediction)).join('');
            container.innerHTML = html;
        }

        function createPredictionCard(prediction) {
            const statusConfig = {
                'active': { class: 'bg-tv-blue bg-opacity-20 text-tv-blue', text: 'ì§„í–‰ì¤‘', icon: 'fa-clock' },
                'completed': {
                    class: prediction.success ? 'bg-tv-green bg-opacity-20 text-tv-green' : 'bg-tv-red bg-opacity-20 text-tv-red',
                    text: prediction.success ? 'ì„±ê³µ' : 'ì‹¤íŒ¨',
                    icon: prediction.success ? 'fa-check' : 'fa-times'
                },
                'cancelled': { class: 'bg-tv-text-secondary bg-opacity-20 text-tv-text-secondary', text: 'ì·¨ì†Œë¨', icon: 'fa-ban' }
            };

            const config = statusConfig[prediction.status] || statusConfig.active;

            return `
                <div class="bg-tv-card border border-tv-border rounded-xl overflow-hidden hover:border-tv-blue transition-all duration-200">
                    <div class="p-6">
                        <div class="flex items-start justify-between mb-4">
                            <div class="flex items-center space-x-3">
                                <div class="w-12 h-12 bg-tv-blue bg-opacity-20 rounded-lg flex items-center justify-center">
                                    <i class="${prediction.icon} text-tv-blue"></i>
                                </div>
                                <div>
                                    <h3 class="text-lg font-semibold text-tv-text">${prediction.symbol}</h3>
                                    <p class="text-sm text-tv-text-secondary">${prediction.date} ì˜ˆì¸¡</p>
                                </div>
                            </div>
                            <span class="${config.class} px-3 py-1 rounded-full text-sm font-medium flex items-center">
                                <i class="fas ${config.icon} mr-1"></i>${config.text}
                            </span>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                            <div>
                                <div class="text-sm text-tv-text-secondary mb-1">ì˜ˆì¸¡ ê°€ê²©</div>
                                <div class="text-xl font-bold text-tv-text">$${prediction.targetPrice.toLocaleString()}</div>
                            </div>
                            <div>
                                <div class="text-sm text-tv-text-secondary mb-1">í˜„ì¬ ê°€ê²©</div>
                                <div class="text-xl font-bold ${prediction.currentPrice > prediction.initialPrice ? 'text-tv-green' : 'text-tv-red'}">
                                    $${prediction.currentPrice.toLocaleString()}
                                </div>
                            </div>
                            <div>
                                <div class="text-sm text-tv-text-secondary mb-1">ëª©í‘œì¼</div>
                                <div class="text-xl font-bold text-tv-text">${prediction.targetDate}</div>
                            </div>
                        </div>

                        <div class="flex items-center justify-between">
                            <div class="flex items-center space-x-4">
                                <div class="text-sm text-tv-text-secondary">ì‹ ë¢°ë„: <span class="text-tv-text font-medium">${prediction.confidence}%</span></div>
                                ${prediction.status === 'active' ? `<div class="text-sm text-tv-text-secondary">ë‚¨ì€ ê¸°ê°„: <span class="text-tv-text font-medium">${prediction.daysLeft}ì¼</span></div>` : ''}
                            </div>
                            <div class="flex space-x-2">
                                ${prediction.status === 'active' ? `
                                    <button onclick="editPrediction('${prediction.id}')"
                                        class="bg-tv-light hover:bg-tv-border text-tv-text px-4 py-2 rounded-lg text-sm font-medium transition-colors">ìˆ˜ì •</button>
                                    <button onclick="cancelPrediction('${prediction.id}')"
                                        class="bg-tv-red hover:bg-red-600 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors">ì·¨ì†Œ</button>
                                ` : `
                                    <button onclick="viewPredictionDetails('${prediction.id}')"
                                        class="bg-tv-light hover:bg-tv-border text-tv-text px-4 py-2 rounded-lg text-sm font-medium transition-colors">ìƒì„¸ë³´ê¸°</button>
                                `}
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function setupEventListeners() {
            // Filter listeners
            document.getElementById('statusFilter').addEventListener('change', filterPredictions);
            document.getElementById('periodFilter').addEventListener('change', filterPredictions);
        }

        function filterPredictions() {
            const statusFilter = document.getElementById('statusFilter').value;
            const periodFilter = document.getElementById('periodFilter').value;

            // Apply filters and re-display
            let filtered = userPredictions;

            if (statusFilter !== 'all') {
                filtered = filtered.filter(p => p.status === statusFilter);
            }

            // Period filtering logic would go here

            displayFilteredPredictions(filtered);
        }

        function displayFilteredPredictions(predictions) {
            const container = document.getElementById('predictionsContainer');
            const emptyState = document.getElementById('emptyState');

            if (predictions.length === 0) {
                container.innerHTML = `
                    <div class="text-center py-16">
                        <div class="w-24 h-24 mx-auto mb-6 bg-tv-card border border-tv-border rounded-2xl flex items-center justify-center">
                            <i class="fas fa-filter text-4xl text-tv-text-secondary"></i>
                        </div>
                        <h3 class="text-xl font-semibold text-tv-text mb-2">í•„í„° ì¡°ê±´ì— ë§ëŠ” ì˜ˆì¸¡ì´ ì—†ìŠµë‹ˆë‹¤</h3>
                        <p class="text-tv-text-secondary mb-6">ë‹¤ë¥¸ í•„í„°ë¥¼ ì„ íƒí•´ë³´ì„¸ìš”</p>
                    </div>
                `;
                return;
            }

            const html = predictions.map(prediction => createPredictionCard(prediction)).join('');
            container.innerHTML = html;
        }

        // Action functions
        function createNewPrediction() {
            window.location.href = 'prediction.html';
        }

        function editPrediction(id) {
            showNotification('ì˜ˆì¸¡ ìˆ˜ì • ê¸°ëŠ¥ì„ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤', 'info');
        }

        function cancelPrediction(id) {
            if (confirm('ì •ë§ë¡œ ì´ ì˜ˆì¸¡ì„ ì·¨ì†Œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                const prediction = userPredictions.find(p => p.id === id);
                if (prediction) {
                    prediction.status = 'cancelled';
                    saveUserPredictions();
                    loadUserPredictions();
                    showNotification('ì˜ˆì¸¡ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤', 'success');
                }
            }
        }

        function viewPredictionDetails(id) {
            showNotification('ìƒì„¸ ë¶„ì„ ê¸°ëŠ¥ì„ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤', 'info');
        }

        function loadMorePredictions() {
            showNotification('ë” ë§ì€ ì˜ˆì¸¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...', 'info');
        }

        function saveUserPredictions() {
            localStorage.setItem('userPredictions', JSON.stringify(userPredictions));
        }

        // Newsletter subscription
        function subscribeNewsletter(event) {
            event.preventDefault();
            const email = document.getElementById('newsletterEmail').value;
            const agree = document.getElementById('agreeMarketing').checked;

            if (!email) {
                showNotification('ì´ë©”ì¼ ì£¼ì†Œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”', 'error');
                return;
            }

            if (!agree) {
                showNotification('ë§ˆì¼€íŒ… ì •ë³´ ìˆ˜ì‹ ì— ë™ì˜í•´ì£¼ì„¸ìš”', 'error');
                return;
            }

            // Simulate subscription
            showNotification('ë‰´ìŠ¤ë ˆí„° êµ¬ë…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!', 'success');
            document.getElementById('newsletterEmail').value = '';
            document.getElementById('agreeMarketing').checked = false;
        }

        // Mobile menu toggle
        function toggleMobileMenu() {
            const mobileMenu = document.getElementById('mobileMenu');
            mobileMenu.classList.toggle('hidden');
        }

        // Modal functions
        function showLoginModal() {
            const modal = document.getElementById('loginModal');
            const content = document.getElementById('loginModalContent');

            modal.classList.remove('hidden');
            modal.classList.add('flex');
            document.body.style.overflow = 'hidden';

            setTimeout(() => {
                content.classList.remove('scale-95', 'opacity-0');
                content.classList.add('scale-100', 'opacity-100');
            }, 10);
        }

        function hideLoginModal() {
            const modal = document.getElementById('loginModal');
            const content = document.getElementById('loginModalContent');

            content.classList.add('scale-95', 'opacity-0');
            content.classList.remove('scale-100', 'opacity-100');

            setTimeout(() => {
                modal.classList.add('hidden');
                modal.classList.remove('flex');
                document.body.style.overflow = '';
            }, 300);
        }

        function togglePasswordVisibility(inputId) {
            const input = document.getElementById(inputId);
            const eyeIcon = document.getElementById(inputId + 'Eye');

            if (input.type === 'password') {
                input.type = 'text';
                eyeIcon.className = 'fas fa-eye-slash';
            } else {
                input.type = 'password';
                eyeIcon.className = 'fas fa-eye';
            }
        }

        // Notification system
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 z-50 px-6 py-4 rounded-lg shadow-lg transform translate-x-full transition-transform duration-300 ${type === 'success' ? 'bg-tv-green text-white' :
                type === 'error' ? 'bg-tv-red text-white' :
                    'bg-tv-blue text-white'
                }`;
            notification.innerHTML = `
                <div class="flex items-center space-x-3">
                    <i class="fas ${type === 'success' ? 'fa-check-circle' :
                    type === 'error' ? 'fa-exclamation-circle' :
                        'fa-info-circle'
                }"></i>
                    <span>${message}</span>
                </div>
            `;

            document.body.appendChild(notification);

            setTimeout(() => notification.classList.remove('translate-x-full'), 100);

            setTimeout(() => {
                notification.classList.add('translate-x-full');
                setTimeout(() => notification.remove(), 300);
            }, 5000);
        }
    </script>
</body>

</html>