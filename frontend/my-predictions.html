<!DOCTYPE html>
<html lang="ko" class="overflow-x-hidden max-w-full">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë‚´ ì˜ˆì¸¡ - StockChart</title>
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ“ˆ</text></svg>">

    <!-- Tailwind CSS with TradingView Color Scheme -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'tv': {
                            'darker': '#0d1421',
                            'dark': '#131722',
                            'card': '#1e222d',
                            'light': '#2a2e39',
                            'border': '#363a45',
                            'blue': '#2962ff',
                            'green': '#26a69a',
                            'red': '#ef5350',
                            'text': '#d1d4dc',
                            'text-secondary': '#868993'
                        }
                    },
                    fontFamily: {
                        'sans': ['Inter', 'Noto Sans KR', 'system-ui', 'sans-serif']
                    }
                }
            }
        }
    </script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://unpkg.com/lightweight-charts@4.1.3/dist/lightweight-charts.standalone.production.js"></script>

    <style>
        /* CRITICAL: Fix horizontal scrolling on mobile */
        html,
        body {
            overflow-x: hidden !important;
            max-width: 100vw !important;
            position: relative !important;
        }

        * {
            max-width: 100% !important;
            box-sizing: border-box !important;
        }

        /* Prevent any element from causing horizontal overflow */
        .container,
        .max-w-7xl,
        .w-full {
            max-width: 100vw !important;
            padding-left: 1rem !important;
            padding-right: 1rem !important;
        }

        /* Ensure all sections stay within viewport */
        section {
            max-width: 100vw !important;
            overflow-x: hidden !important;
        }

        /* Fix chart containers */
        .chart-container,
        #chartContainer {
            max-width: 100% !important;
            width: 100% !important;
            overflow: hidden !important;
        }
    </style>
</head>

<body class="bg-tv-darker text-tv-text font-sans overflow-x-hidden max-w-full relative">
    <!-- Navigation Bar -->
    <nav class="bg-tv-dark border-b border-tv-border sticky top-0 z-40 backdrop-blur-md">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <!-- Logo -->
                <div class="flex items-center space-x-3">
                    <a href="home.html"
                        class="flex items-center space-x-2 text-tv-text hover:text-tv-blue transition-colors">
                        <div class="w-8 h-8 bg-tv-blue rounded-lg flex items-center justify-center">
                            <i class="fas fa-chart-line text-white text-sm"></i>
                        </div>
                        <span class="text-xl font-bold">StockChart</span>
                    </a>
                </div>

                <!-- Desktop Navigation -->
                <div class="hidden lg:flex items-center space-x-1">
                    <a href="home.html"
                        class="px-4 py-2 rounded-lg text-tv-text-secondary hover:text-tv-text hover:bg-tv-light transition-all duration-200">í™ˆ</a>
                    <a href="charts.html"
                        class="px-4 py-2 rounded-lg text-tv-text-secondary hover:text-tv-text hover:bg-tv-light transition-all duration-200">ì°¨íŠ¸
                        ë³´ë“œ</a>
                    <a href="prediction.html"
                        class="px-4 py-2 rounded-lg text-tv-text-secondary hover:text-tv-text hover:bg-tv-light transition-all duration-200">ì˜ˆì¸¡í•˜ê¸°</a>
                    <a href="my-predictions.html"
                        class="px-4 py-2 rounded-lg text-tv-text bg-tv-blue bg-opacity-20 border border-tv-blue">ë‚´
                        ì˜ˆì¸¡</a>
                    <a href="ranking.html"
                        class="px-4 py-2 rounded-lg text-tv-text-secondary hover:text-tv-text hover:bg-tv-light transition-all duration-200">ë­í‚¹</a>
                    <a href="events.html"
                        class="px-4 py-2 rounded-lg text-tv-text-secondary hover:text-tv-text hover:bg-tv-light transition-all duration-200">ì´ë²¤íŠ¸</a>
                    <a href="subscription.html"
                        class="px-4 py-2 rounded-lg text-tv-text-secondary hover:text-tv-text hover:bg-tv-light transition-all duration-200">êµ¬ë…</a>
                    <button onclick="showLoginModal()"
                        class="ml-4 bg-tv-blue hover:bg-blue-600 text-white px-6 py-2 rounded-lg font-semibold transition-colors">ë¡œê·¸ì¸</button>
                </div>

                <!-- Mobile menu button -->
                <div class="lg:hidden">
                    <button onclick="toggleMobileMenu()" class="text-tv-text hover:text-tv-blue p-2">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Mobile Navigation -->
        <!-- Mobile Menu Portal - Outside Nav Context -->
        <div id="mobile-menu-portal" class="fixed inset-0 lg:hidden"
            style="display: none; z-index: 999999 !important; position: fixed !important;">
            <!-- Full Screen Overlay -->
            <div class="absolute inset-0 bg-black/50 backdrop-blur-sm" style="z-index: 999990 !important;"
                onclick="toggleMobileMenu()"></div>
            <!-- Menu Sidebar -->
            <div id="mobile-menu-content"
                class="absolute left-0 top-0 h-full w-80 max-w-[80vw] bg-[#1e1e2e] border-r border-[#8b5cf6]/20 transform -translate-x-full transition-transform duration-300 ease-in-out shadow-2xl"
                style="z-index: 999999 !important;">
                <!-- Menu Header -->
                <div class="flex items-center justify-between p-6 border-b border-[#8b5cf6]/20">
                    <div class="flex items-center space-x-3">
                        <div
                            class="w-8 h-8 bg-gradient-to-r from-[#8b5cf6] to-[#3b82f6] rounded-lg flex items-center justify-center">
                            <i class="fas fa-chart-line text-white text-sm"></i>
                        </div>
                        <span class="text-white font-bold text-xl">StockChart</span>
                    </div>
                    <button onclick="toggleMobileMenu()" class="text-gray-400 hover:text-white transition-colors p-2">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
                <!-- Menu Items -->
                <div class="p-6 space-y-4">
                    <a href="home.html"
                        class="flex items-center space-x-3 p-3 rounded-lg hover:bg-[#8b5cf6]/10 transition-colors group">
                        <i class="fas fa-home text-[#8b5cf6] group-hover:text-white transition-colors"></i>
                        <span class="text-gray-300 group-hover:text-white transition-colors">í™ˆ</span>
                    </a>
                    <a href="charts.html"
                        class="flex items-center space-x-3 p-3 rounded-lg hover:bg-[#8b5cf6]/10 transition-colors group">
                        <i class="fas fa-chart-area text-[#8b5cf6] group-hover:text-white transition-colors"></i>
                        <span class="text-gray-300 group-hover:text-white transition-colors">ì°¨íŠ¸ ë¶„ì„</span>
                    </a>
                    <a href="prediction.html"
                        class="flex items-center space-x-3 p-3 rounded-lg hover:bg-[#8b5cf6]/10 transition-colors group">
                        <i class="fas fa-brain text-[#8b5cf6] group-hover:text-white transition-colors"></i>
                        <span class="text-gray-300 group-hover:text-white transition-colors">AI ì˜ˆì¸¡</span>
                    </a>
                    <a href="my-predictions.html"
                        class="flex items-center space-x-3 p-3 rounded-lg bg-[#8b5cf6]/20 border border-[#8b5cf6] transition-colors group">
                        <i class="fas fa-user-chart text-[#8b5cf6] transition-colors"></i>
                        <span class="text-white transition-colors">ë‚´ ì˜ˆì¸¡</span>
                    </a>
                    <a href="ranking.html"
                        class="flex items-center space-x-3 p-3 rounded-lg hover:bg-[#8b5cf6]/10 transition-colors group">
                        <i class="fas fa-trophy text-[#8b5cf6] group-hover:text-white transition-colors"></i>
                        <span class="text-gray-300 group-hover:text-white transition-colors">ë­í‚¹</span>
                    </a>
                    <a href="events.html"
                        class="flex items-center space-x-3 p-3 rounded-lg hover:bg-[#8b5cf6]/10 transition-colors group">
                        <i class="fas fa-calendar-alt text-[#8b5cf6] group-hover:text-white transition-colors"></i>
                        <span class="text-gray-300 group-hover:text-white transition-colors">ì´ë²¤íŠ¸</span>
                    </a>
                    <a href="subscription.html"
                        class="flex items-center space-x-3 p-3 rounded-lg hover:bg-[#8b5cf6]/10 transition-colors group">
                        <i class="fas fa-crown text-[#8b5cf6] group-hover:text-white transition-colors"></i>
                        <span class="text-gray-300 group-hover:text-white transition-colors">êµ¬ë…</span>
                    </a>
                </div>
                <!-- Bottom Section -->
                <div class="absolute bottom-6 left-6 right-6">
                    <div
                        class="p-4 bg-gradient-to-r from-[#8b5cf6]/20 to-[#3b82f6]/20 rounded-lg border border-[#8b5cf6]/30">
                        <div class="text-white font-semibold mb-2">í”„ë¦¬ë¯¸ì—„ êµ¬ë…</div>
                        <div class="text-gray-300 text-sm mb-3">ê³ ê¸‰ ë¶„ì„ ë„êµ¬ì™€ ì‹¤ì‹œê°„ ì•Œë¦¼ì„ ë°›ì•„ë³´ì„¸ìš”</div>
                        <button
                            class="w-full bg-gradient-to-r from-[#8b5cf6] to-[#3b82f6] text-white py-2 px-4 rounded-lg hover:from-[#7c3aed] hover:to-[#2563eb] transition-all">
                            ë¬´ë£Œë¡œ ì‹œì‘í•˜ê¸°
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- My Predictions Section -->
    <section class="py-8 bg-tv-darker min-h-screen">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <!-- Page Header -->
            <div class="mb-8">
                <div class="flex items-center justify-between mb-4">
                    <div class="flex items-center space-x-3">
                        <i class="fas fa-user-chart text-tv-blue text-3xl"></i>
                        <h1 class="text-3xl lg:text-4xl font-bold text-tv-text">ë‚´ ì˜ˆì¸¡</h1>
                    </div>
                    <button onclick="loadUserPredictions()"
                        class="bg-tv-blue hover:bg-blue-600 text-white px-4 py-2 rounded-lg font-medium transition-colors flex items-center space-x-2">
                        <i class="fas fa-sync-alt"></i>
                        <span>ìƒˆë¡œê³ ì¹¨</span>
                    </button>
                    <button onclick="loadTestData()"
                        class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-medium transition-colors flex items-center space-x-2 ml-2">
                        <i class="fas fa-flask"></i>
                        <span>í…ŒìŠ¤íŠ¸ ë°ì´í„°</span>
                    </button>
                </div>
                <p class="text-lg text-tv-text-secondary max-w-2xl">ë‚˜ì˜ ì˜ˆì¸¡ í˜„í™©ê³¼ ì„±ê³¼ë¥¼ í™•ì¸í•˜ê³  ë¶„ì„í•´ë³´ì„¸ìš”</p>
            </div>

            <!-- Stats Overview -->
            <div class="grid grid-cols-2 lg:grid-cols-4 gap-6 mb-8" id="statsOverview">
                <!-- Stats will be loaded dynamically -->
            </div>

            <!-- Filters and Controls -->
            <div class="bg-tv-card border border-tv-border rounded-xl p-6 mb-6">
                <div class="flex flex-col lg:flex-row gap-4 items-start lg:items-center justify-between">
                    <div class="flex flex-wrap gap-4">
                        <select id="statusFilter"
                            class="bg-tv-light border border-tv-border rounded-lg px-4 py-2 text-tv-text focus:ring-2 focus:ring-tv-blue focus:border-transparent">
                            <option value="all">ì „ì²´ ìƒíƒœ</option>
                            <option value="active">ì§„í–‰ì¤‘</option>
                            <option value="completed">ì™„ë£Œ</option>
                            <option value="cancelled">ì·¨ì†Œë¨</option>
                        </select>
                        <select id="periodFilter"
                            class="bg-tv-light border border-tv-border rounded-lg px-4 py-2 text-tv-text focus:ring-2 focus:ring-tv-blue focus:border-transparent">
                            <option value="all">ì „ì²´ ê¸°ê°„</option>
                            <option value="week">ì´ë²ˆ ì£¼</option>
                            <option value="month">ì´ë²ˆ ë‹¬</option>
                            <option value="quarter">ìµœê·¼ 3ê°œì›”</option>
                        </select>
                    </div>
                    <button onclick="createNewPrediction()"
                        class="bg-tv-blue hover:bg-blue-600 text-white px-6 py-2 rounded-lg font-semibold transition-colors">
                        <i class="fas fa-plus mr-2"></i>ìƒˆ ì˜ˆì¸¡ ì¶”ê°€
                    </button>
                </div>
            </div>

            <!-- Prediction Cards Container -->
            <div id="predictionsContainer" class="space-y-6">
                <!-- Empty State -->
                <div id="emptyState" class="text-center py-16">
                    <div
                        class="w-24 h-24 mx-auto mb-6 bg-tv-card border border-tv-border rounded-2xl flex items-center justify-center">
                        <i class="fas fa-chart-line text-4xl text-tv-text-secondary"></i>
                    </div>
                    <h3 class="text-xl font-semibold text-tv-text mb-2">ì•„ì§ ì˜ˆì¸¡ì´ ì—†ìŠµë‹ˆë‹¤</h3>
                    <p class="text-tv-text-secondary mb-6">ì²« ë²ˆì§¸ ì˜ˆì¸¡ì„ ë§Œë“¤ì–´ íˆ¬ì ì—¬ì •ì„ ì‹œì‘í•´ë³´ì„¸ìš”!</p>
                    <button onclick="createNewPrediction()"
                        class="bg-tv-blue hover:bg-blue-600 text-white px-8 py-3 rounded-lg font-semibold transition-colors">
                        <i class="fas fa-plus mr-2"></i>ì²« ì˜ˆì¸¡ ë§Œë“¤ê¸°
                    </button>
                </div>
            </div>

            <!-- Load More -->
            <div id="loadMoreContainer" class="text-center mt-8 hidden">
                <button onclick="loadMorePredictions()"
                    class="bg-tv-light hover:bg-tv-border text-tv-text px-8 py-3 rounded-lg font-semibold transition-colors">
                    ë” ë§ì€ ì˜ˆì¸¡ ë³´ê¸°
                </button>
            </div>
        </div>
    </section>

    <!-- Enhanced Footer -->
    <footer class="bg-tv-darker border-t border-tv-border relative overflow-hidden">
        <!-- Background Gradient -->
        <div class="absolute inset-0 bg-gradient-to-br from-tv-blue/5 via-transparent to-tv-green/5"></div>

        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 relative z-10">
            <!-- Main Footer Content -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-12">
                <!-- Company Section -->
                <div class="lg:col-span-1">
                    <div class="flex items-center space-x-2 mb-6">
                        <div
                            class="w-10 h-10 bg-gradient-to-br from-tv-blue to-tv-green rounded-xl flex items-center justify-center">
                            <i class="fas fa-chart-line text-white text-lg"></i>
                        </div>
                        <h3 class="text-2xl font-bold text-tv-text">StockChart</h3>
                    </div>
                    <p class="text-tv-text-secondary mb-6 leading-relaxed">
                        AI ê¸°ë°˜ ì£¼ì‹ ì˜ˆì¸¡ê³¼ ì‹¤ì‹œê°„ ë¶„ì„ìœ¼ë¡œ<br>
                        ë” ìŠ¤ë§ˆíŠ¸í•œ íˆ¬ì ê²°ì •ì„ ë‚´ë¦¬ì„¸ìš”
                    </p>
                    <div class="flex space-x-3">
                        <a href="#"
                            class="w-10 h-10 bg-tv-light hover:bg-tv-blue rounded-lg flex items-center justify-center text-tv-text-secondary hover:text-white transition-all duration-200 hover:scale-110">
                            <i class="fab fa-facebook"></i>
                        </a>
                        <a href="#"
                            class="w-10 h-10 bg-tv-light hover:bg-tv-blue rounded-lg flex items-center justify-center text-tv-text-secondary hover:text-white transition-all duration-200 hover:scale-110">
                            <i class="fab fa-twitter"></i>
                        </a>
                        <a href="#"
                            class="w-10 h-10 bg-tv-light hover:bg-tv-blue rounded-lg flex items-center justify-center text-tv-text-secondary hover:text-white transition-all duration-200 hover:scale-110">
                            <i class="fab fa-instagram"></i>
                        </a>
                        <a href="#"
                            class="w-10 h-10 bg-tv-light hover:bg-tv-blue rounded-lg flex items-center justify-center text-tv-text-secondary hover:text-white transition-all duration-200 hover:scale-110">
                            <i class="fab fa-youtube"></i>
                        </a>
                    </div>
                </div>

                <!-- Services Section -->
                <div>
                    <h4 class="font-semibold text-tv-text mb-6 text-lg">ì„œë¹„ìŠ¤</h4>
                    <ul class="space-y-3">
                        <li><a href="charts.html"
                                class="text-tv-text-secondary hover:text-tv-blue transition-colors flex items-center space-x-2 group">
                                <i
                                    class="fas fa-chart-bar w-4 text-tv-text-secondary group-hover:text-tv-blue transition-colors"></i>
                                <span>ì°¨íŠ¸ ë³´ë“œ</span>
                            </a></li>
                        <li><a href="prediction.html"
                                class="text-tv-text-secondary hover:text-tv-blue transition-colors flex items-center space-x-2 group">
                                <i
                                    class="fas fa-target w-4 text-tv-text-secondary group-hover:text-tv-blue transition-colors"></i>
                                <span>ì˜ˆì¸¡í•˜ê¸°</span>
                            </a></li>
                        <li><a href="my-predictions.html"
                                class="text-tv-text-secondary hover:text-tv-blue transition-colors flex items-center space-x-2 group">
                                <i
                                    class="fas fa-user-chart w-4 text-tv-text-secondary group-hover:text-tv-blue transition-colors"></i>
                                <span>ë‚´ ì˜ˆì¸¡</span>
                            </a></li>
                        <li><a href="ranking.html"
                                class="text-tv-text-secondary hover:text-tv-blue transition-colors flex items-center space-x-2 group">
                                <i
                                    class="fas fa-trophy w-4 text-tv-text-secondary group-hover:text-tv-blue transition-colors"></i>
                                <span>ë­í‚¹</span>
                            </a></li>
                        <li><a href="events.html"
                                class="text-tv-text-secondary hover:text-tv-blue transition-colors flex items-center space-x-2 group">
                                <i
                                    class="fas fa-calendar w-4 text-tv-text-secondary group-hover:text-tv-blue transition-colors"></i>
                                <span>ì´ë²¤íŠ¸</span>
                            </a></li>
                    </ul>
                </div>

                <!-- Support Section -->
                <div>
                    <h4 class="font-semibold text-tv-text mb-6 text-lg">ê³ ê°ì§€ì›</h4>
                    <ul class="space-y-3">
                        <li><a href="#"
                                class="text-tv-text-secondary hover:text-tv-blue transition-colors flex items-center space-x-2 group">
                                <i
                                    class="fas fa-question-circle w-4 text-tv-text-secondary group-hover:text-tv-blue transition-colors"></i>
                                <span>FAQ</span>
                            </a></li>
                        <li><a href="#"
                                class="text-tv-text-secondary hover:text-tv-blue transition-colors flex items-center space-x-2 group">
                                <i
                                    class="fas fa-envelope w-4 text-tv-text-secondary group-hover:text-tv-blue transition-colors"></i>
                                <span>ë¬¸ì˜í•˜ê¸°</span>
                            </a></li>
                        <li><a href="#"
                                class="text-tv-text-secondary hover:text-tv-blue transition-colors flex items-center space-x-2 group">
                                <i
                                    class="fas fa-file-contract w-4 text-tv-text-secondary group-hover:text-tv-blue transition-colors"></i>
                                <span>ì´ìš©ì•½ê´€</span>
                            </a></li>
                        <li><a href="#"
                                class="text-tv-text-secondary hover:text-tv-blue transition-colors flex items-center space-x-2 group">
                                <i
                                    class="fas fa-shield-alt w-4 text-tv-text-secondary group-hover:text-tv-blue transition-colors"></i>
                                <span>ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</span>
                            </a></li>
                        <li><a href="#"
                                class="text-tv-text-secondary hover:text-tv-blue transition-colors flex items-center space-x-2 group">
                                <i
                                    class="fas fa-headset w-4 text-tv-text-secondary group-hover:text-tv-blue transition-colors"></i>
                                <span>24/7 ê³ ê°ì„¼í„°</span>
                            </a></li>
                    </ul>
                </div>

                <!-- Newsletter Section -->
                <div>
                    <h4 class="font-semibold text-tv-text mb-6 text-lg">ë‰´ìŠ¤ë ˆí„°</h4>
                    <p class="text-tv-text-secondary mb-4 text-sm">
                        ìµœì‹  ì‹œì¥ ë¶„ì„ê³¼ ì˜ˆì¸¡ íŒì„<br>
                        ì´ë©”ì¼ë¡œ ë°›ì•„ë³´ì„¸ìš”
                    </p>
                    <form class="space-y-3" onsubmit="subscribeNewsletter(event)">
                        <div class="relative">
                            <input type="email" id="newsletterEmail" placeholder="ì´ë©”ì¼ ì£¼ì†Œ ì…ë ¥"
                                class="w-full bg-tv-light border border-tv-border rounded-lg px-4 py-3 text-tv-text focus:ring-2 focus:ring-tv-blue focus:border-transparent text-sm">
                            <button type="submit"
                                class="absolute right-2 top-1/2 transform -translate-y-1/2 bg-tv-blue hover:bg-blue-600 text-white px-3 py-1.5 rounded-md text-sm font-medium transition-colors">
                                êµ¬ë…
                            </button>
                        </div>
                        <div class="flex items-start space-x-2">
                            <input type="checkbox" id="agreeMarketing"
                                class="mt-1 rounded border-tv-border bg-tv-light text-tv-blue focus:ring-tv-blue">
                            <label for="agreeMarketing" class="text-xs text-tv-text-secondary">
                                ë§ˆì¼€íŒ… ì •ë³´ ìˆ˜ì‹ ì— ë™ì˜í•©ë‹ˆë‹¤
                            </label>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Footer Bottom -->
            <div class="border-t border-tv-border pt-8">
                <div class="flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0">
                    <div class="text-tv-text-secondary text-sm">
                        <p>&copy; 2025 StockChart. ëª¨ë“  ê¶Œë¦¬ ë³´ìœ .</p>
                    </div>
                    <div class="flex items-center space-x-6 text-sm text-tv-text-secondary">
                        <span class="flex items-center space-x-1">
                            <i class="fas fa-shield-alt text-tv-green"></i>
                            <span>ë³´ì•ˆì¸ì¦</span>
                        </span>
                        <span class="flex items-center space-x-1">
                            <i class="fas fa-lock text-tv-blue"></i>
                            <span>SSL ì•”í˜¸í™”</span>
                        </span>
                        <span class="flex items-center space-x-1">
                            <i class="fas fa-award text-tv-green"></i>
                            <span>ê¸ˆìœµìœ„ì›íšŒ ì¸ê°€</span>
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Login Modal -->
    <div id="loginModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div id="loginModalContent"
            class="bg-tv-card border border-tv-border rounded-2xl p-8 max-w-md w-full mx-4 transform scale-95 opacity-0 transition-all duration-300">
            <div class="flex items-center justify-between mb-6">
                <h2 class="text-2xl font-bold text-tv-text">ë¡œê·¸ì¸</h2>
                <button onclick="hideLoginModal()" class="text-tv-text-secondary hover:text-tv-text transition-colors">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            <form id="loginForm" class="space-y-4">
                <div>
                    <input type="email" id="loginEmail" placeholder="ì´ë©”ì¼"
                        class="w-full bg-tv-light border border-tv-border rounded-lg px-4 py-3 text-tv-text focus:ring-2 focus:ring-tv-blue focus:border-transparent"
                        required>
                </div>
                <div class="relative">
                    <input type="password" id="loginPassword" placeholder="ë¹„ë°€ë²ˆí˜¸"
                        class="w-full bg-tv-light border border-tv-border rounded-lg px-4 py-3 text-tv-text focus:ring-2 focus:ring-tv-blue focus:border-transparent pr-12"
                        required>
                    <button type="button" onclick="togglePasswordVisibility('loginPassword')"
                        class="absolute right-3 top-1/2 transform -translate-y-1/2 text-tv-text-secondary hover:text-tv-text transition-colors">
                        <i id="loginPasswordEye" class="fas fa-eye"></i>
                    </button>
                </div>
                <button type="submit"
                    class="w-full bg-tv-blue hover:bg-blue-600 text-white py-3 rounded-lg font-semibold transition-colors">
                    ë¡œê·¸ì¸
                </button>
            </form>
        </div>
    </div>

    <!-- JavaScript -->
    <script>
        // User predictions data (will be loaded from localStorage or API)
        let userPredictions = [];

        // Initialize page
        document.addEventListener('DOMContentLoaded', function () {
            console.log('DOM Content Loaded - starting initialization');

            // Check if required elements exist
            const container = document.getElementById('predictionsContainer');
            const stats = document.getElementById('statsOverview');
            const empty = document.getElementById('emptyState');

            console.log('Required elements check:');
            console.log('- predictionsContainer:', container ? 'Found' : 'Missing');
            console.log('- statsOverview:', stats ? 'Found' : 'Missing');
            console.log('- emptyState:', empty ? 'Found' : 'Missing');

            if (!container || !stats || !empty) {
                console.error('Missing required elements!');
                return;
            }

            loadUserPredictions();
            setupEventListeners();
        });

        async function loadUserPredictions() {
            try {
                // Show loading state
                console.log('Loading predictions - showing loading state...');
                showLoadingState();

                // Load predictions from API
                console.log('Fetching predictions from API...');
                const response = await fetch('/api/charts/predictions/all/');
                console.log('API response status:', response.status);

                if (response.ok) {
                    const data = await response.json();
                    console.log('API response data:', data);

                    // Filter predictions for the current user (anonymous for non-authenticated users)
                    const allPredictions = data.predictions || [];
                    console.log('Total predictions from API:', allPredictions.length);

                    // Debug: Log first few predictions to see structure
                    if (allPredictions.length > 0) {
                        console.log('First prediction structure:', allPredictions[0]);
                        console.log('Sample prediction user:', allPredictions[0].user);
                    }

                    // For anonymous users, show only predictions by "anonymous" user
                    userPredictions = allPredictions.filter(p => {
                        console.log('Filtering prediction:', p.id, 'User:', p.user?.username);
                        return p.user && p.user.username === 'anonymous';
                    });

                    console.log('Filtered predictions for anonymous user:', userPredictions.length);

                    // Also merge with any local predictions (for offline support)
                    const localPredictions = localStorage.getItem('userPredictions');
                    if (localPredictions) {
                        const localData = JSON.parse(localPredictions);
                        // Add local predictions that aren't in the API response
                        localData.forEach(localPred => {
                            if (!userPredictions.find(p => p.id === localPred.id)) {
                                userPredictions.push(localPred);
                            }
                        });
                    }
                } else {
                    // Fallback to localStorage if API fails
                    console.warn('Failed to load predictions from API, using localStorage');
                    const saved = localStorage.getItem('userPredictions');
                    userPredictions = saved ? JSON.parse(saved) : [];
                }

                console.log('Displaying stats and predictions...');
                displayStats();
                displayPredictions();
                console.log('Hiding loading state...');
                hideLoadingState();

            } catch (error) {
                console.error('Error loading predictions:', error);
                // Fallback to localStorage
                const saved = localStorage.getItem('userPredictions');
                userPredictions = saved ? JSON.parse(saved) : [];
                displayStats();
                displayPredictions();
                hideLoadingState();
            }
        }

        function loadTestData() {
            console.log('Loading test data...');
            showLoadingState();

            // Use the exact same data structure as the API
            userPredictions = [
                {
                    "id": 1,
                    "symbol": "AAPL",
                    "stock_name": "AAPL Stock",
                    "market_type": "us_stock",
                    "current_price": 238.71,
                    "predicted_price": 230.6,
                    "prediction_date": "2025-09-16T07:53:39.455561+00:00",
                    "target_date": "2025-09-23T15:53:39.454585+00:00",
                    "duration_days": 7,
                    "status": "pending",
                    "is_completed": false,
                    "user": {
                        "username": "Anonymous",
                        "is_authenticated": false
                    },
                    "created_at": "2025-09-16T15:53:39.524229+00:00",
                    "views_count": 0,
                    "likes_count": 0,
                    "comments_count": 0
                },
                {
                    "id": 2,
                    "symbol": "BTC",
                    "stock_name": "BTC Stock",
                    "market_type": "crypto",
                    "current_price": 51.25,
                    "predicted_price": 55.16,
                    "prediction_date": "2025-09-16T08:25:40.948196+00:00",
                    "target_date": "2025-09-30T16:25:40.947020+00:00",
                    "duration_days": 14,
                    "status": "pending",
                    "is_completed": false,
                    "user": {
                        "username": "Anonymous",
                        "is_authenticated": false
                    },
                    "created_at": "2025-09-16T16:25:40.962136+00:00",
                    "views_count": 0,
                    "likes_count": 0,
                    "comments_count": 0
                }
            ];

            console.log('Test data loaded:', userPredictions.length, 'predictions');
            displayStats();
            displayPredictions();
            hideLoadingState();
        }

        function showLoadingState() {
            const container = document.getElementById('predictionsContainer');
            container.innerHTML = `
                <div class="text-center py-16">
                    <div class="w-24 h-24 mx-auto mb-6 bg-tv-card border border-tv-border rounded-2xl flex items-center justify-center">
                        <i class="fas fa-spinner fa-spin text-4xl text-tv-text-secondary"></i>
                    </div>
                    <h3 class="text-xl font-semibold text-tv-text mb-2">ì˜ˆì¸¡ ëª©ë¡ ë¡œë”© ì¤‘...</h3>
                    <p class="text-tv-text-secondary">ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”.</p>
                </div>
            `;
        }

        function hideLoadingState() {
            // Remove loading state - the container will be populated by displayPredictions()
            console.log('Hiding loading state');
        }

        function displayStats() {
            console.log('displayStats called');
            try {
                const stats = calculateStats();
                console.log('Calculated stats:', stats);
                const container = document.getElementById('statsOverview');

                container.innerHTML = `
                    <div class="bg-tv-card border border-tv-border rounded-xl p-6">
                        <div class="flex items-center justify-between mb-2">
                            <i class="fas fa-chart-line text-tv-blue text-2xl"></i>
                            <span class="text-sm ${stats.totalChange >= 0 ? 'text-tv-green bg-tv-green' : 'text-tv-red bg-tv-red'} bg-opacity-20 px-2 py-1 rounded">
                                ${stats.totalChange >= 0 ? '+' : ''}${stats.totalChange.toFixed(1)}%
                            </span>
                        </div>
                        <div class="text-2xl font-bold text-tv-text mb-1">${stats.totalCount}</div>
                        <div class="text-sm text-tv-text-secondary">ì´ ì˜ˆì¸¡ ìˆ˜</div>
                    </div>

                    <div class="bg-tv-card border border-tv-border rounded-xl p-6">
                        <div class="flex items-center justify-between mb-2">
                            <i class="fas fa-target text-tv-green text-2xl"></i>
                            <span class="text-sm text-tv-green bg-tv-green bg-opacity-20 px-2 py-1 rounded">â†‘</span>
                        </div>
                        <div class="text-2xl font-bold text-tv-text mb-1">${stats.accuracy.toFixed(1)}%</div>
                        <div class="text-sm text-tv-text-secondary">ì •í™•ë„</div>
                    </div>

                    <div class="bg-tv-card border border-tv-border rounded-xl p-6">
                        <div class="flex items-center justify-between mb-2">
                            <i class="fas fa-trophy text-tv-blue text-2xl"></i>
                            <span class="text-sm text-tv-text-secondary">#${stats.ranking}</span>
                        </div>
                        <div class="text-2xl font-bold text-tv-text mb-1">${stats.successStreak}</div>
                        <div class="text-sm text-tv-text-secondary">ì—°ì† ì„±ê³µ</div>
                    </div>

                    <div class="bg-tv-card border border-tv-border rounded-xl p-6">
                        <div class="flex items-center justify-between mb-2">
                            <i class="fas fa-coins text-tv-green text-2xl"></i>
                            <span class="text-sm ${stats.totalReturn >= 0 ? 'text-tv-green bg-tv-green' : 'text-tv-red bg-tv-red'} bg-opacity-20 px-2 py-1 rounded">
                                ${stats.totalReturn >= 0 ? '+' : ''}${stats.totalReturn.toFixed(1)}%
                            </span>
                        </div>
                        <div class="text-2xl font-bold text-tv-text mb-1">${stats.totalReturn >= 0 ? '+' : ''}${stats.totalReturn.toFixed(1)}%</div>
                        <div class="text-sm text-tv-text-secondary">ì´ ìˆ˜ìµë¥ </div>
                    </div>
                `;
                console.log('Stats displayed successfully');
            } catch (error) {
                console.error('Error displaying stats:', error);
                const container = document.getElementById('statsOverview');
                container.innerHTML = '<div class="text-center py-4 text-tv-text">í†µê³„ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</div>';
            }
        }

        function calculateStats() {
            if (userPredictions.length === 0) {
                return {
                    totalCount: 0,
                    accuracy: 0,
                    totalReturn: 0,
                    successStreak: 0,
                    ranking: 999,
                    totalChange: 0
                };
            }

            // Filter completed predictions (either status='completed' or past target date)
            const completed = userPredictions.filter(p => {
                const targetDate = new Date(p.target_date);
                const currentDate = new Date();
                return p.status === 'completed' || currentDate >= targetDate;
            });

            // Calculate successful predictions
            const successful = completed.filter(p => {
                if (p.actual_price) {
                    // Use actual accuracy if available
                    return p.accuracy_percentage && parseFloat(p.accuracy_percentage) > 70;
                } else {
                    // For predictions without actual_price, consider direction accuracy
                    const predicted = parseFloat(p.predicted_price);
                    const current = parseFloat(p.current_price);
                    // This is a simplified success metric - could be enhanced
                    return Math.abs(predicted - current) / current < 0.1; // Within 10%
                }
            });

            // Calculate total return/profit
            const totalReturn = completed.reduce((sum, p) => {
                if (p.profit_rate) {
                    return sum + parseFloat(p.profit_rate);
                }
                return sum;
            }, 0);

            // Calculate average change
            const avgChange = completed.length > 0 ? totalReturn / completed.length : 0;

            return {
                totalCount: userPredictions.length,
                accuracy: completed.length > 0 ? (successful.length / completed.length) * 100 : 0,
                totalReturn: totalReturn,
                successStreak: calculateSuccessStreak(completed, successful),
                ranking: Math.floor(Math.random() * 50) + 1, // Simulated ranking - could be real
                totalChange: avgChange
            };
        }

        function calculateSuccessStreak(completed = null, successful = null) {
            if (!completed) {
                completed = userPredictions.filter(p => {
                    const targetDate = new Date(p.target_date);
                    const currentDate = new Date();
                    return p.status === 'completed' || currentDate >= targetDate;
                });
            }

            if (!successful) {
                successful = completed.filter(p => {
                    if (p.actual_price) {
                        return p.accuracy_percentage && parseFloat(p.accuracy_percentage) > 70;
                    } else {
                        const predicted = parseFloat(p.predicted_price);
                        const current = parseFloat(p.current_price);
                        return Math.abs(predicted - current) / current < 0.1;
                    }
                });
            }

            let streak = 0;
            const sortedCompleted = completed.sort((a, b) => new Date(b.created_at) - new Date(a.created_at));

            for (const prediction of sortedCompleted) {
                const isSuccessful = successful.some(s => s.id === prediction.id);
                if (isSuccessful) {
                    streak++;
                } else {
                    break;
                }
            }

            return streak;
        }

        function displayPredictions() {
            console.log('displayPredictions called with', userPredictions.length, 'predictions');
            const container = document.getElementById('predictionsContainer');

            // Check if container exists
            if (!container) {
                console.error('predictionsContainer not found');
                return;
            }

            if (userPredictions.length === 0) {
                console.log('No predictions, showing empty state');
                container.innerHTML = `
                    <!-- Empty State -->
                    <div id="emptyState" class="text-center py-16">
                        <div class="w-24 h-24 mx-auto mb-6 bg-tv-card border border-tv-border rounded-2xl flex items-center justify-center">
                            <i class="fas fa-chart-line text-4xl text-tv-text-secondary"></i>
                        </div>
                        <h3 class="text-xl font-semibold text-tv-text mb-2">ì•„ì§ ì˜ˆì¸¡ì´ ì—†ìŠµë‹ˆë‹¤</h3>
                        <p class="text-tv-text-secondary mb-6">ì²« ë²ˆì§¸ ì˜ˆì¸¡ì„ ë§Œë“¤ì–´ íˆ¬ì ì—¬ì •ì„ ì‹œì‘í•´ë³´ì„¸ìš”!</p>
                        <button onclick="createNewPrediction()" class="bg-tv-blue hover:bg-blue-600 text-white px-8 py-3 rounded-lg font-semibold transition-colors">
                            <i class="fas fa-plus mr-2"></i>ì²« ì˜ˆì¸¡ ë§Œë“¤ê¸°
                        </button>
                    </div>
                `;
                return;
            }

            console.log('Displaying predictions');

            try {
                const html = userPredictions.map(prediction => createPredictionCard(prediction)).join('');
                console.log('Generated HTML length:', html.length);
                container.innerHTML = html;
                console.log('Predictions displayed successfully');
            } catch (error) {
                console.error('Error creating prediction cards:', error);
                container.innerHTML = `
                    <div class="text-center py-8">
                        <p class="text-tv-text">ì˜ˆì¸¡ì„ í‘œì‹œí•˜ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</p>
                        <button onclick="loadUserPredictions()" class="mt-4 bg-tv-blue text-white px-4 py-2 rounded">
                            ë‹¤ì‹œ ì‹œë„
                        </button>
                    </div>
                `;
            }
        }

        function createPredictionCard(prediction) {
            console.log('Creating prediction card for:', prediction);

            try {
                // Convert API data format to display format
                const currentDate = new Date();
                const targetDate = new Date(prediction.target_date);
                const predictionDate = new Date(prediction.prediction_date);
                const isCompleted = currentDate >= targetDate;

                console.log('Dates parsed:', {
                    current: currentDate,
                    target: targetDate,
                    prediction: predictionDate,
                    isCompleted: isCompleted
                });

                // Calculate days left or days since completion
                const daysDiff = Math.ceil((targetDate - currentDate) / (1000 * 60 * 60 * 24));
                const daysLeft = daysDiff > 0 ? daysDiff : 0;

                // Determine status and success
                let status = prediction.status;
                if (isCompleted && status === 'pending') {
                    status = 'completed';
                }

                console.log('Status calculated:', status, 'Days left:', daysLeft);

                // Calculate if prediction was successful (if we have actual price)
                let isSuccessful = false;
                if (prediction.actual_price) {
                    const predicted = parseFloat(prediction.predicted_price);
                    const actual = parseFloat(prediction.actual_price);
                    const current = parseFloat(prediction.current_price);

                    // Success if the prediction was in the right direction
                    if (predicted > current && actual >= predicted * 0.95) {
                        isSuccessful = true;
                    } else if (predicted < current && actual <= predicted * 1.05) {
                        isSuccessful = true;
                    }
                }

                const statusConfig = {
                    'pending': { class: 'bg-tv-blue bg-opacity-20 text-tv-blue', text: 'ì§„í–‰ì¤‘', icon: 'fa-clock' },
                    'completed': {
                        class: isSuccessful ? 'bg-tv-green bg-opacity-20 text-tv-green' : 'bg-tv-red bg-opacity-20 text-tv-red',
                        text: isSuccessful ? 'ì„±ê³µ' : 'ì™„ë£Œ',
                        icon: isSuccessful ? 'fa-check' : 'fa-chart-line'
                    },
                    'cancelled': { class: 'bg-tv-text-secondary bg-opacity-20 text-tv-text-secondary', text: 'ì·¨ì†Œë¨', icon: 'fa-ban' }
                };

                const config = statusConfig[status] || statusConfig.pending;

                // Format dates
                const predictionDateStr = predictionDate.toLocaleDateString('ko-KR');
                const targetDateStr = targetDate.toLocaleDateString('ko-KR');

                // Determine stock icon based on market type
                let stockIcon = 'fa-chart-line';
                if (prediction.market_type === 'crypto') {
                    stockIcon = 'fa-bitcoin';
                } else if (prediction.market_type === 'us_stock') {
                    stockIcon = 'fa-building';
                } else if (prediction.market_type === 'kr_stock') {
                    stockIcon = 'fa-won-sign';
                }

                // Calculate price change percentage
                const priceChange = ((parseFloat(prediction.predicted_price) - parseFloat(prediction.current_price)) / parseFloat(prediction.current_price)) * 100;
                const priceChangeClass = priceChange >= 0 ? 'text-tv-green' : 'text-tv-red';
                const priceChangeText = `${priceChange >= 0 ? '+' : ''}${priceChange.toFixed(2)}%`;

                return `
                <div class="bg-tv-card border border-tv-border rounded-xl overflow-hidden hover:border-tv-blue transition-all duration-200">
                    <div class="p-6">
                        <div class="flex items-start justify-between mb-4">
                            <div class="flex items-center space-x-3">
                                <div class="w-12 h-12 bg-tv-blue bg-opacity-20 rounded-lg flex items-center justify-center">
                                    <i class="fas ${stockIcon} text-tv-blue"></i>
                                </div>
                                <div>
                                    <h3 class="text-lg font-semibold text-tv-text">${prediction.symbol}</h3>
                                    <p class="text-sm text-tv-text-secondary">${prediction.stock_name}</p>
                                    <p class="text-xs text-tv-text-secondary">${predictionDateStr} ì˜ˆì¸¡ â€¢ ${prediction.user.username}</p>
                                </div>
                            </div>
                            <span class="${config.class} px-3 py-1 rounded-full text-sm font-medium flex items-center">
                                <i class="fas ${config.icon} mr-1"></i>${config.text}
                            </span>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                            <div>
                                <div class="text-sm text-tv-text-secondary mb-1">ì˜ˆì¸¡ ê°€ê²©</div>
                                <div class="text-xl font-bold text-tv-text">$${parseFloat(prediction.predicted_price).toLocaleString()}</div>
                                <div class="text-sm ${priceChangeClass}">${priceChangeText}</div>
                            </div>
                            <div>
                                <div class="text-sm text-tv-text-secondary mb-1">ê¸°ì¤€ ê°€ê²©</div>
                                <div class="text-xl font-bold text-tv-text">
                                    $${parseFloat(prediction.current_price).toLocaleString()}
                                </div>
                            </div>
                            <div>
                                <div class="text-sm text-tv-text-secondary mb-1">ëª©í‘œì¼</div>
                                <div class="text-xl font-bold text-tv-text">${targetDateStr}</div>
                                ${status === 'pending' && daysLeft > 0 ? `<div class="text-sm text-tv-blue">D-${daysLeft}</div>` : ''}
                            </div>
                        </div>

                        ${prediction.actual_price ? `
                            <div class="mb-4 p-3 bg-tv-light bg-opacity-50 rounded-lg">
                                <div class="text-sm text-tv-text-secondary mb-1">ì‹¤ì œ ê°€ê²©</div>
                                <div class="text-lg font-bold ${isSuccessful ? 'text-tv-green' : 'text-tv-red'}">
                                    $${parseFloat(prediction.actual_price).toLocaleString()}
                                </div>
                                ${prediction.accuracy_percentage ? `
                                    <div class="text-sm text-tv-text-secondary">ì •í™•ë„: ${parseFloat(prediction.accuracy_percentage).toFixed(1)}%</div>
                                ` : ''}
                            </div>
                        ` : ''}

                        <div class="flex items-center justify-between">
                            <div class="flex items-center space-x-4">
                                <div class="text-sm text-tv-text-secondary">ê¸°ê°„: <span class="text-tv-text font-medium">${prediction.duration_days}ì¼</span></div>
                                <div class="text-sm text-tv-text-secondary">ì¡°íšŒ: <span class="text-tv-text font-medium">${prediction.views_count}</span></div>
                                ${prediction.likes_count > 0 ? `<div class="text-sm text-tv-text-secondary">â¤ï¸ <span class="text-tv-text font-medium">${prediction.likes_count}</span></div>` : ''}
                            </div>
                            <div class="flex space-x-2">
                                <button onclick="viewPredictionDetails('${prediction.id}')"
                                    class="bg-tv-light hover:bg-tv-border text-tv-text px-4 py-2 rounded-lg text-sm font-medium transition-colors">ìƒì„¸ë³´ê¸°</button>
                            </div>
                        </div>
                    </div>
                </div>
            `;

            } catch (error) {
                console.error('Error creating prediction card:', error, 'for prediction:', prediction);
                return `
                    <div class="bg-tv-card border border-tv-border rounded-xl p-6">
                        <div class="text-center text-tv-text">
                            <p>ì˜ˆì¸¡ ì¹´ë“œë¥¼ ìƒì„±í•˜ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</p>
                            <p class="text-sm text-tv-text-secondary mt-2">ID: ${prediction.id}</p>
                        </div>
                    </div>
                `;
            }
        }

        function setupEventListeners() {
            // Filter listeners
            document.getElementById('statusFilter').addEventListener('change', filterPredictions);
            document.getElementById('periodFilter').addEventListener('change', filterPredictions);
        }

        function filterPredictions() {
            const statusFilter = document.getElementById('statusFilter').value;
            const periodFilter = document.getElementById('periodFilter').value;

            // Apply filters and re-display
            let filtered = userPredictions;

            if (statusFilter !== 'all') {
                filtered = filtered.filter(p => p.status === statusFilter);
            }

            // Period filtering logic would go here

            displayFilteredPredictions(filtered);
        }

        function displayFilteredPredictions(predictions) {
            const container = document.getElementById('predictionsContainer');
            const emptyState = document.getElementById('emptyState');

            // Check if elements exist
            if (!container) {
                console.error('predictionsContainer not found in displayFilteredPredictions');
                return;
            }

            if (predictions.length === 0) {
                container.innerHTML = `
                    <div class="text-center py-16">
                        <div class="w-24 h-24 mx-auto mb-6 bg-tv-card border border-tv-border rounded-2xl flex items-center justify-center">
                            <i class="fas fa-filter text-4xl text-tv-text-secondary"></i>
                        </div>
                        <h3 class="text-xl font-semibold text-tv-text mb-2">í•„í„° ì¡°ê±´ì— ë§ëŠ” ì˜ˆì¸¡ì´ ì—†ìŠµë‹ˆë‹¤</h3>
                        <p class="text-tv-text-secondary mb-6">ë‹¤ë¥¸ í•„í„°ë¥¼ ì„ íƒí•´ë³´ì„¸ìš”</p>
                    </div>
                `;
                return;
            }

            const html = predictions.map(prediction => createPredictionCard(prediction)).join('');
            container.innerHTML = html;
        }

        // Action functions
        function createNewPrediction() {
            window.location.href = 'prediction.html';
        }

        function editPrediction(id) {
            showNotification('ì˜ˆì¸¡ ìˆ˜ì • ê¸°ëŠ¥ì„ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤', 'info');
        }

        function cancelPrediction(id) {
            if (confirm('ì •ë§ë¡œ ì´ ì˜ˆì¸¡ì„ ì·¨ì†Œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                const prediction = userPredictions.find(p => p.id === id);
                if (prediction) {
                    prediction.status = 'cancelled';
                    saveUserPredictions();
                    loadUserPredictions();
                    showNotification('ì˜ˆì¸¡ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤', 'success');
                }
            }
        }

        function viewPredictionDetails(id) {
            showNotification('ìƒì„¸ ë¶„ì„ ê¸°ëŠ¥ì„ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤', 'info');
        }

        function loadMorePredictions() {
            showNotification('ë” ë§ì€ ì˜ˆì¸¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...', 'info');
        }

        function saveUserPredictions() {
            localStorage.setItem('userPredictions', JSON.stringify(userPredictions));
        }

        // Newsletter subscription
        function subscribeNewsletter(event) {
            event.preventDefault();
            const email = document.getElementById('newsletterEmail').value;
            const agree = document.getElementById('agreeMarketing').checked;

            if (!email) {
                showNotification('ì´ë©”ì¼ ì£¼ì†Œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”', 'error');
                return;
            }

            if (!agree) {
                showNotification('ë§ˆì¼€íŒ… ì •ë³´ ìˆ˜ì‹ ì— ë™ì˜í•´ì£¼ì„¸ìš”', 'error');
                return;
            }

            // Simulate subscription
            showNotification('ë‰´ìŠ¤ë ˆí„° êµ¬ë…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!', 'success');
            document.getElementById('newsletterEmail').value = '';
            document.getElementById('agreeMarketing').checked = false;
        }

        // Mobile menu toggle
        function toggleMobileMenu() {
            const mobileMenu = document.getElementById('mobileMenu');
            mobileMenu.classList.toggle('hidden');
        }

        // Modal functions
        function showLoginModal() {
            const modal = document.getElementById('loginModal');
            const content = document.getElementById('loginModalContent');

            modal.classList.remove('hidden');
            modal.classList.add('flex');
            document.body.style.overflow = 'hidden';

            setTimeout(() => {
                content.classList.remove('scale-95', 'opacity-0');
                content.classList.add('scale-100', 'opacity-100');
            }, 10);
        }

        function hideLoginModal() {
            const modal = document.getElementById('loginModal');
            const content = document.getElementById('loginModalContent');

            content.classList.add('scale-95', 'opacity-0');
            content.classList.remove('scale-100', 'opacity-100');

            setTimeout(() => {
                modal.classList.add('hidden');
                modal.classList.remove('flex');
                document.body.style.overflow = '';
            }, 300);
        }

        function togglePasswordVisibility(inputId) {
            const input = document.getElementById(inputId);
            const eyeIcon = document.getElementById(inputId + 'Eye');

            if (input.type === 'password') {
                input.type = 'text';
                eyeIcon.className = 'fas fa-eye-slash';
            } else {
                input.type = 'password';
                eyeIcon.className = 'fas fa-eye';
            }
        }

        // Notification system
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 z-50 px-6 py-4 rounded-lg shadow-lg transform translate-x-full transition-transform duration-300 ${type === 'success' ? 'bg-tv-green text-white' :
                type === 'error' ? 'bg-tv-red text-white' :
                    'bg-tv-blue text-white'
                }`;
            notification.innerHTML = `
                <div class="flex items-center space-x-3">
                    <i class="fas ${type === 'success' ? 'fa-check-circle' :
                    type === 'error' ? 'fa-exclamation-circle' :
                        'fa-info-circle'
                }"></i>
                    <span>${message}</span>
                </div>
            `;

            document.body.appendChild(notification);

            setTimeout(() => notification.classList.remove('translate-x-full'), 100);

            setTimeout(() => {
                notification.classList.add('translate-x-full');
                setTimeout(() => notification.remove(), 300);
            }, 5000);
        }
    </script>
</body>

</html>