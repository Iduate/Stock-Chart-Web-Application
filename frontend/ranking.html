<!DOCTYPE html>
<html lang="ko" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì‹¤ì‹œê°„ ë­í‚¹ - StockChart</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ“ˆ</text></svg>">

    <link rel="stylesheet" href="css/figma-design.css">
    <link rel="stylesheet" href="css/mobile-trading.css">

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body class="home-body">
    <div class="home-desktop desktop-only">
        <header class="dashboard-top-bar">
            <div class="top-brand">
                <div class="brand-icon">
                    <i class="fas fa-trophy"></i>
                </div>
                <div>
                    <p class="brand-eyebrow">ì‹¤ì‹œê°„ ìˆ˜ìµë¥  ë³´ë“œ</p>
                    <h1 class="brand-title">ë­í‚¹ ëŒ€ì‹œë³´ë“œ</h1>
                </div>
            </div>

            <nav class="top-nav-links">
                <a href="/" class="top-nav-link">
                    <i class="fas fa-home"></i>
                    <span>í™ˆ</span>
                </a>
                <a href="charts.html" class="top-nav-link">
                    <i class="fas fa-chart-area"></i>
                    <span>ì°¨íŠ¸</span>
                </a>
                <a href="prediction.html" class="top-nav-link">
                    <i class="fas fa-magic"></i>
                    <span>ì˜ˆì¸¡í•˜ê¸°</span>
                </a>
                <a href="my-predictions.html" class="top-nav-link">
                    <i class="fas fa-user-chart"></i>
                    <span>ë‚´ ì˜ˆì¸¡</span>
                </a>
                <a href="ranking.html" class="top-nav-link active">
                    <i class="fas fa-trophy"></i>
                    <span>ë­í‚¹</span>
                </a>
                <a href="events.html" class="top-nav-link">
                    <i class="fas fa-calendar-star"></i>
                    <span>ì´ë²¤íŠ¸</span>
                </a>
            </nav>

            <div class="top-actions">
                <div class="search-input-wrap">
                    <i class="fas fa-search"></i>
                    <input id="rankingSearch" class="search-input" type="search" placeholder="ì‚¬ìš©ì ë˜ëŠ” ì „ëµ ê²€ìƒ‰">
                </div>
                <button id="downloadRankingBtn" class="ghost-btn">
                    <i class="fas fa-download"></i>
                    ë°ì´í„° ë‚´ë³´ë‚´ê¸°
                </button>
                <button id="joinRankingBtn" class="primary-btn">
                    <i class="fas fa-flag-checkered"></i>
                    ë­í‚¹ ì°¸ê°€í•˜ê¸°
                </button>
            </div>
        </header>

        <section class="home-dashboard ranking-dashboard">
            <div class="home-metrics" id="rankingStats"></div>

            <div class="home-main-grid ranking-layout">
                <div class="ranking-primary">
                    <div class="card-heading">
                        <div>
                            <h2>ë¦¬ë”ë³´ë“œ</h2>
                            <p>ê²€ì¦ëœ ì‹¤ì ì„ ê¸°ì¤€ìœ¼ë¡œ ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ ë©ë‹ˆë‹¤.</p>
                        </div>
                        <div class="ranking-tabs" id="timeframeTabs"></div>
                    </div>

                    <div class="home-prediction-board ranking-highlight">
                        <div class="board-header">
                            <div>
                                <h3>í•˜ì´ë¼ì´íŠ¸</h3>
                                <span>ìµœê·¼ ì„±ê³¼ ê¸°ì¤€ Top 3</span>
                            </div>
                            <button id="compareStrategiesBtn" class="board-action">ì „ëµ ë¹„êµ</button>
                        </div>
                        <table class="board-table" id="leaderHighlights"></table>
                    </div>

                    <div class="predictions-table-card ranking-table-card">
                        <div class="card-toolbar">
                            <div class="filter-group">
                                <label for="rankingTierFilter">í‹°ì–´</label>
                                <select id="rankingTierFilter" class="filter-select">
                                    <option value="all">ì „ì²´</option>
                                    <option value="ì±Œë¦°ì €">ì±Œë¦°ì €</option>
                                    <option value="íƒ€ì´íƒ„">íƒ€ì´íƒ„</option>
                                    <option value="í”„ë¡œ">í”„ë¡œ</option>
                                    <option value="ë£¨í‚¤">ë£¨í‚¤</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label for="rankingSort">ì •ë ¬</label>
                                <select id="rankingSort" class="filter-select">
                                    <option value="return">ìˆ˜ìµë¥ </option>
                                    <option value="winrate">ìŠ¹ë¥ </option>
                                    <option value="streak">ì—°ì† ì„±ê³µ</option>
                                    <option value="profit">ì´ ìˆ˜ìµ</option>
                                </select>
                            </div>
                        </div>
                        <div class="predictions-table-wrapper">
                            <table class="predictions-table rankings-table">
                                <thead>
                                    <tr>
                                        <th>ìˆœìœ„</th>
                                        <th>ì‚¬ìš©ì</th>
                                        <th>ìˆ˜ìµë¥ </th>
                                        <th>ê±°ë˜ ìˆ˜</th>
                                        <th>ìŠ¹ë¥ </th>
                                        <th>ì´ ìˆ˜ìµ</th>
                                        <th>ì—°ì† ì„±ê³µ</th>
                                        <th>ë™ì‘</th>
                                    </tr>
                                </thead>
                                <tbody id="rankingTableBody"></tbody>
                            </table>
                            <div id="rankingEmpty" class="predictions-empty hidden">
                                <div class="empty-icon"><i class="fas fa-user-slash"></i></div>
                                <h3>ì¡°ê±´ì— ë§ëŠ” ë­ì»¤ê°€ ì—†ìŠµë‹ˆë‹¤</h3>
                                <p>í•„í„°ë¥¼ ë¦¬ì…‹í•˜ê±°ë‚˜ ë‹¤ë¥¸ ê¸°ê°„ì„ ì„ íƒí•´ë³´ì„¸ìš”.</p>
                                <button id="resetFiltersBtn" class="ghost-btn">
                                    <i class="fas fa-arrow-rotate-left"></i>
                                    í•„í„° ì´ˆê¸°í™”
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="home-news-card ranking-insights">
                        <div class="board-header">
                            <div>
                                <h3>ì „ëµ ì¸ì‚¬ì´íŠ¸</h3>
                                <span>ì„ íƒëœ ê¸°ê°„ ê¸°ì¤€ ì „ëµ ìš”ì•½</span>
                            </div>
                            <button id="refreshInsightsBtn" class="board-action">ìƒˆë¡œê³ ì¹¨</button>
                        </div>
                        <ul class="news-list" id="insightsList"></ul>
                    </div>
                </div>

                <aside class="ranking-sidebar">
                    <div class="sidebar-card">
                        <div class="card-heading">
                            <div>
                                <h3>ë‚´ í˜„ì¬ ì„±ê³¼</h3>
                                <p>ì˜¤ëŠ˜ ì˜¤ì „ 9ì‹œ ê¸°ì¤€</p>
                            </div>
                            <button id="viewDashboardBtn" class="ghost-btn small">ëŒ€ì‹œë³´ë“œ</button>
                        </div>
                        <div id="profileStats" class="my-events"></div>
                    </div>

                    <div class="sidebar-card">
                        <div class="card-heading">
                            <div>
                                <h3>ë‹¤ê°€ì˜¤ëŠ” ëŒ€íšŒ</h3>
                                <p>ì¶”ì²œ ì°¸ê°€ ì¼ì •</p>
                            </div>
                            <button id="openEventsBtn" class="ghost-btn small">ì „ì²´ ë³´ê¸°</button>
                        </div>
                        <div id="upcomingTournaments" class="my-events"></div>
                    </div>

                    <div class="sidebar-card">
                        <div class="card-heading">
                            <div>
                                <h3>ì „ëµ ì œì•ˆ</h3>
                                <p>ì‹¤ì‹œê°„ ë³€ë™ì„±ì— ê¸°ë°˜í•œ Tip</p>
                            </div>
                        </div>
                        <ul id="strategySuggestions" class="news-list"></ul>
                    </div>
                </aside>
            </div>
        </section>
    </div>

    <!-- Secondary insights (desktop) -->
    <section class="charts-secondary-section desktop-only">
        <div class="charts-secondary-grid">
            <div class="chart-mini-card">
                <div class="mini-card-header"><span>BTC / USD</span><strong>$43,234</strong></div>
                <div class="mini-chart-canvas" id="rankMiniChartBTC"></div>
            </div>
            <div class="chart-mini-card">
                <div class="mini-card-header"><span>ETH / USD</span><strong>$2,687</strong></div>
                <div class="mini-chart-canvas" id="rankMiniChartETH"></div>
            </div>
            <div class="chart-mini-card">
                <div class="mini-card-header"><span>AAPL</span><strong>$178.24</strong></div>
                <div class="mini-chart-canvas" id="rankMiniChartAAPL"></div>
            </div>
            <div class="chart-mini-card">
                <div class="mini-card-header"><span>TSLA</span><strong>$251.89</strong></div>
                <div class="mini-chart-canvas" id="rankMiniChartTSLA"></div>
            </div>
            <div class="movers-card">
                <div class="card-heading">
                    <div>
                        <h3>ì „ëµ Top Movers</h3>
                        <p>ë³€ë™ì´ í° ì „ëµ/ì¢…ëª© ìš”ì•½</p>
                    </div>
                </div>
                <div class="movers-list">
                    <div class="mover-row positive"><div class="mover-symbol"><i class="fab fa-bitcoin"></i><span>BTC</span></div><div class="mover-values"><span class="price">$43,480</span><span class="change">+3.12%</span></div></div>
                    <div class="mover-row positive"><div class="mover-symbol"><i class="fab fa-ethereum"></i><span>ETH</span></div><div class="mover-values"><span class="price">$2,704</span><span class="change">+2.18%</span></div></div>
                    <div class="mover-row negative"><div class="mover-symbol"><i class="fas fa-apple-alt"></i><span>AAPL</span></div><div class="mover-values"><span class="price">$176.90</span><span class="change">-0.76%</span></div></div>
                    <div class="mover-row positive"><div class="mover-symbol"><i class="fas fa-microchip"></i><span>NVDA</span></div><div class="mover-values"><span class="price">$421.67</span><span class="change">+1.34%</span></div></div>
                </div>
            </div>
        </div>
    </section>

    <section class="ranking-mobile mobile-only">
        <div class="mobile-hero-card mobile-fade-in">
            <div class="mobile-hero-top">
                <div>
                    <span class="mobile-hero-subtitle" id="mobileFilterLabel">ë­í‚¹ ë³´ë“œ</span>
                    <span class="mobile-hero-title" id="mobileLeaderName">ë­ì»¤ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘</span>
                </div>
                <button class="mobile-notification-btn" id="mobileJoinRankingBtn" aria-label="ë­í‚¹ ì°¸ê°€">
                    <i class="fas fa-flag-checkered"></i>
                </button>
            </div>
            <div class="mobile-hero-balance">
                <span class="label">ìˆ˜ìµë¥ </span>
                <span class="value" id="mobileLeaderReturn">+0.0%</span>
            </div>
            <div class="mobile-hero-card-info">
                <div>
                    <span class="mobile-card-label">ìŠ¹ë¥ </span>
                    <span class="mobile-card-value" id="mobileLeaderWinRate">0%</span>
                </div>
                <div class="mobile-card-change" id="mobileLeaderTier">í‹°ì–´ ì •ë³´ ì—†ìŒ</div>
            </div>
            <div class="mobile-hero-card-meta">
                <span id="mobileLeaderStreak">ì—°ì† 0ìŠ¹</span>
                <span class="mobile-card-chip"></span>
            </div>
        </div>

        <div class="mobile-filter-grid mobile-fade-in" id="mobileFilterChips"></div>

        <div class="mobile-stats-grid mobile-fade-in">
            <div class="mobile-stat-card">
                <div class="mobile-stat-label">ì°¸ê°€ì ìˆ˜</div>
                <div class="mobile-stat-value" id="mobileStatParticipants">0</div>
                <div class="mobile-stat-change">ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸</div>
            </div>
            <div class="mobile-stat-card">
                <div class="mobile-stat-label">ìµœê³  ìˆ˜ìµë¥ </div>
                <div class="mobile-stat-value" id="mobileStatTopReturn">+0.0%</div>
                <div class="mobile-stat-change positive" id="mobileStatTopUser">-</div>
            </div>
            <div class="mobile-stat-card">
                <div class="mobile-stat-label">í‰ê·  ìˆ˜ìµë¥ </div>
                <div class="mobile-stat-value" id="mobileStatAvgReturn">0.0%</div>
                <div class="mobile-stat-change" id="mobileStatWinRate">ìŠ¹ë¥  0%</div>
            </div>
            <div class="mobile-stat-card">
                <div class="mobile-stat-label">ìµœê³  ì—°ì† ì„±ê³µ</div>
                <div class="mobile-stat-value" id="mobileStatBestStreak">0</div>
                <div class="mobile-stat-change">ì—°ìŠ¹ ê¸°ë¡</div>
            </div>
        </div>

        <div class="mobile-card mobile-fade-in">
            <div class="mobile-card-header">
                <div>
                    <h3 class="mobile-card-title">Top ë­ì»¤</h3>
                    <span class="mobile-card-subtitle" id="mobileLeaderboardSubtitle">ìƒìœ„ 5ëª… ì‹¤ì‹œê°„</span>
                </div>
            </div>
            <div class="mobile-history-list" id="mobileLeaderboardList"></div>
        </div>

        <div class="mobile-card mobile-fade-in">
            <div class="mobile-card-header">
                <div>
                    <h3 class="mobile-card-title">ì „ëµ ì¸ì‚¬ì´íŠ¸</h3>
                    <span class="mobile-card-subtitle" id="mobileInsightsSubtitle">ê¸°ê°„ë³„ ìš”ì•½</span>
                </div>
                <button class="mobile-card-action" id="mobileRefreshInsightsBtn">ìƒˆë¡œê³ ì¹¨</button>
            </div>
            <ul class="mobile-news-list" id="mobileInsightsList"></ul>
        </div>

        <div class="mobile-card mobile-fade-in">
            <div class="mobile-card-header">
                <div>
                    <h3 class="mobile-card-title">ë‹¤ê°€ì˜¤ëŠ” ëŒ€íšŒ</h3>
                    <span class="mobile-card-subtitle">ì°¸ê°€ ì¶”ì²œ ì¼ì •</span>
                </div>
                <button class="mobile-card-action" id="mobileOpenEventsBtn">ì „ì²´ ë³´ê¸°</button>
            </div>
            <div class="mobile-history-list" id="mobileTournamentsList"></div>
        </div>
    </section>

    <nav class="mobile-bottom-nav mobile-only" aria-label="ëª¨ë°”ì¼ í•˜ë‹¨ íƒìƒ‰">
        <a href="/" class="mobile-nav-item" title="í™ˆ">
            <i class="fas fa-home" aria-hidden="true"></i>
            <span>í™ˆ</span>
        </a>
        <a href="charts.html" class="mobile-nav-item" title="ì°¨íŠ¸">
            <i class="fas fa-chart-area" aria-hidden="true"></i>
            <span>ì°¨íŠ¸</span>
        </a>
        <a href="prediction.html" class="mobile-nav-item" title="ì˜ˆì¸¡">
            <i class="fas fa-magic" aria-hidden="true"></i>
            <span>ì˜ˆì¸¡</span>
        </a>
        <a href="ranking.html" class="mobile-nav-item active" title="ë­í‚¹" aria-current="page">
            <i class="fas fa-trophy" aria-hidden="true"></i>
            <span>ë­í‚¹</span>
        </a>
        <a href="events.html" class="mobile-nav-item" title="ì´ë²¤íŠ¸">
            <i class="fas fa-calendar-star" aria-hidden="true"></i>
            <span>ì´ë²¤íŠ¸</span>
        </a>
    </nav>

    <script>
        (function initRankMiniCharts(){
            if (typeof LightweightCharts === 'undefined') return;
            const ids = ['rankMiniChartBTC','rankMiniChartETH','rankMiniChartAAPL','rankMiniChartTSLA'];
            const bases = [43000, 2680, 178, 252];
            const colors = ['#00FFA3','#5BD5FF','#8CE99A','#FFD166'];
            const charts=[];
            function gen(base){
                const now = Math.floor(Date.now()/1000);
                return Array.from({length:40},(_,i)=>({time:now-(40-i)*3600,value:base+Math.sin(i/3)*base*0.005+(Math.random()-0.5)*base*0.002}));
            }
            ids.forEach((id,idx)=>{
                const el=document.getElementById(id); if(!el) return;
                const chart=LightweightCharts.createChart(el,{width:el.clientWidth,height:140,layout:{background:{type:'solid',color:'transparent'},textColor:'#cfe6ff'},grid:{vertLines:{color:'rgba(255,255,255,0.06)'},horzLines:{color:'rgba(255,255,255,0.06)'}},rightPriceScale:{visible:false},timeScale:{borderColor:'rgba(255,255,255,0.06)'}});
                const series=chart.addAreaSeries({lineColor:colors[idx],topColor:colors[idx]+'44',bottomColor:colors[idx]+'11'});
                series.setData(gen(bases[idx]));
                chart.timeScale().fitContent();
                charts.push({chart,el});
            });
            window.addEventListener('resize',()=>charts.forEach(({chart,el})=>chart.applyOptions({width:el.clientWidth})));
        })();
    </script>

    <div id="rankingToast" class="home-toast"></div>

    <script>
        const rankingState = {
            currentFilter: 'daily',
            tierFilter: 'all',
            searchTerm: '',
            sortKey: 'return',
            filters: [
                { id: 'daily', label: 'ì¼ê°„', description: '24ì‹œê°„ ì‹¤ì ' },
                { id: 'weekly', label: 'ì£¼ê°„', description: 'ìµœê·¼ 7ì¼' },
                { id: 'monthly', label: 'ì›”ê°„', description: 'ìµœê·¼ 30ì¼' },
                { id: 'yearly', label: 'ì—°ê°„', description: 'ìµœê·¼ 365ì¼' }
            ],
            entries: [
                { id: 'd-1', username: 'íˆ¬ìì™•123', avatar: 'íˆ¬', tier: 'ì±Œë¦°ì €', timeframe: 'daily', returnRate: 24.7, trades: 127, winRate: 87.4, profit: 4250000, streak: 8 },
                { id: 'd-2', username: 'ì£¼ì‹ë§ˆìŠ¤í„°', avatar: 'ì£¼', tier: 'íƒ€ì´íƒ„', timeframe: 'daily', returnRate: 19.3, trades: 95, winRate: 82.1, profit: 3180000, streak: 6 },
                { id: 'd-3', username: 'ì „ëµì˜ˆì¸¡ëŸ¬', avatar: 'ì „', tier: 'í”„ë¡œ', timeframe: 'daily', returnRate: 15.8, trades: 78, winRate: 79.5, profit: 2650000, streak: 5 },
                { id: 'd-4', username: 'ì°¨íŠ¸ë¶„ì„ê°€', avatar: 'ì°¨', tier: 'í”„ë¡œ', timeframe: 'daily', returnRate: 12.1, trades: 65, winRate: 75.4, profit: 1980000, streak: 4 },
                { id: 'd-5', username: 'ë°ì´íŠ¸ë ˆì´ë”', avatar: 'ë°', tier: 'í”„ë¡œ', timeframe: 'daily', returnRate: 9.4, trades: 156, winRate: 71.2, profit: 1540000, streak: 3 },
                { id: 'w-1', username: 'ìŠ¤ìœ™í‚¹', avatar: 'ìŠ¤', tier: 'ì±Œë¦°ì €', timeframe: 'weekly', returnRate: 32.5, trades: 42, winRate: 68.2, profit: 3120000, streak: 5 },
                { id: 'w-2', username: 'í¬ì§€ì…˜í—Œí„°', avatar: 'í¬', tier: 'íƒ€ì´íƒ„', timeframe: 'weekly', returnRate: 27.1, trades: 53, winRate: 73.4, profit: 2860000, streak: 4 },
                { id: 'm-1', username: 'í€€íŠ¸ë§ˆìŠ¤í„°', avatar: 'í€€', tier: 'ì±Œë¦°ì €', timeframe: 'monthly', returnRate: 58.9, trades: 118, winRate: 69.5, profit: 8450000, streak: 9 },
                { id: 'm-2', username: 'ë¦¬ìŠ¤í¬ì œë¡œ', avatar: 'ë¦¬', tier: 'íƒ€ì´íƒ„', timeframe: 'monthly', returnRate: 41.2, trades: 102, winRate: 75.2, profit: 6230000, streak: 7 },
                { id: 'y-1', username: 'ë¡±ëŸ°ì „ëµê°€', avatar: 'ë¡±', tier: 'ì±Œë¦°ì €', timeframe: 'yearly', returnRate: 128.4, trades: 520, winRate: 64.1, profit: 18500000, streak: 12 },
                { id: 'y-2', username: 'í•˜ì´ë¸Œë¦¬ë“œì „ëµ', avatar: 'í•˜', tier: 'í”„ë¡œ', timeframe: 'yearly', returnRate: 112.8, trades: 447, winRate: 66.9, profit: 16200000, streak: 10 },
                { id: 'w-3', username: 'êµ­ë‚´ì£¼ì‹ëŸ¬', avatar: 'êµ­', tier: 'ë£¨í‚¤', timeframe: 'weekly', returnRate: 18.6, trades: 24, winRate: 62.3, profit: 930000, streak: 2 }
            ],
            insights: {
                daily: [
                    'ì¼ê°„ ì±Œë¦°ì € í‹°ì–´ í‰ê·  ìˆ˜ìµë¥ ì€ +18.6%ë¡œ ì „ì¼ ëŒ€ë¹„ 2.1% ìƒìŠ¹í–ˆìŠµë‹ˆë‹¤.',
                    'ìë™í™” ì „ëµ ì±„íƒ ë¹„ìœ¨ì´ 63%ë¥¼ ëŒíŒŒí•˜ë©° ìƒìŠ¹ì¥ ëŒ€ì‘ë ¥ì´ í–¥ìƒë˜ì—ˆìŠµë‹ˆë‹¤.',
                    'ê°€ì¥ ê¸´ ì—°ì† ì„±ê³µì€ 8íšŒë¡œ, ë³€ë™ì„± ì¥ì„¸ì—ì„œ ì§§ì€ í™€ë”© ì „ëµì´ íš¨ê³¼ì ì´ì—ˆìŠµë‹ˆë‹¤.'
                ],
                weekly: [
                    'ì£¼ê°„ ìƒìœ„ê¶Œì€ í‰ê·  32% ì´ìƒì˜ ìˆ˜ìµë¥ ì„ ê¸°ë¡í•˜ë©° ë³€ë™ì„± í”Œë ˆì´ì— ê°•ì ì„ ë³´ì˜€ìŠµë‹ˆë‹¤.',
                    'ìŠ¤ìœ™ ì „ëµê³¼ ë³´ì¡° ì‹œê·¸ë„ì„ ê²°í•©í•œ ìœ ì €ì˜ ìŠ¹ë¥ ì´ 70%ë¥¼ ë„˜ì—ˆìŠµë‹ˆë‹¤.',
                    'ì†ì‹¤ ì œí•œì„ 4% ì´ë‚´ë¡œ ì„¤ì •í•œ ì°¸ê°€ìê°€ í‰ê· ë³´ë‹¤ 1.6ë°° ë†’ì€ ìŠ¹ë¥ ì„ ê¸°ë¡í–ˆìŠµë‹ˆë‹¤.'
                ],
                monthly: [
                    'ì›”ê°„ Top3ì˜ í‰ê·  ì—°ì† ì„±ê³µ ìˆ˜ëŠ” 8.7íšŒë¡œ ì¥ê¸° ì¶”ì„¸ ì¶”ì¢… ì „ëµì´ ë‹ë³´ì…ë‹ˆë‹¤.',
                    'í€€íŠ¸ ê¸°ë°˜ í¬íŠ¸í´ë¦¬ì˜¤ ì¡°ì • ë¹ˆë„ê°€ ë‚®ì„ìˆ˜ë¡ ëˆ„ì  ìˆ˜ìµì´ ë†’ê²Œ ë‚˜íƒ€ë‚¬ìŠµë‹ˆë‹¤.',
                    'ìë™ ë§¤ë§¤ ì‹œê·¸ë„ ì‹ ë¢°ë„(45ì¼ ê¸°ì¤€)ê°€ 92%ë¡œ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤.'
                ],
                yearly: [
                    'ì—°ê°„ ê¸°ì¤€ ëˆ„ì  ìˆ˜ìµ 1ì–µì› ì´ìƒ ì°¸ê°€ìê°€ 12ëª…ìœ¼ë¡œ ì‚¬ìƒ ìµœëŒ€ì¹˜ë¥¼ ê¸°ë¡í–ˆìŠµë‹ˆë‹¤.',
                    'ë¡±ëŸ°ì „ëµê°€ëŠ” ë³€ë™ì„± 25% êµ¬ê°„ì—ì„œë„ 12ì—°ìŠ¹ì„ ìœ ì§€í–ˆìŠµë‹ˆë‹¤.',
                    'ë¦¬ìŠ¤í¬ ì¡°ì • ìˆ˜ìµë¥ (Sharpe) 2.1 ì´ìƒ ì „ëµ ë¹„ì¤‘ì´ 34%ê¹Œì§€ í™•ëŒ€ë˜ì—ˆìŠµë‹ˆë‹¤.'
                ]
            },
            myProfile: {
                rank: 47,
                returnRate: 5.2,
                winRate: 65.2,
                streak: 3,
                bestTimeframe: 'ì£¼ê°„',
                target: 'Top 20 ì§„ì…',
                strategy: 'ìƒìŠ¹ ì „ëµ ìœ ì§€'
            },
            upcoming: [
                { title: 'ì£¼ê°„ ì˜ˆì¸¡ ìŠ¤í”„ë¦°íŠ¸', date: '10ì›” 12ì¼', reward: 'â‚©500,000', status: 'ì ‘ìˆ˜ ì¤‘' },
                { title: 'í•˜ì´ë¸Œë¦¬ë“œ ì „ëµ ì±Œë¦°ì§€', date: '10ì›” 25ì¼', reward: 'í”„ë¦¬ë¯¸ì—„ 2ê°œì›”', status: 'ëŒ€ê¸° ì¤‘' },
                { title: 'ì—°ë§ ê²°ì‚° ë¹…ë°°í‹€', date: '11ì›” 02ì¼', reward: 'ì´ ìƒê¸ˆ â‚©10,000,000', status: 'ì‚¬ì „ ì˜ˆì•½' }
            ],
            strategies: [
                { title: 'ì „ëµ ì¶”ì„¸ ì¶”ì¢…', meta: 'ì •í™•ë„ 92% Â· ì¶”ì²œ', tone: 'positive' },
                { title: 'ë³€ë™ì„± ë°•ìŠ¤ ë§¤ë§¤', meta: 'ì¥ ì´ˆë°˜ ìŠ¤ìº˜í•‘ ê°•í™”', tone: 'neutral' },
                { title: 'ë¦¬ìŠ¤í¬ í—¤ì§€ í”Œëœ', meta: 'í¬íŠ¸í´ë¦¬ì˜¤ ë°©ì–´ ì¶”ì²œ', tone: 'info' }
            ]
        };

        document.addEventListener('DOMContentLoaded', () => {
            renderFilters();
            renderMobileFilters();
            renderStats();
            renderLeaderboard();
            renderTable();
            renderInsights();
            renderProfile();
            renderUpcoming();
            renderStrategies();
            renderMobileRanking();
            attachRankingHandlers();
        });

        function renderFilters() {
            const container = document.getElementById('timeframeTabs');
            container.innerHTML = rankingState.filters.map(filter => `
                <button class="ghost-btn small ${filter.id === rankingState.currentFilter ? 'active' : ''}" data-filter="${filter.id}">
                    ${filter.label}
                </button>
            `).join('');
        }

        function renderMobileFilters() {
            const chips = document.getElementById('mobileFilterChips');
            if (!chips) return;

            chips.innerHTML = rankingState.filters.map(filter => `
                <button type="button" class="mobile-filter-chip ${filter.id === rankingState.currentFilter ? 'active' : ''}" data-mobile-filter="${filter.id}">
                    ${filter.label}
                </button>
            `).join('');
        }

        function renderStats() {
            const statsContainer = document.getElementById('rankingStats');
            const entries = getFilteredEntries();

            if (entries.length === 0) {
                statsContainer.innerHTML = `
                    <div class="metric-card primary">
                        <div class="metric-label">ì°¸ê°€ì ìˆ˜</div>
                        <div class="metric-value">0</div>
                        <div class="metric-change info">ë°ì´í„° ì—†ìŒ</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">í‰ê·  ìˆ˜ìµë¥ </div>
                        <div class="metric-value">0%</div>
                        <div class="metric-sub">ìƒˆë¡œìš´ ì°¸ê°€ìë¥¼ ê¸°ë‹¤ë¦¬ëŠ” ì¤‘</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">ìµœê³  ì—°ì† ì„±ê³µ</div>
                        <div class="metric-value">0</div>
                        <div class="metric-sub">ì„±ê³¼ ë°ì´í„° ì—†ìŒ</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">ë¶„ì„ ì‹ ë¢°ë„</div>
                        <div class="metric-value">92%</div>
                        <div class="metric-sub">ê¸°ë³¸ ëª¨ë¸ ê¸°ì¤€</div>
                    </div>
                `;
                return;
            }

            const totalParticipants = entries.length;
            const topReturn = entries[0].returnRate;
            const avgReturn = entries.reduce((sum, item) => sum + item.returnRate, 0) / entries.length;
            const avgWinRate = entries.reduce((sum, item) => sum + item.winRate, 0) / entries.length;
            const bestStreak = Math.max(...entries.map(item => item.streak));

            statsContainer.innerHTML = `
                <div class="metric-card primary">
                    <div class="metric-label">ì°¸ê°€ì ìˆ˜</div>
                    <div class="metric-value">${totalParticipants}</div>
                    <div class="metric-change positive">ì‹¤ì‹œê°„ ë™ê¸°í™”</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">ìµœê³  ìˆ˜ìµë¥ </div>
                    <div class="metric-value positive-text">+${topReturn.toFixed(1)}%</div>
                    <div class="metric-sub">${getFilterLabel()} ê¸°ì¤€</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">í‰ê·  ìˆ˜ìµë¥ </div>
                    <div class="metric-value">${avgReturn.toFixed(1)}%</div>
                    <div class="metric-sub">ìŠ¹ë¥  ${avgWinRate.toFixed(1)}%</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">ì—°ì† ì„±ê³µ</div>
                    <div class="metric-value">${bestStreak}</div>
                    <div class="metric-sub">ìµœê³  ì—°ìŠ¹ ê¸°ë¡</div>
                </div>
            `;
        }

        function renderLeaderboard() {
            const highlights = document.getElementById('leaderHighlights');
            const entries = getFilteredEntries().slice(0, 3);

            if (!entries.length) {
                highlights.innerHTML = `
                    <tbody>
                        <tr>
                            <td colspan="4">í‘œì‹œí•  ë¦¬ë”ê°€ ì—†ìŠµë‹ˆë‹¤.</td>
                        </tr>
                    </tbody>
                `;
                return;
            }

            highlights.innerHTML = `
                <thead>
                    <tr>
                        <th>ìˆœìœ„</th>
                        <th>ì‚¬ìš©ì</th>
                        <th>ìˆ˜ìµë¥ </th>
                        <th>ì—°ì† ì„±ê³µ</th>
                    </tr>
                </thead>
                <tbody>
                    ${entries.map((item, index) => `
                        <tr>
                            <td><span class="rank ${index === 0 ? 'gold' : index === 1 ? 'silver' : 'bronze'}">${index + 1}</span></td>
                            <td>
                                <div class="board-user">
                                    <span class="avatar">${item.avatar}</span>
                                    <div>
                                        <span class="board-name">${item.username}</span>
                                        <span class="board-meta">${item.tier}</span>
                                    </div>
                                </div>
                            </td>
                            <td class="positive">+${item.returnRate.toFixed(1)}%</td>
                            <td>${item.streak}íšŒ</td>
                        </tr>
                    `).join('')}
                </tbody>
            `;
        }

        function renderTable() {
            const tableBody = document.getElementById('rankingTableBody');
            const emptyState = document.getElementById('rankingEmpty');
            const entries = getFilteredEntries(true);

            if (!entries.length) {
                tableBody.innerHTML = '';
                emptyState.classList.remove('hidden');
                return;
            }

            emptyState.classList.add('hidden');
            tableBody.innerHTML = entries.map((item, index) => `
                <tr>
                    <td><span class="symbol-tag">${index + 1}</span></td>
                    <td>
                        <div class="table-symbol">
                            <span class="symbol-tag">${item.avatar}</span>
                            <div class="table-col">
                                <strong>${item.username}</strong>
                                <span class="subtext">${item.tier}</span>
                            </div>
                        </div>
                    </td>
                    <td class="numeric positive-text">+${item.returnRate.toFixed(1)}%</td>
                    <td class="numeric">${item.trades}</td>
                    <td class="numeric">${item.winRate.toFixed(1)}%</td>
                    <td class="numeric positive-text">${formatCurrency(item.profit)}</td>
                    <td class="numeric">${item.streak}íšŒ</td>
                    <td>
                        <div class="table-actions">
                            <button class="ghost-btn small" data-action="inspect" data-id="${item.id}">ë¶„ì„</button>
                        </div>
                    </td>
                </tr>
            `).join('');
        }

        function renderInsights() {
            const list = document.getElementById('insightsList');
            const insights = rankingState.insights[rankingState.currentFilter] || [];
            list.innerHTML = insights.map(text => `
                <li>
                    <span class="news-title">${text}</span>
                    <span class="news-meta">ì „ëµ ë¶„ì„</span>
                </li>
            `).join('');
        }

        function renderProfile() {
            const container = document.getElementById('profileStats');
            const profile = rankingState.myProfile;
            container.innerHTML = `
                <div class="my-event-item primary">
                    <div>
                        <h4>í˜„ì¬ ìˆœìœ„</h4>
                        <span>${profile.rank}ìœ„</span>
                    </div>
                    <div class="my-event-stats">
                        <span class="rank">${profile.strategy}</span>
                        <span class="return positive">ëª©í‘œ ${profile.target}</span>
                    </div>
                </div>
                <div class="my-event-item">
                    <div>
                        <h4>ì¼ê°„ ìˆ˜ìµë¥ </h4>
                        <span>ìŠ¹ë¥  ${profile.winRate.toFixed(1)}%</span>
                    </div>
                    <div class="my-event-stats">
                        <span class="return positive">+${profile.returnRate.toFixed(1)}%</span>
                        <span class="rank">ì—°ì† ${profile.streak}íšŒ</span>
                    </div>
                </div>
                <div class="my-event-item">
                    <div>
                        <h4>ê°•ì  êµ¬ê°„</h4>
                        <span>${profile.bestTimeframe} ì„±ê³¼ ìš°ìˆ˜</span>
                    </div>
                    <div class="my-event-stats">
                        <button class="ghost-btn tiny" id="improvePlanBtn">í–¥ìƒ í”Œëœ</button>
                    </div>
                </div>
            `;
        }

        function renderUpcoming() {
            const container = document.getElementById('upcomingTournaments');
            container.innerHTML = rankingState.upcoming.map(item => `
                <div class="my-event-item">
                    <div>
                        <h4>${item.title}</h4>
                        <span>${item.date} Â· ${item.status}</span>
                    </div>
                    <div class="my-event-stats">
                        <span class="return positive">${item.reward}</span>
                        <button class="ghost-btn tiny" data-action="join-event" data-title="${item.title}">ì°¸ê°€</button>
                    </div>
                </div>
            `).join('');
        }

        function renderStrategies() {
            const list = document.getElementById('strategySuggestions');
            list.innerHTML = rankingState.strategies.map(item => `
                <li class="news-item ${item.tone}">
                    <div>
                        <span class="news-title">${item.title}</span>
                        <span class="news-meta">${item.meta}</span>
                    </div>
                    <button class="ghost-btn tiny" data-action="strategy">ìƒì„¸</button>
                </li>
            `).join('');
        }

        function renderMobileRanking() {
            const heroName = document.getElementById('mobileLeaderName');
            if (!heroName) return;

            const entries = getFilteredEntries(true);
            const filterLabel = getFilterLabel();

            const filterLabelEl = document.getElementById('mobileFilterLabel');
            if (filterLabelEl) {
                filterLabelEl.textContent = filterLabel ? `${filterLabel} ë¦¬ë”ë³´ë“œ` : 'ë­í‚¹ ë³´ë“œ';
            }

            const heroReturnEl = document.getElementById('mobileLeaderReturn');
            const heroWinRateEl = document.getElementById('mobileLeaderWinRate');
            const heroTierEl = document.getElementById('mobileLeaderTier');
            const heroStreakEl = document.getElementById('mobileLeaderStreak');

            if (!entries.length) {
                heroName.textContent = 'í‘œì‹œí•  ë­ì»¤ê°€ ì—†ìŠµë‹ˆë‹¤';
                if (heroReturnEl) heroReturnEl.textContent = '+0.0%';
                if (heroWinRateEl) heroWinRateEl.textContent = '0%';
                if (heroTierEl) {
                    heroTierEl.className = 'mobile-card-change';
                    heroTierEl.textContent = 'í‹°ì–´ ì •ë³´ ì—†ìŒ';
                }
                if (heroStreakEl) heroStreakEl.textContent = 'ì—°ì† 0ìŠ¹';

                updateMobileStats(entries);
                updateMobileLeaderboard(entries);
                updateMobileInsights();
                updateMobileTournaments();
                return;
            }

            const leader = entries[0];
            const formattedReturn = `${leader.returnRate >= 0 ? '+' : ''}${leader.returnRate.toFixed(1)}%`;
            const formattedWinRate = `${leader.winRate.toFixed(1)}%`;

            heroName.textContent = leader.username;
            if (heroReturnEl) heroReturnEl.textContent = formattedReturn;
            if (heroWinRateEl) heroWinRateEl.textContent = formattedWinRate;
            if (heroTierEl) {
                const emphasized = leader.tier === 'ì±Œë¦°ì €' || leader.tier === 'íƒ€ì´íƒ„';
                heroTierEl.className = `mobile-card-change ${emphasized ? 'positive' : ''}`.trim();
                heroTierEl.textContent = leader.tier;
            }
            if (heroStreakEl) heroStreakEl.textContent = `ì—°ì† ${leader.streak}ìŠ¹`;

            updateMobileStats(entries);
            updateMobileLeaderboard(entries);
            updateMobileInsights();
            updateMobileTournaments();
        }

        function updateMobileStats(entries) {
            const participantsEl = document.getElementById('mobileStatParticipants');
            const topReturnEl = document.getElementById('mobileStatTopReturn');
            const topUserEl = document.getElementById('mobileStatTopUser');
            const avgReturnEl = document.getElementById('mobileStatAvgReturn');
            const winRateEl = document.getElementById('mobileStatWinRate');
            const bestStreakEl = document.getElementById('mobileStatBestStreak');

            if (!participantsEl) return;

            if (!entries.length) {
                participantsEl.textContent = '0';
                if (topReturnEl) topReturnEl.textContent = '+0.0%';
                if (topUserEl) topUserEl.textContent = '-';
                if (avgReturnEl) avgReturnEl.textContent = '0.0%';
                if (winRateEl) winRateEl.textContent = 'ìŠ¹ë¥  0%';
                if (bestStreakEl) bestStreakEl.textContent = '0';
                return;
            }

            const participants = entries.length;
            const topEntry = entries[0];
            const avgReturn = entries.reduce((sum, item) => sum + item.returnRate, 0) / entries.length;
            const avgWinRate = entries.reduce((sum, item) => sum + item.winRate, 0) / entries.length;
            const bestStreak = Math.max(...entries.map(item => item.streak));

            participantsEl.textContent = participants.toString();
            if (topReturnEl) topReturnEl.textContent = `${topEntry.returnRate >= 0 ? '+' : ''}${topEntry.returnRate.toFixed(1)}%`;
            if (topUserEl) topUserEl.textContent = topEntry.username;
            if (avgReturnEl) avgReturnEl.textContent = `${avgReturn.toFixed(1)}%`;
            if (winRateEl) winRateEl.textContent = `ìŠ¹ë¥  ${avgWinRate.toFixed(1)}%`;
            if (bestStreakEl) bestStreakEl.textContent = bestStreak.toString();
        }

        function updateMobileLeaderboard(entries) {
            const list = document.getElementById('mobileLeaderboardList');
            if (!list) return;

            if (!entries.length) {
                list.innerHTML = `
                    <div class="mobile-transaction-item">
                        <div class="mobile-list-icon"><i class="fas fa-user-slash"></i></div>
                        <div class="mobile-list-content">
                            <div class="mobile-list-title">ë­í‚¹ ë°ì´í„°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</div>
                            <div class="mobile-transaction-meta">í•„í„°ë¥¼ ì¡°ì •í•˜ê±°ë‚˜ ê¸°ê°„ì„ ë³€ê²½í•´ë³´ì„¸ìš”.</div>
                        </div>
                    </div>
                `;
                return;
            }

            list.innerHTML = entries.slice(0, 5).map((item, index) => `
                <div class="mobile-transaction-item">
                    <div class="mobile-list-icon">${index + 1}</div>
                    <div class="mobile-list-content">
                        <div class="mobile-list-title">${item.username}</div>
                        <div class="mobile-transaction-meta">${item.tier} Â· ìŠ¹ë¥  ${item.winRate.toFixed(1)}% Â· ${item.trades}íšŒ</div>
                    </div>
                    <div class="mobile-list-value ${item.returnRate >= 0 ? 'positive' : 'negative'}">${item.returnRate >= 0 ? '+' : ''}${item.returnRate.toFixed(1)}%</div>
                </div>
            `).join('');

            const subtitle = document.getElementById('mobileLeaderboardSubtitle');
            if (subtitle) {
                const label = getFilterLabel();
                const count = Math.min(entries.length, 5);
                subtitle.textContent = label ? `ìƒìœ„ ${count}ëª… Â· ${label} ê¸°ì¤€` : `ìƒìœ„ ${count}ëª…`;
            }
        }

        function updateMobileInsights() {
            const insightsList = document.getElementById('mobileInsightsList');
            if (!insightsList) return;

            const insights = rankingState.insights[rankingState.currentFilter] || [];
            if (!insights.length) {
                insightsList.innerHTML = `
                    <li>
                        <span class="news-title">í‘œì‹œí•  ì¸ì‚¬ì´íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤.</span>
                        <span class="news-time">ë°ì´í„° ëŒ€ê¸° ì¤‘</span>
                    </li>
                `;
                return;
            }

            insightsList.innerHTML = insights.map((text, index) => `
                <li>
                    <span class="news-title">${text}</span>
                    <span class="news-time">ì¸ì‚¬ì´íŠ¸ ${index + 1}</span>
                </li>
            `).join('');

            const subtitle = document.getElementById('mobileInsightsSubtitle');
            if (subtitle) {
                const label = getFilterLabel();
                subtitle.textContent = label ? `${label} ê¸°ì¤€ ì „ëµ ìš”ì•½` : 'ì „ëµ ìš”ì•½';
            }
        }

        function updateMobileTournaments() {
            const list = document.getElementById('mobileTournamentsList');
            if (!list) return;

            if (!rankingState.upcoming.length) {
                list.innerHTML = `
                    <div class="mobile-transaction-item">
                        <div class="mobile-list-icon"><i class="fas fa-calendar-times"></i></div>
                        <div class="mobile-list-content">
                            <div class="mobile-list-title">ì˜ˆì •ëœ ëŒ€íšŒê°€ ì—†ìŠµë‹ˆë‹¤.</div>
                            <div class="mobile-transaction-meta">ìƒˆë¡œìš´ ì´ë²¤íŠ¸ê°€ ë“±ë¡ë˜ë©´ ì•Œë ¤ë“œë¦´ê²Œìš”.</div>
                        </div>
                    </div>
                `;
                return;
            }

            list.innerHTML = rankingState.upcoming.map(item => `
                <div class="mobile-transaction-item">
                    <div class="mobile-list-icon"><i class="fas fa-trophy"></i></div>
                    <div class="mobile-list-content">
                        <div class="mobile-list-title">${item.title}</div>
                        <div class="mobile-transaction-meta">${item.date} Â· ${item.status}</div>
                    </div>
                    <div class="mobile-list-value positive">${item.reward}</div>
                </div>
            `).join('');
        }

        function attachRankingHandlers() {
            document.getElementById('timeframeTabs').addEventListener('click', event => {
                const button = event.target.closest('button[data-filter]');
                if (!button) return;
                rankingState.currentFilter = button.dataset.filter;
                renderFilters();
                renderMobileFilters();
                refreshRankingView();
                showRankingToast(`${button.textContent.trim()} ë¦¬ë”ë³´ë“œë¡œ ì „í™˜í–ˆìŠµë‹ˆë‹¤.`, 'info');
            });

            const mobileFilterChips = document.getElementById('mobileFilterChips');
            if (mobileFilterChips) {
                mobileFilterChips.addEventListener('click', event => {
                    const chip = event.target.closest('[data-mobile-filter]');
                    if (!chip) return;
                    rankingState.currentFilter = chip.dataset.mobileFilter;
                    renderFilters();
                    renderMobileFilters();
                    refreshRankingView();
                    showRankingToast(`${chip.textContent.trim()} ë¦¬ë”ë³´ë“œë¡œ ì „í™˜í–ˆìŠµë‹ˆë‹¤.`, 'info');
                });
            }

            document.getElementById('rankingTierFilter').addEventListener('change', event => {
                rankingState.tierFilter = event.target.value;
                renderTable();
                renderLeaderboard();
                renderStats();
                renderMobileRanking();
            });

            document.getElementById('rankingSort').addEventListener('change', event => {
                rankingState.sortKey = event.target.value;
                renderTable();
                renderMobileRanking();
            });

            document.getElementById('rankingSearch').addEventListener('keydown', event => {
                if (event.key === 'Enter') {
                    rankingState.searchTerm = event.target.value.trim();
                    renderTable();
                    renderLeaderboard();
                    renderStats();
                    renderMobileRanking();
                    event.target.value = '';
                }
            });

            document.getElementById('rankingTableBody').addEventListener('click', event => {
                const action = event.target.closest('[data-action]');
                if (!action) return;

                if (action.dataset.action === 'inspect') {
                    const entry = rankingState.entries.find(item => item.id === action.dataset.id);
                    if (entry) {
                        showRankingToast(`${entry.username}ë‹˜ì˜ ì „ëµ ë¦¬í¬íŠ¸ë¥¼ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤.`, 'info');
                    }
                }
            });

            document.getElementById('resetFiltersBtn').addEventListener('click', () => {
                rankingState.tierFilter = 'all';
                rankingState.searchTerm = '';
                document.getElementById('rankingTierFilter').value = 'all';
                renderTable();
                renderLeaderboard();
                renderStats();
                renderMobileRanking();
                showRankingToast('í•„í„°ì™€ ê²€ìƒ‰ ì¡°ê±´ì´ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
            });

            document.getElementById('downloadRankingBtn').addEventListener('click', () => {
                showRankingToast('ë­í‚¹ ë°ì´í„°ë¥¼ CSVë¡œ ë‚´ë³´ëƒˆìŠµë‹ˆë‹¤.', 'success');
            });

            document.getElementById('joinRankingBtn').addEventListener('click', () => {
                showRankingToast('ë­í‚¹ ì°¸ê°€ ì‹ ì²­ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. í™”ì´íŒ…!', 'success');
            });

            const mobileJoinBtn = document.getElementById('mobileJoinRankingBtn');
            if (mobileJoinBtn) {
                mobileJoinBtn.addEventListener('click', () => {
                    showRankingToast('ëª¨ë°”ì¼ì—ì„œ ë­í‚¹ ì°¸ê°€ ì‹ ì²­ì„ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤!', 'success');
                });
            }

            const mobileRefreshBtn = document.getElementById('mobileRefreshInsightsBtn');
            if (mobileRefreshBtn) {
                mobileRefreshBtn.addEventListener('click', () => {
                    showRankingToast('ì „ëµ ì¸ì‚¬ì´íŠ¸ë¥¼ ìƒˆë¡œê³ ì¹¨í–ˆìŠµë‹ˆë‹¤.', 'success');
                    updateMobileInsights();
                });
            }

            const mobileEventsBtn = document.getElementById('mobileOpenEventsBtn');
            if (mobileEventsBtn) {
                mobileEventsBtn.addEventListener('click', () => {
                    window.location.href = 'events.html';
                });
            }

            document.getElementById('refreshInsightsBtn').addEventListener('click', () => {
                showRankingToast('ì „ëµ ì¸ì‚¬ì´íŠ¸ê°€ ìµœì‹  ìƒíƒœë¡œ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
                updateMobileInsights();
            });

            document.getElementById('compareStrategiesBtn').addEventListener('click', () => {
                showRankingToast('ì „ëµ ë¹„êµ ëª¨ë“ˆì€ ê³§ ì œê³µë  ì˜ˆì •ì…ë‹ˆë‹¤.', 'info');
            });

            document.getElementById('profileStats').addEventListener('click', event => {
                if (event.target && event.target.id === 'improvePlanBtn') {
                    showRankingToast('í–¥ìƒ í”Œëœì´ ê³§ ê³µê°œë©ë‹ˆë‹¤.', 'info');
                }
            });

            document.getElementById('upcomingTournaments').addEventListener('click', event => {
                const target = event.target.closest('[data-action="join-event"]');
                if (!target) return;
                showRankingToast(`${target.dataset.title} ì°¸ê°€ ë“±ë¡ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.`, 'success');
            });

            document.getElementById('strategySuggestions').addEventListener('click', event => {
                const target = event.target.closest('[data-action="strategy"]');
                if (!target) return;
                showRankingToast('ì „ëµ ì„¸ë¶€ ì„¤ëª…ì€ í”„ë¦¬ë¯¸ì—„ì—ì„œ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.', 'info');
            });

            document.getElementById('viewDashboardBtn').addEventListener('click', () => {
                showRankingToast('ê°œì¸ ëŒ€ì‹œë³´ë“œë¡œ ì´ë™í•©ë‹ˆë‹¤.', 'info');
            });

            document.getElementById('openEventsBtn').addEventListener('click', () => {
                window.location.href = 'events.html';
            });
        }

        function refreshRankingView() {
            renderMobileFilters();
            renderStats();
            renderLeaderboard();
            renderTable();
            renderInsights();
            renderMobileRanking();
        }

        function getFilteredEntries(includeSort = false) {
            const base = rankingState.entries.filter(entry => entry.timeframe === rankingState.currentFilter);
            const tierFiltered = rankingState.tierFilter === 'all'
                ? base
                : base.filter(entry => entry.tier === rankingState.tierFilter);

            const searchFiltered = rankingState.searchTerm
                ? tierFiltered.filter(entry => entry.username.toLowerCase().includes(rankingState.searchTerm.toLowerCase()))
                : tierFiltered;

            const sorted = [...searchFiltered].sort((a, b) => {
                switch (rankingState.sortKey) {
                    case 'winrate':
                        return b.winRate - a.winRate;
                    case 'streak':
                        return b.streak - a.streak;
                    case 'profit':
                        return b.profit - a.profit;
                    default:
                        return b.returnRate - a.returnRate;
                }
            });

            return includeSort ? sorted : sorted;
        }

        function getFilterLabel() {
            const filter = rankingState.filters.find(item => item.id === rankingState.currentFilter);
            return filter ? filter.label : '';
        }

        function formatCurrency(value) {
            return 'â‚©' + Math.round(value).toLocaleString('ko-KR');
        }

        function showRankingToast(message, type = 'success') {
            const toast = document.getElementById('rankingToast');
            toast.textContent = message;
            toast.className = `home-toast visible ${type}`;
            clearTimeout(showRankingToast.timer);
            showRankingToast.timer = setTimeout(() => {
                toast.classList.remove('visible');
            }, 3000);
        }
    </script>

    <script src="js/collapsible-sidebar.js"></script>
</body>
</html>