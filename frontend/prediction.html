<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ï£ºÏãù ÏòàÏ∏° - Ï£ºÏãù Ï∞®Ìä∏</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üìà</text></svg>">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Korean Trading UI Design System -->
    <link rel="stylesheet" href="css/figma-design.css">
    
    <!-- Mobile Trading UI -->
    <link rel="stylesheet" href="css/mobile-trading.css">
</head>

<body>
    <!-- Korean Trading UI Container -->
    <div class="figma-container">
        
        <!-- Sidebar -->
        <aside class="figma-sidebar">
            <div class="sidebar-logo">
                <i class="fas fa-chart-line"></i>
                <span>Ï£ºÏãù Ï∞®Ìä∏</span>
            </div>
            
            <nav class="sidebar-nav">
                <a href="index.html" class="nav-item">
                    <i class="fas fa-home"></i>
                    <span>Ìôà</span>
                </a>
                <a href="charts.html" class="nav-item">
                    <i class="fas fa-chart-line"></i>
                    <span>Ï∞®Ìä∏ Î∂ÑÏÑù</span>
                </a>
                <a href="prediction.html" class="nav-item active">
                    <i class="fas fa-chart-line"></i>
                    <span>ÏÇ¨Ïö©Ïûê ÏòàÏ∏°</span>
                </a>
                <a href="ranking.html" class="nav-item">
                    <i class="fas fa-trophy"></i>
                    <span>ÏàòÏùµÎ•† Îû≠ÌÇπ</span>
                </a>
                <a href="subscription.html" class="nav-item">
                    <i class="fas fa-crown"></i>
                    <span>ÌîÑÎ¶¨ÎØ∏ÏóÑ</span>
                </a>
                <a href="events.html" class="nav-item">
                    <i class="fas fa-calendar"></i>
                    <span>Ïù¥Î≤§Ìä∏</span>
                </a>
            </nav>
            
            <div class="sidebar-bottom">
                <div class="user-info">
                    <div class="user-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="user-details">
                        <div class="user-name">Í≤åÏä§Ìä∏</div>
                        <div class="user-status">Î¨¥Î£å Í≥ÑÏ†ï</div>
                    </div>
                </div>
            </div>
        </aside>
        
        <!-- Header -->
        <header class="figma-header">
            <div class="header-logo">
                <i class="fas fa-chart-line text-accent-green"></i>
                <span>Ï£ºÏãù ÏòàÏ∏°</span>
            </div>
            
            <div class="header-search">
                <input type="text" class="search-input" placeholder="ÏòàÏ∏°Ìï† Ï¢ÖÎ™© Í≤ÄÏÉâ (Ïòà: BTC, ETH, AAPL, TSLA)" id="searchInput">
            </div>
            
            <div class="header-actions">
                <button class="btn-predict">
                    <i class="fas fa-sign-in-alt"></i>
                    <span>Î°úÍ∑∏Ïù∏</span>
                </button>
                <button class="btn-predict primary">
                    <i class="fas fa-chart-line"></i>
                    <span>ÏòàÏ∏° ÏãúÏûë</span>
                </button>
            </div>
        </header>
        
        <!-- Main Content -->
        <main class="figma-main">
            <div class="main-content">
                <!-- Prediction Header -->
                <div class="content-header">
                    <h1>Ï£ºÏãù ÏòàÏ∏°</h1>
                    <p>Îç∞Ïù¥ÌÑ∞ Î∂ÑÏÑùÏùÑ ÌÜµÌï¥ Ï£ºÏãù Í∞ÄÍ≤©ÏùÑ ÏòàÏ∏°ÌïòÍ≥† Ìà¨Ïûê Ï†ÑÎûµÏùÑ ÏàòÎ¶ΩÌïòÏÑ∏Ïöî</p>
                </div>
                
                <!-- Prediction Form -->
                <div class="prediction-form-section">
                    <div class="form-tabs">
                        <button class="form-tab active" data-tab="prediction">
                            <i class="fas fa-chart-line"></i>
                            Ï£ºÏãù ÏòàÏ∏°
                        </button>
                        <button class="form-tab" data-tab="start">
                            <i class="fas fa-play"></i>
                            ÏòàÏ∏° ÏãúÏûë
                        </button>
                    </div>
                    
                    <div class="modern-prediction-form">
                        <div class="form-section">
                            <div class="form-group-modern">
                                <label class="form-label-modern">Ï¢ÖÎ™©ÏùÑ ÏÑ†ÌÉùÌïòÏÑ∏Ïöî</label>
                                <select class="form-control-modern" id="symbolSelect">
                                    <option value="">Ï¢ÖÎ™©ÏùÑ ÏÑ†ÌÉùÌïòÏÑ∏Ïöî</option>
                                    <option value="BTC/USD">BTC/USD - ÎπÑÌä∏ÏΩîÏù∏</option>
                                    <option value="ETH/USD">ETH/USD - Ïù¥ÎçîÎ¶¨ÏõÄ</option>
                                    <option value="AAPL">AAPL - Ïï†Ìîå</option>
                                    <option value="TSLA">TSLA - ÌÖåÏä¨Îùº</option>
                                    <option value="MSFT">MSFT - ÎßàÏù¥ÌÅ¨Î°úÏÜåÌîÑÌä∏</option>
                                    <option value="GOOGL">GOOGL - Íµ¨Í∏Ä</option>
                                </select>
                            </div>
                            
                            <div class="form-group-modern">
                                <label class="form-label-modern">Í∏∞Í∞Ñ</label>
                                <select class="form-control-modern" id="periodSelect">
                                    <option value="1d">1Ïùº</option>
                                    <option value="3d">3Ïùº</option>
                                    <option value="1w" selected>1Ï£ºÏùº</option>
                                    <option value="1m">1Í∞úÏõî</option>
                                    <option value="3m">3Í∞úÏõî</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="prediction-direction-section">
                            <div class="direction-buttons-modern">
                                <button type="button" class="direction-btn-modern up" onclick="selectDirection('up')">
                                    <i class="fas fa-arrow-up"></i>
                                    <span>ÏÉÅÏäπ</span>
                                </button>
                                <button type="button" class="direction-btn-modern down" onclick="selectDirection('down')">
                                    <i class="fas fa-arrow-down"></i>
                                    <span>ÌïòÎùΩ</span>
                                </button>
                            </div>
                        </div>
                        
                        <div class="form-group-modern">
                            <label class="form-label-modern">ÏòàÏÉÅ Î™©Ìëú Í∞ÄÍ≤©</label>
                            <input type="number" class="form-control-modern" id="targetPrice" placeholder="ÏòàÏÉÅ Î™©Ìëú Í∞ÄÍ≤©">
                        </div>
                        
                        <button class="btn-predict-submit-modern" onclick="submitPrediction()">
                            <i class="fas fa-chart-line"></i>
                            ÏòàÏ∏° Ï†úÏ∂ú
                        </button>
                    </div>
                </div>
                
                <!-- Chart Section -->
                <div class="chart-section">
                    <div class="chart-header-controls">
                        <div class="chart-search-section">
                            <input type="text" class="chart-search-input" placeholder="Ï¢ÖÎ™© Í≤ÄÏÉâ (Ïòà: AAPL, TSLA, BTC)" id="chartSearchInput">
                            <div class="timeframe-controls">
                                <button class="timeframe-control-btn active" data-period="1D">Ïùº</button>
                                <button class="timeframe-control-btn" data-period="1W">Ï£º</button>
                                <button class="timeframe-control-btn" data-period="1M">Ïõî</button>
                                <button class="timeframe-control-btn" data-period="1Y">ÎÖÑ</button>
                                <button class="timeframe-control-btn" data-period="5M">5Î∂Ñ</button>
                                <button class="timeframe-control-btn" data-period="1H">ÏãúÍ∞Ñ</button>
                            </div>
                        </div>
                        
                        <div class="chart-symbol-info">
                            <span class="chart-symbol-name" id="chartSymbolName">AAPL</span>
                            <span class="chart-company-name">Apple Inc.</span>
                        </div>
                        
                        <div class="chart-price-info">
                            <span class="current-price" id="currentChartPrice">$189.45</span>
                            <span class="price-change positive" id="priceChangeDisplay">+2.34 (+1.25%)</span>
                        </div>
                    </div>
                    
                    <div class="advanced-chart-container">
                        <!-- TradingView Advanced Chart -->
                        <div class="tradingview-widget-container" style="height: 600px; width: 100%;">
                            <div id="advanced_tradingview_chart" style="height: 100%; width: 100%;"></div>
                        </div>
                        
                        <!-- Chart Navigation Controls -->
                        <div class="chart-navigation">
                            <div class="chart-scrollbar-container">
                                <div class="time-navigation">
                                    <button class="nav-btn" id="prevYear" title="Ïù¥Ï†Ñ ÎÖÑÎèÑ">&lt;&lt;</button>
                                    <button class="nav-btn" id="prevMonth" title="Ïù¥Ï†Ñ Îã¨">&lt;</button>
                                    <span class="current-period" id="currentPeriod">2025ÎÖÑ 10Ïõî</span>
                                    <button class="nav-btn" id="nextMonth" title="Îã§Ïùå Îã¨">&gt;</button>
                                    <button class="nav-btn" id="nextYear" title="Îã§Ïùå ÎÖÑÎèÑ">&gt;&gt;</button>
                                </div>
                                
                                <div class="chart-scrollbar">
                                    <input type="range" class="time-slider" id="timeSlider" min="0" max="365" value="280" 
                                           title="ÏãúÍ∞Ñ ÌÉêÏÉâ - Í≥ºÍ±∞/ÌòÑÏû¨/ÎØ∏Îûò">
                                    <div class="slider-labels">
                                        <span>Í≥ºÍ±∞</span>
                                        <span>ÌòÑÏû¨</span>
                                        <span>ÎØ∏Îûò</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Volume Display -->
                        <div class="volume-section">
                            <h4>Í±∞ÎûòÎüâ</h4>
                            <div class="volume-bars" id="volumeBars">
                                <div class="volume-bar" style="height: 60%;" title="Í±∞ÎûòÎüâ: 1.2M"></div>
                                <div class="volume-bar" style="height: 80%;" title="Í±∞ÎûòÎüâ: 1.6M"></div>
                                <div class="volume-bar" style="height: 45%;" title="Í±∞ÎûòÎüâ: 0.9M"></div>
                                <div class="volume-bar" style="height: 75%;" title="Í±∞ÎûòÎüâ: 1.5M"></div>
                                <div class="volume-bar" style="height: 90%;" title="Í±∞ÎûòÎüâ: 1.8M"></div>
                                <div class="volume-bar" style="height: 65%;" title="Í±∞ÎûòÎüâ: 1.3M"></div>
                                <div class="volume-bar" style="height: 55%;" title="Í±∞ÎûòÎüâ: 1.1M"></div>
                            </div>
                        </div>
                        
                        <!-- Chart Drawing Tools -->
                        <div class="chart-tools-panel">
                            <div class="drawing-tools">
                                <button class="tool-btn" id="addPoint" title="Ìè¨Ïù∏Ìä∏ Ï∂îÍ∞Ä">
                                    <i class="fas fa-plus"></i>
                                </button>
                                <button class="tool-btn" id="drawLine" title="Ï∂îÏÑ∏ÏÑ† Í∑∏Î¶¨Í∏∞">
                                    <i class="fas fa-chart-line"></i>
                                </button>
                                <button class="tool-btn" id="addNote" title="Î©îÎ™® Ï∂îÍ∞Ä">
                                    <i class="fas fa-sticky-note"></i>
                                </button>
                                <button class="tool-btn" id="clearAll" title="Î™®Îì† Í∑∏Î¶¨Í∏∞ ÏÇ≠Ï†ú">
                                    <i class="fas fa-eraser"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Analysis Results -->
                <div class="analysis-section">
                    <h2>Î∂ÑÏÑù Í≤∞Í≥º</h2>
                    <div class="analysis-cards">
                        <div class="analysis-card">
                            <div class="card-icon">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <h3>Í∏∞Ïà†Ï†Å Î∂ÑÏÑù</h3>
                            <div class="analysis-result">
                                <div class="confidence">92%</div>
                                <div class="recommendation up">Í∞ïÎ†• Îß§Ïàò</div>
                            </div>
                        </div>
                        <div class="analysis-card">
                            <div class="card-icon">
                                <i class="fas fa-newspaper"></i>
                            </div>
                            <h3>Îâ¥Ïä§ Í∞êÏÑ± Î∂ÑÏÑù</h3>
                            <div class="analysis-result">
                                <div class="confidence">87%</div>
                                <div class="recommendation up">Í∏çÏ†ïÏ†Å</div>
                            </div>
                        </div>
                        <div class="analysis-card">
                            <div class="card-icon">
                                <i class="fas fa-users"></i>
                            </div>
                            <h3>ÏãúÏû• Ïã¨Î¶¨</h3>
                            <div class="analysis-result">
                                <div class="confidence">78%</div>
                                <div class="recommendation neutral">Ï§ëÎ¶Ω</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Recent Predictions -->
                <div class="recent-predictions-section">
                    <h2>ÏµúÍ∑º ÏòàÏ∏° Í≤∞Í≥º</h2>
                    <div class="predictions-table">
                        <div class="table-header">
                            <span>Ï¢ÖÎ™©</span>
                            <span>ÏòàÏ∏°Ïùº</span>
                            <span>Î∞©Ìñ•</span>
                            <span>Î™©ÌëúÍ∞Ä</span>
                            <span>Í≤∞Í≥º</span>
                            <span>ÏàòÏùµÎ•†</span>
                        </div>
                        <div class="table-row">
                            <span class="symbol">BTC/USD</span>
                            <span>2025.10.05</span>
                            <span class="direction up">ÏÉÅÏäπ</span>
                            <span>$45,000</span>
                            <span class="status success">ÏÑ±Í≥µ</span>
                            <span class="profit positive">+12.5%</span>
                        </div>
                        <div class="table-row">
                            <span class="symbol">AAPL</span>
                            <span>2025.10.03</span>
                            <span class="direction up">ÏÉÅÏäπ</span>
                            <span>$180</span>
                            <span class="status success">ÏÑ±Í≥µ</span>
                            <span class="profit positive">+8.3%</span>
                        </div>
                        <div class="table-row">
                            <span class="symbol">TSLA</span>
                            <span>2025.10.01</span>
                            <span class="direction down">ÌïòÎùΩ</span>
                            <span>$240</span>
                            <span class="status failed">Ïã§Ìå®</span>
                            <span class="profit negative">-3.2%</span>
                        </div>
                        <div class="table-row">
                            <span class="symbol">MSFT</span>
                            <span>2025.09.30</span>
                            <span class="direction up">ÏÉÅÏäπ</span>
                            <span>$420</span>
                            <span class="status success">ÏÑ±Í≥µ</span>
                            <span class="profit positive">+15.7%</span>
                        </div>
                        <div class="table-row">
                            <span class="symbol">GOOGL</span>
                            <span>2025.09.28</span>
                            <span class="direction up">ÏÉÅÏäπ</span>
                            <span>$175</span>
                            <span class="status success">ÏÑ±Í≥µ</span>
                            <span class="profit positive">+6.9%</span>
                        </div>
                    </div>
                </div>
            </div>
        </main>
        
        <!-- Trading Panel -->
        <aside class="figma-trading-panel">
            <div class="trading-header">
                <h3>ÏòàÏ∏° ÌòÑÌô©</h3>
            </div>
            
            <div class="prediction-stats">
                <div class="stat-item">
                    <span>Ï¥ù ÏòàÏ∏° Ïàò</span>
                    <span class="value">47</span>
                </div>
                <div class="stat-item">
                    <span>ÏÑ±Í≥µÎ•†</span>
                    <span class="value success">78.7%</span>
                </div>
                <div class="stat-item">
                    <span>ÌèâÍ∑† ÏàòÏùµÎ•†</span>
                    <span class="value positive">+15.3%</span>
                </div>
                <div class="stat-item">
                    <span>Ïù¥Î≤à Îã¨ ÏàòÏùµ</span>
                    <span class="value positive">+‚Ç©2,450,000</span>
                </div>
            </div>
            
            <div class="active-predictions">
                <h4>ÏßÑÌñâ Ï§ëÏù∏ ÏòàÏ∏°</h4>
                <div class="prediction-item">
                    <div class="prediction-symbol">BTC/USD</div>
                    <div class="prediction-direction up">ÏÉÅÏäπ ÏòàÏ∏°</div>
                    <div class="prediction-time">2Ïùº ÎÇ®Ïùå</div>
                </div>
                <div class="prediction-item">
                    <div class="prediction-symbol">ETH/USD</div>
                    <div class="prediction-direction up">ÏÉÅÏäπ ÏòàÏ∏°</div>
                    <div class="prediction-time">5Ïùº ÎÇ®Ïùå</div>
                </div>
                <div class="prediction-item">
                    <div class="prediction-symbol">AAPL</div>
                    <div class="prediction-direction down">ÌïòÎùΩ ÏòàÏ∏°</div>
                    <div class="prediction-time">1Ï£ºÏùº ÎÇ®Ïùå</div>
                </div>
            </div>
            
            <div class="user-recommendations">
                <h4>Ï∂îÏ≤ú Ï¢ÖÎ™©</h4>
                <div class="recommendation-item">
                    <div class="rec-symbol">MSFT</div>
                    <div class="rec-action up">Îß§Ïàò Ï∂îÏ≤ú</div>
                    <div class="rec-confidence">95% Ïã†Î¢∞ÎèÑ</div>
                </div>
                <div class="recommendation-item">
                    <div class="rec-symbol">GOOGL</div>
                    <div class="rec-action up">Îß§Ïàò Ï∂îÏ≤ú</div>
                    <div class="rec-confidence">89% Ïã†Î¢∞ÎèÑ</div>
                </div>
                <div class="recommendation-item">
                    <div class="rec-symbol">NFLX</div>
                    <div class="rec-action down">Îß§ÎèÑ Ï∂îÏ≤ú</div>
                    <div class="rec-confidence">82% Ïã†Î¢∞ÎèÑ</div>
                </div>
            </div>
        </aside>
    </div>

    <!-- Mobile Bottom Navigation -->
    <nav class="mobile-bottom-nav">
        <a href="index.html" class="mobile-nav-item">
            <i class="fas fa-home"></i>
            <span>Ìôà</span>
        </a>
        <a href="charts.html" class="mobile-nav-item">
            <i class="fas fa-chart-line"></i>
            <span>Ï∞®Ìä∏</span>
        </a>
        <a href="prediction.html" class="mobile-nav-item active">
            <i class="fas fa-chart-line"></i>
            <span>ÏòàÏ∏°</span>
        </a>
        <a href="ranking.html" class="mobile-nav-item">
            <i class="fas fa-trophy"></i>
            <span>Îû≠ÌÇπ</span>
        </a>
        <a href="subscription.html" class="mobile-nav-item">
            <i class="fas fa-crown"></i>
            <span>ÌîÑÎ¶¨ÎØ∏ÏóÑ</span>
        </a>
    </nav>

    <!-- JavaScript -->
    <script>
        let selectedDirection = null;

        function selectDirection(direction) {
            selectedDirection = direction;
            document.querySelectorAll('.direction-btn-modern').forEach(btn => btn.classList.remove('selected'));
            document.querySelector(`.direction-btn-modern.${direction}`).classList.add('selected');
        }

        function submitPrediction() {
            const symbol = document.getElementById('symbolSelect').value;
            const period = document.getElementById('periodSelect').value;
            const targetPrice = document.getElementById('targetPrice').value;

            if (!symbol || !selectedDirection || !targetPrice) {
                alert('Î™®Îì† ÌïÑÎìúÎ•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.');
                return;
            }

            // Show loading state
            const btn = document.querySelector('.btn-predict-submit-modern');
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Î∂ÑÏÑù Ï§ë...';
            btn.disabled = true;

            // Simulate prediction processing
            setTimeout(() => {
                alert(`${symbol} ${selectedDirection === 'up' ? 'ÏÉÅÏäπ' : 'ÌïòÎùΩ'} ÏòàÏ∏°Ïù¥ Ï†úÏ∂úÎêòÏóàÏäµÎãàÎã§!`);
                btn.innerHTML = '<i class="fas fa-chart-line"></i> ÏòàÏ∏° Ï†úÏ∂ú';
                btn.disabled = false;
                
                // Reset form
                document.getElementById('symbolSelect').value = '';
                document.getElementById('targetPrice').value = '';
                selectedDirection = null;
                document.querySelectorAll('.direction-btn-modern').forEach(btn => btn.classList.remove('selected'));
            }, 2000);
        }

        // Search functionality
        document.getElementById('searchInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                const symbol = this.value.toUpperCase();
                document.getElementById('symbolSelect').value = symbol;
                this.value = '';
            }
        });
    </script>

    <!-- TradingView Chart Widget -->
    <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
    <script type="text/javascript">
        let currentWidget = null;
        let currentPeriod = new Date();
        let selectedPoints = [];
        
        // Initialize Advanced TradingView Chart
        function initializeAdvancedChart(symbol = 'AAPL', interval = 'D') {
            if (currentWidget) {
                currentWidget.remove();
            }
            
            currentWidget = new TradingView.widget({
                "width": "100%",
                "height": 600,
                "symbol": symbol,
                "interval": interval,
                "timezone": "Asia/Seoul",
                "theme": "dark",
                "style": "1",
                "locale": "ko",
                "toolbar_bg": "#1a1a1a",
                "enable_publishing": false,
                "hide_top_toolbar": false,
                "hide_legend": false,
                "save_image": false,
                "container_id": "advanced_tradingview_chart",
                "studies": [
                    "MASimple@tv-basicstudies",
                    "RSI@tv-basicstudies",
                    "Volume@tv-basicstudies"
                ],
                "overrides": {
                    "paneProperties.background": "#1a1a1a",
                    "paneProperties.vertGridProperties.color": "#2a2a2a",
                    "paneProperties.horzGridProperties.color": "#2a2a2a",
                    "symbolWatermarkProperties.transparency": 90,
                    "scalesProperties.textColor": "#888888",
                    "scalesProperties.lineColor": "#2a2a2a",
                    "mainSeriesProperties.candleStyle.upColor": "#00FFA3",
                    "mainSeriesProperties.candleStyle.downColor": "#FF4747",
                    "mainSeriesProperties.candleStyle.borderUpColor": "#00FFA3",
                    "mainSeriesProperties.candleStyle.borderDownColor": "#FF4747",
                    "mainSeriesProperties.candleStyle.wickUpColor": "#00FFA3",
                    "mainSeriesProperties.candleStyle.wickDownColor": "#FF4747",
                    "paneProperties.vertGridProperties.style": 1,
                    "paneProperties.horzGridProperties.style": 1
                },
                "disabled_features": [],
                "enabled_features": ["study_templates"]
            });
        }
        
        // Chart Search Functionality
        function setupChartSearch() {
            const searchInput = document.getElementById('chartSearchInput');
            const symbolName = document.getElementById('chartSymbolName');
            
            searchInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    const symbol = this.value.toUpperCase().trim();
                    if (symbol) {
                        symbolName.textContent = symbol;
                        const activeInterval = document.querySelector('.timeframe-control-btn.active').dataset.period;
                        initializeAdvancedChart(symbol, convertPeriodToInterval(activeInterval));
                        updatePriceInfo(symbol);
                    }
                }
            });
        }
        
        // Convert period format to TradingView interval
        function convertPeriodToInterval(period) {
            const mapping = {
                '5M': '5',
                '1H': '60',
                '1D': 'D',
                '1W': 'W',
                '1M': 'M',
                '1Y': '12M'
            };
            return mapping[period] || 'D';
        }
        
        // Time Navigation Functions
        function setupTimeNavigation() {
            const prevYear = document.getElementById('prevYear');
            const prevMonth = document.getElementById('prevMonth');
            const nextMonth = document.getElementById('nextMonth');
            const nextYear = document.getElementById('nextYear');
            const currentPeriodSpan = document.getElementById('currentPeriod');
            const timeSlider = document.getElementById('timeSlider');
            
            function updatePeriodDisplay() {
                const year = currentPeriod.getFullYear();
                const month = currentPeriod.getMonth() + 1;
                currentPeriodSpan.textContent = `${year}ÎÖÑ ${month}Ïõî`;
            }
            
            prevYear.addEventListener('click', () => {
                currentPeriod.setFullYear(currentPeriod.getFullYear() - 1);
                updatePeriodDisplay();
                updateChartPeriod();
            });
            
            prevMonth.addEventListener('click', () => {
                currentPeriod.setMonth(currentPeriod.getMonth() - 1);
                updatePeriodDisplay();
                updateChartPeriod();
            });
            
            nextMonth.addEventListener('click', () => {
                currentPeriod.setMonth(currentPeriod.getMonth() + 1);
                updatePeriodDisplay();
                updateChartPeriod();
            });
            
            nextYear.addEventListener('click', () => {
                currentPeriod.setFullYear(currentPeriod.getFullYear() + 1);
                updatePeriodDisplay();
                updateChartPeriod();
            });
            
            // Time slider for past/present/future navigation
            timeSlider.addEventListener('input', function() {
                const value = parseInt(this.value);
                const today = new Date();
                const daysDiff = value - 280; // 280 represents current day
                
                const newDate = new Date(today);
                newDate.setDate(today.getDate() + daysDiff);
                
                currentPeriod = newDate;
                updatePeriodDisplay();
                updateChartPeriod();
            });
            
            updatePeriodDisplay();
        }
        
        function updateChartPeriod() {
            const symbol = document.getElementById('chartSymbolName').textContent;
            const activeInterval = document.querySelector('.timeframe-control-btn.active').dataset.period;
            initializeAdvancedChart(symbol, convertPeriodToInterval(activeInterval));
        }
        
        // Chart Drawing Tools
        function setupDrawingTools() {
            const addPointBtn = document.getElementById('addPoint');
            const drawLineBtn = document.getElementById('drawLine');
            const addNoteBtn = document.getElementById('addNote');
            const clearAllBtn = document.getElementById('clearAll');
            
            let isAddingPoint = false;
            
            addPointBtn.addEventListener('click', function() {
                isAddingPoint = !isAddingPoint;
                this.classList.toggle('active');
                
                if (isAddingPoint) {
                    document.body.style.cursor = 'crosshair';
                } else {
                    document.body.style.cursor = 'default';
                }
            });
            
            // Add click listener to chart for point placement
            document.addEventListener('click', function(e) {
                if (isAddingPoint && e.target.closest('#advanced_tradingview_chart')) {
                    addChartPoint(e.clientX, e.clientY);
                }
            });
            
            clearAllBtn.addEventListener('click', function() {
                selectedPoints.forEach(point => point.remove());
                selectedPoints = [];
            });
        }
        
        function addChartPoint(x, y) {
            const chartContainer = document.getElementById('advanced_tradingview_chart');
            const rect = chartContainer.getBoundingClientRect();
            
            const point = document.createElement('div');
            point.className = 'chart-point';
            point.style.left = (x - rect.left - 4) + 'px';
            point.style.top = (y - rect.top - 4) + 'px';
            
            // Create delete button
            const deleteBtn = document.createElement('button');
            deleteBtn.className = 'point-delete-btn';
            deleteBtn.innerHTML = '√ó';
            deleteBtn.addEventListener('click', function(e) {
                e.stopPropagation();
                point.remove();
                selectedPoints = selectedPoints.filter(p => p !== point);
            });
            
            point.appendChild(deleteBtn);
            chartContainer.appendChild(point);
            selectedPoints.push(point);
        }
        
        // Update price information
        function updatePriceInfo(symbol) {
            // Simulate price data - in real implementation, fetch from API
            const prices = {
                'AAPL': { price: 189.45, change: 2.34, percent: 1.25 },
                'TSLA': { price: 242.67, change: -3.21, percent: -1.31 },
                'BTC': { price: 28450.00, change: 1250.00, percent: 4.59 },
                'MSFT': { price: 338.11, change: 5.67, percent: 1.71 }
            };
            
            const data = prices[symbol] || prices['AAPL'];
            const priceElement = document.getElementById('currentChartPrice');
            const changeElement = document.getElementById('priceChangeDisplay');
            
            priceElement.textContent = `$${data.price.toLocaleString()}`;
            changeElement.textContent = `${data.change >= 0 ? '+' : ''}${data.change} (${data.change >= 0 ? '+' : ''}${data.percent}%)`;
            changeElement.className = `price-change ${data.change >= 0 ? 'positive' : 'negative'}`;
        }
        
        // Volume bars animation
        function animateVolumeBars() {
            const volumeBars = document.querySelectorAll('.volume-bar');
            setInterval(() => {
                volumeBars.forEach(bar => {
                    const randomHeight = Math.random() * 80 + 20;
                    bar.style.height = randomHeight + '%';
                });
            }, 5000);
        }

        // Initialize everything when page loads
        document.addEventListener('DOMContentLoaded', function() {
            initializeAdvancedChart();
            setupChartSearch();
            setupTimeNavigation();
            setupDrawingTools();
            animateVolumeBars();
            
            // Form tabs functionality
            document.querySelectorAll('.form-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    document.querySelectorAll('.form-tab').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                });
            });
            
            // Timeframe control buttons
            document.querySelectorAll('.timeframe-control-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.timeframe-control-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    
                    const period = this.dataset.period;
                    const symbol = document.getElementById('chartSymbolName').textContent;
                    initializeAdvancedChart(symbol, convertPeriodToInterval(period));
                });
            });
        });
    </script>

        // Initialize everything when page loads
        document.addEventListener('DOMContentLoaded', function() {
            initializeAdvancedChart();
            setupChartSearch();
            setupTimeNavigation();
            setupDrawingTools();
            animateVolumeBars();
            
            // Form tabs functionality
            document.querySelectorAll('.form-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    document.querySelectorAll('.form-tab').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                });
            });
            
            // Timeframe control buttons
            document.querySelectorAll('.timeframe-control-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.timeframe-control-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    
                    const period = this.dataset.period;
                    const symbol = document.getElementById('chartSymbolName').textContent;
                    initializeAdvancedChart(symbol, convertPeriodToInterval(period));
                });
            });
            
            // Update chart when symbol changes in prediction form
            const symbolSelect = document.getElementById('symbolSelect');
            if (symbolSelect) {
                symbolSelect.addEventListener('change', function() {
                    const symbol = this.value;
                    if (symbol) {
                        document.getElementById('chartSymbolName').textContent = symbol;
                        const activeInterval = document.querySelector('.timeframe-control-btn.active').dataset.period;
                        initializeAdvancedChart(symbol, convertPeriodToInterval(activeInterval));
                        updatePriceInfo(symbol);
                    }
                });
            }
        });
    </script>

    <!-- Collapsible Sidebar Script -->
    <script src="js/collapsible-sidebar.js"></script>
</body>
</html>