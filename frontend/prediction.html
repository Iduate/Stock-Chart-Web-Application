<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>Ï£ºÏãù ÏòàÏ∏° - Ï£ºÏãù Ï∞®Ìä∏</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üìà</text></svg>">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Korean Trading UI Design System -->
    <link rel="stylesheet" href="css/figma-design.css?v=2025.10.11">
    
    <!-- Mobile Trading UI -->
    <link rel="stylesheet" href="css/mobile-trading.css?v=2025.10.11">

    <script src="https://unpkg.com/lightweight-charts@4.1.3/dist/lightweight-charts.standalone.production.js"></script>
</head>

<body>
    <!-- Korean Trading UI Container -->
    <div class="figma-container prediction-page">
        
        <!-- Sidebar -->
        <aside class="figma-sidebar">
            <div class="sidebar-logo">
                <i class="fas fa-chart-line"></i>
                <span>Ï£ºÏãù Ï∞®Ìä∏</span>
            </div>
            
            <nav class="sidebar-nav">
                <a href="/" class="nav-item">
                    <i class="fas fa-home"></i>
                    <span>Ìôà</span>
                </a>
                <a href="charts.html" class="nav-item">
                    <i class="fas fa-chart-line"></i>
                    <span>Ï∞®Ìä∏ Î∂ÑÏÑù</span>
                </a>
                <a href="prediction.html" class="nav-item active">
                    <i class="fas fa-bullseye"></i>
                    <span>ÏÇ¨Ïö©Ïûê ÏòàÏ∏°</span>
                </a>
                <a href="ranking.html" class="nav-item">
                    <i class="fas fa-trophy"></i>
                    <span>ÏàòÏùµÎ•† Îû≠ÌÇπ</span>
                </a>
                <a href="subscription.html" class="nav-item">
                    <i class="fas fa-crown"></i>
                    <span>ÌîÑÎ¶¨ÎØ∏ÏóÑ</span>
                </a>
                <a href="events.html" class="nav-item">
                    <i class="fas fa-calendar"></i>
                    <span>Ïù¥Î≤§Ìä∏</span>
                </a>
            </nav>
        </aside>
        
        <!-- Header -->
        <header class="figma-header prediction-header">
            <div class="header-logo">
                <i class="fas fa-chart-line text-accent-green"></i>
                <span>Ï£ºÏãù ÏòàÏ∏°</span>
            </div>
            
            <div class="header-search">
                <input type="text" class="search-input" placeholder="ÏòàÏ∏°Ìï† Ï¢ÖÎ™© Í≤ÄÏÉâ (Ïòà: BTC, ETH, AAPL, TSLA)" id="searchInput">
            </div>
            
            <div class="header-actions">
                <a href="/api/auth/social/google/login/?redirect=true" class="btn-predict" id="loginButton"><i class="fas fa-user"></i> Î°úÍ∑∏Ïù∏</a>
            </div>
        </header>

        <!-- Main Content -->
        <main class="figma-main prediction-main">
            <div class="prediction-dashboard desktop-only">
                    <section class="dashboard-left">
                        <header class="dashboard-header">
                            <div class="profile-block">
                                <div class="profile-avatar">
                                    <span>üü¢</span>
                                </div>
                                <div class="profile-meta">
                                    <div class="profile-name">SamsiteUR</div>
                                    <div class="profile-balance">ÏÇ¨Ïö© Í∞ÄÎä•Ìïú ÏûêÍ∏à <strong>$466,277.01</strong></div>
                                </div>
                            </div>
                            <div class="asset-meta">
                                <div class="asset-symbol">
                                    <span class="asset-tag">BTC/USD</span>
                                    <span class="asset-network">ÎπÑÌä∏ÏΩîÏù∏ ÎÑ§Ìä∏ÏõåÌÅ¨</span>
                                </div>
                                <div class="asset-stats">
                                    <div class="asset-price">
                                        <span class="price-value" id="currentChartPrice">$432.32</span>
                                        <span class="price-delta positive" id="priceChangeDisplay">+2.34 (+0.20%)</span>
                                    </div>
                                    <div class="asset-timeframe">
                                        <span class="timeframe-label">ÏãúÍ∞Ñ ÌîÑÎ†àÏûÑ</span>
                                        <strong class="timeframe-value">1Ïùº</strong>
                                    </div>
                                    <div class="asset-trend">
                                        <span class="trend-label">Î∞©Ìñ•</span>
                                        <strong class="trend-value positive">Í∞ïÏÑ∏</strong>
                                    </div>
                                </div>
                            </div>
                            <div class="asset-controls">
                                <div class="chart-search-section compact">
                                    <input type="text" class="chart-search-input" placeholder="Ï¢ÖÎ™© Í≤ÄÏÉâ (Ïòà: AAPL, TSLA, BTC)" id="chartSearchInput">
                                    <div class="timeframe-controls">
                                        <button class="timeframe-control-btn active" data-period="1D">1D</button>
                                        <button class="timeframe-control-btn" data-period="1W">1W</button>
                                        <button class="timeframe-control-btn" data-period="1M">1M</button>
                                        <button class="timeframe-control-btn" data-period="1Y">1Y</button>
                                        <button class="timeframe-control-btn" data-period="5M">5M</button>
                                        <button class="timeframe-control-btn" data-period="1H">1H</button>
                                    </div>
                                </div>
                                <div class="chart-symbol-info">
                                    <span class="chart-symbol-name" id="chartSymbolName">BTC</span>
                                    <span class="chart-company-name">Bitcoin / USD</span>
                                </div>
                            </div>
                        </header>

                        <section class="chart-card card-dark">
                            <div class="tradingview-widget-container">
                                <div id="advanced_tradingview_chart"></div>
                            </div>
                            <div class="chart-navigation">
                                <div class="time-navigation">
                                    <button class="nav-btn" id="prevYear" title="Ïù¥Ï†Ñ ÎÖÑÎèÑ">&lt;&lt;</button>
                                    <button class="nav-btn" id="prevMonth" title="Ïù¥Ï†Ñ Îã¨">&lt;</button>
                                    <span class="current-period" id="currentPeriod">2025ÎÖÑ 10Ïõî</span>
                                    <button class="nav-btn" id="nextMonth" title="Îã§Ïùå Îã¨">&gt;</button>
                                    <button class="nav-btn" id="nextYear" title="Îã§Ïùå ÎÖÑÎèÑ">&gt;&gt;</button>
                                </div>
                                <div class="chart-scrollbar">
                                    <input type="range" class="time-slider" id="timeSlider" min="0" max="365" value="280" title="ÏãúÍ∞Ñ ÌÉêÏÉâ - Í≥ºÍ±∞/ÌòÑÏû¨/ÎØ∏Îûò">
                                    <div class="slider-labels">
                                        <span>Í≥ºÍ±∞</span>
                                        <span>ÌòÑÏû¨</span>
                                        <span>ÎØ∏Îûò</span>
                                    </div>
                                </div>
                            </div>
                            <div class="volume-section">
                                <div class="volume-bars" id="volumeBars">
                                    <div class="volume-bar" style="height:68%"></div>
                                    <div class="volume-bar" style="height:82%"></div>
                                    <div class="volume-bar" style="height:45%"></div>
                                    <div class="volume-bar" style="height:78%"></div>
                                    <div class="volume-bar" style="height:92%"></div>
                                    <div class="volume-bar" style="height:61%"></div>
                                    <div class="volume-bar" style="height:54%"></div>
                                </div>
                                <div class="volume-legend">
                                    <span>Í±∞ÎûòÎüâ</span>
                                    <span>24h Í∏∞Ï§Ä</span>
                                </div>
                            </div>
                            <div class="chart-tools-panel" style="display:none!important;">
                                <button class="tool-btn" id="addPoint" title="Ìè¨Ïù∏Ìä∏ Ï∂îÍ∞Ä"><i class="fas fa-plus"></i></button>
                                <button class="tool-btn" id="drawLine" title="Ï∂îÏÑ∏ÏÑ† Í∑∏Î¶¨Í∏∞"><i class="fas fa-chart-line"></i></button>
                                <button class="tool-btn" id="addNote" title="Î©îÎ™® Ï∂îÍ∞Ä"><i class="fas fa-sticky-note"></i></button>
                                <button class="tool-btn" id="clearAll" title="Î™®Îì† Í∑∏Î¶¨Í∏∞ ÏÇ≠Ï†ú"><i class="fas fa-eraser"></i></button>
                            </div>
                        </section>

                        <section class="prediction-history card-dark">
                            <header class="history-header">
                                <div>
                                    <h2>ÏòàÏ∏° Î≥¥Îìú</h2>
                                    <span class="history-sub">ÏµúÍ∑º Í±∞Îûò Î∞è ÏòàÏ∏° Í∏∞Î°ù</span>
                                </div>
                                <div class="history-filters">
                                    <button class="history-filter active">Ï†ÑÏ≤¥</button>
                                    <button class="history-filter">ÏÑ±Í≥µ</button>
                                    <button class="history-filter">Ïã§Ìå®</button>
                                </div>
                            </header>
                            <div class="history-table">
                                <div class="history-row header">
                                    <span>Ïù¥Î¶Ñ</span>
                                    <span>ÎÇ†Ïßú</span>
                                    <span>Îß§Ïàò/Îß§ÎèÑ</span>
                                    <span>ÏãúÍ∞Ñ ÌîÑÎ†àÏûÑ</span>
                                    <span>ÏàòÏùµÎ•†</span>
                                </div>
                                <div class="history-row">
                                    <span>ÏóòÎ¶¨ Ïù¥ÏïÑÎ¶¨Ïóê</span>
                                    <span>2025-10-05</span>
                                    <span class="chip buy">Îß§Ïàò</span>
                                    <span>5Î∂Ñ</span>
                                    <span class="profit negative">-3.17%</span>
                                </div>
                                <div class="history-row">
                                    <span>ÏóòÎ¶¨ Ïù¥ÏïÑÎ¶¨Ïóê</span>
                                    <span>2025-10-05</span>
                                    <span class="chip buy">Îß§Ïàò</span>
                                    <span>1Ïùº</span>
                                    <span class="profit positive">+8.30%</span>
                                </div>
                                <div class="history-row">
                                    <span>ÏóòÎ¶¨ Ïù¥ÏïÑÎ¶¨Ïóê</span>
                                    <span>2025-10-04</span>
                                    <span class="chip sell">Îß§ÎèÑ</span>
                                    <span>5Î∂Ñ</span>
                                    <span class="profit negative">-1.96%</span>
                                </div>
                                <div class="history-row">
                                    <span>ÏóòÎ¶¨ Ïù¥ÏïÑÎ¶¨Ïóê</span>
                                    <span>2025-10-04</span>
                                    <span class="chip buy">Îß§Ïàò</span>
                                    <span>1Ïùº</span>
                                    <span class="profit positive">+8.30%</span>
                                </div>
                                <div class="history-row">
                                    <span>ÏóòÎ¶¨ Ïù¥ÏïÑÎ¶¨Ïóê</span>
                                    <span>2025-10-03</span>
                                    <span class="chip sell">Îß§ÎèÑ</span>
                                    <span>5Î∂Ñ</span>
                                    <span class="profit negative">-3.17%</span>
                                </div>
                            </div>
                        </section>
                    </section>

                    <aside class="dashboard-right">
                        <div class="prediction-form-card card-dark">
                            <header class="form-header">
                                <div>
                                    <span class="form-tag">ÏòàÏ∏°</span>
                                    <h2>Ìè¨ÏßÄÏÖò ÏûÖÎ†•</h2>
                                </div>
                                <button class="form-settings"><i class="fas fa-ellipsis-h"></i></button>
                            </header>
                            <div class="form-tabs">
                                <button class="form-tab active" data-tab="prediction">Ï£ºÏãù ÏòàÏ∏°</button>
                                <button class="form-tab" data-tab="start">Îπ†Î•∏ ÏãúÏûë</button>
                            </div>
                            <div class="form-body">
                                <label class="form-label-modern">ÏûêÏÇ∞ ÏÑ†ÌÉù</label>
                                <select class="form-control-modern" id="symbolSelect">
                                    <option value="">Ï¢ÖÎ™©ÏùÑ ÏÑ†ÌÉùÌïòÏÑ∏Ïöî</option>
                                    <option value="BTC/USD">BTC/USD - ÎπÑÌä∏ÏΩîÏù∏</option>
                                    <option value="ETH/USD">ETH/USD - Ïù¥ÎçîÎ¶¨ÏõÄ</option>
                                    <option value="AAPL">AAPL - Ïï†Ìîå</option>
                                    <option value="TSLA">TSLA - ÌÖåÏä¨Îùº</option>
                                    <option value="MSFT">MSFT - ÎßàÏù¥ÌÅ¨Î°úÏÜåÌîÑÌä∏</option>
                                    <option value="GOOGL">GOOGL - Íµ¨Í∏Ä</option>
                                </select>

                                <label class="form-label-modern" for="periodSelect">ÏòàÏ∏° Í∏∞Í∞Ñ</label>
                                <select class="form-control-modern" id="periodSelect">
                                    <option value="1d">1Ïùº</option>
                                    <option value="3d">3Ïùº</option>
                                    <option value="1w" selected>1Ï£ºÏùº</option>
                                    <option value="1m">1Í∞úÏõî</option>
                                    <option value="3m">3Í∞úÏõî</option>
                                </select>

                                <label class="form-label-modern">ÌòÑÏû¨Í∞Ä</label>
                                <div class="form-value-display">$437.0</div>

                                <label class="form-label-modern">ÏàòÎüâ</label>
                                <input type="number" class="form-control-modern" placeholder="ÏàòÎüâ" value="10">

                                <label class="form-label-modern">Î™©ÌëúÍ∞Ä</label>
                                <input type="number" class="form-control-modern" id="targetPrice" placeholder="ÏòàÏÉÅ Î™©Ìëú Í∞ÄÍ≤©">

                                <label class="form-label-modern">Î©îÎ™® (ÏÑ†ÌÉù)</label>
                                <textarea class="form-control-modern" rows="3" placeholder="Î©îÎ™®Î•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî"></textarea>

                                <div class="direction-buttons-modern">
                                    <button type="button" class="direction-btn-modern up" onclick="selectDirection('up')">
                                        <i class="fas fa-arrow-up"></i>
                                        <span>ÏÉÅÏäπ</span>
                                    </button>
                                    <button type="button" class="direction-btn-modern down" onclick="selectDirection('down')">
                                        <i class="fas fa-arrow-down"></i>
                                        <span>ÌïòÎùΩ</span>
                                    </button>
                                </div>

                                <button class="btn-predict-submit-modern" onclick="submitPrediction()">
                                    <i class="fas fa-plus-circle"></i>
                                    ÏòàÏ∏° Îì±Î°ù
                                </button>
                            </div>
                        </div>

                        <div class="news-card card-dark">
                            <header class="news-header">
                                <h3>ÏµúÏã† Îâ¥Ïä§</h3>
                                <button class="news-refresh"><i class="fas fa-sync"></i></button>
                            </header>
                            <ul class="news-list">
                                <li>
                                    <span class="news-title">ÏÉàÎ°úÏö¥ Í∏àÏúµ Í∑úÏ†úÍ∞Ä ÏãúÏû•ÏùÑ ÌùîÎì§Îã§</span>
                                    <span class="news-time">2Î∂Ñ Ï†Ñ</span>
                                </li>
                                <li>
                                    <span class="news-title">BTC Í∏âÎì±, Ï£ºÏöî Ï†ÄÌï≠ÏÑ† ÎèåÌåå</span>
                                    <span class="news-time">8Î∂Ñ Ï†Ñ</span>
                                </li>
                                <li>
                                    <span class="news-title">Í∏∞Í¥Ä Ìà¨ÏûêÏûê, Í∏∞Ïà†Ï£º Îß§Ïàò ÌôïÎåÄÎ°ú Ï†ÑÌôò</span>
                                    <span class="news-time">12Î∂Ñ Ï†Ñ</span>
                                </li>
                                <li>
                                    <span class="news-title">ÎØ∏ Ïó∞Ï§Ä, Í∏àÎ¶¨ ÎèôÍ≤∞ ÏãúÏÇ¨</span>
                                    <span class="news-time">20Î∂Ñ Ï†Ñ</span>
                                </li>
                                <li>
                                    <span class="news-title">Ï≤®Îã® Í∏∞Ïà† ÏÑπÌÑ∞, Ï°∞Ï†ï ÌõÑ Î∞òÎì± Ïã†Ìò∏</span>
                                    <span class="news-time">30Î∂Ñ Ï†Ñ</span>
                                </li>
                            </ul>
                        </div>
                    </aside>
                </div>

                <section class="prediction-mobile mobile-only">
                    <div class="mobile-hero-card mobile-fade-in">
                        <div class="mobile-hero-top">
                            <div>
                                <span class="mobile-hero-subtitle">ÏïàÎÖïÌïòÏÑ∏Ïöî,</span>
                                <span class="mobile-hero-title">SamsiteUR</span>
                            </div>
                            <button class="mobile-notification-btn" aria-label="ÏÉà ÏïåÎ¶º">
                                <i class="fas fa-bell"></i>
                                <span class="mobile-notification-dot"></span>
                            </button>
                        </div>
                        <div class="mobile-hero-balance">
                            <span class="label">Ï¥ù ÏûêÏÇ∞</span>
                            <span class="value">‚Ç©164,500,000</span>
                        </div>
                        <div class="mobile-hero-card-info">
                            <div>
                                <span class="mobile-card-label">Ï£ºÏöî ÏûêÏÇ∞</span>
                                <span class="mobile-card-value">BTC / USD</span>
                            </div>
                            <div class="mobile-card-change positive">+8.30%</div>
                        </div>
                        <div class="mobile-hero-card-meta">
                            <span class="mobile-card-number">**** 4821</span>
                            <span class="mobile-card-chip"></span>
                        </div>
                    </div>

                    <div class="mobile-quick-actions mobile-fade-in">
                        <button class="mobile-action-btn primary">
                            <i class="fas fa-bullseye"></i>
                            ÏòàÏ∏° Îì±Î°ù
                        </button>
                        <button class="mobile-action-btn secondary">
                            <i class="fas fa-chart-line"></i>
                            Ï∞®Ìä∏ Î≥¥Í∏∞
                        </button>
                        <button class="mobile-action-btn tertiary">
                            <i class="fas fa-wallet"></i>
                            ÏûêÍ∏à Í¥ÄÎ¶¨
                        </button>
                    </div>

                    <div class="mobile-chart-container mobile-fade-in">
                        <div class="mobile-chart-header">
                            <div>
                                <div class="mobile-chart-symbol">BTC / USD</div>
                                <div class="mobile-chart-subtitle">ÎπÑÌä∏ÏΩîÏù∏ ÎÑ§Ìä∏ÏõåÌÅ¨</div>
                            </div>
                            <div class="mobile-chart-price-wrap">
                                <span class="mobile-chart-price">$43,276</span>
                                <span class="mobile-chart-change positive">+3.12%</span>
                            </div>
                        </div>
                        <div class="mobile-chart-canvas" id="mobilePredictionChart"></div>
                        <div class="mobile-chart-timeframes">
                            <button class="mobile-timeframe-btn active" data-period="1D">1D</button>
                            <button class="mobile-timeframe-btn" data-period="1W">1W</button>
                            <button class="mobile-timeframe-btn" data-period="1M">1M</button>
                            <button class="mobile-timeframe-btn" data-period="1Y">1Y</button>
                        </div>
                    </div>

                    <div class="mobile-stats-grid mobile-fade-in">
                        <div class="mobile-stat-card">
                            <div class="mobile-stat-label">Ïò§Îäò ÏàòÏùµÎ•†</div>
                            <div class="mobile-stat-value">+4.12%</div>
                            <div class="mobile-stat-change positive">ÏÉÅÏäπ Ï∂îÏÑ∏</div>
                        </div>
                        <div class="mobile-stat-card">
                            <div class="mobile-stat-label">ÏòàÏ∏° Ï†ïÌôïÎèÑ</div>
                            <div class="mobile-stat-value">86%</div>
                            <div class="mobile-stat-change">ÏßÄÎÇúÏ£º ÎåÄÎπÑ +6%</div>
                        </div>
                    </div>

                    <div class="mobile-card mobile-wallet-card mobile-fade-in">
                        <div class="mobile-card-header">
                            <div>
                                <h3 class="mobile-card-title">Ìè¨ÏßÄÏÖò ÏûÖÎ†•</h3>
                                <span class="mobile-card-subtitle">ÏÉÅÏäπ / ÌïòÎùΩ ÏÑ†ÌÉù ÌõÑ Î™©ÌëúÍ∞ÄÎ•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî</span>
                            </div>
                            <button class="mobile-card-action">ÏÉà ÏòàÏ∏°</button>
                        </div>
                        <div class="mobile-form-group">
                            <label class="mobile-form-label">ÏûêÏÇ∞ ÏÑ†ÌÉù</label>
                            <select class="mobile-form-select">
                                <option>BTC / USD</option>
                                <option>ETH / USD</option>
                                <option>AAPL</option>
                                <option>TSLA</option>
                            </select>
                        </div>
                        <div class="mobile-form-inline">
                            <div class="mobile-form-group">
                                <label class="mobile-form-label">Í∏∞Í∞Ñ</label>
                                <select class="mobile-form-select">
                                    <option>1D</option>
                                    <option>1W</option>
                                    <option selected>1M</option>
                                    <option>3M</option>
                                </select>
                            </div>
                            <div class="mobile-form-group">
                                <label class="mobile-form-label">Î™©ÌëúÍ∞Ä</label>
                                <input type="number" class="mobile-form-input" placeholder="$45,000">
                            </div>
                        </div>
                        <div class="mobile-direction-toggle">
                            <button class="mobile-direction-btn up active"><i class="fas fa-arrow-up"></i> ÏÉÅÏäπ</button>
                            <button class="mobile-direction-btn down"><i class="fas fa-arrow-down"></i> ÌïòÎùΩ</button>
                        </div>
                        <button class="mobile-btn">ÏòàÏ∏° Ï†úÏ∂ú</button>
                    </div>

                    <div class="mobile-card mobile-fade-in">
                        <div class="mobile-card-header">
                            <h3 class="mobile-card-title">ÏµúÍ∑º Í±∞Îûò</h3>
                            <button class="mobile-card-action">Ï†ÑÏ≤¥ Î≥¥Í∏∞</button>
                        </div>
                        <div class="mobile-history-list">
                            <div class="mobile-transaction-item">
                                <div class="mobile-list-icon"><i class="fas fa-coins"></i></div>
                                <div class="mobile-list-content">
                                    <div class="mobile-list-title">ÎπÑÌä∏ÏΩîÏù∏ Îß§Ïàò</div>
                                    <div class="mobile-transaction-meta">5Î∂Ñ Ï†Ñ ¬∑ 1Ïùº ÏòàÏ∏°</div>
                                </div>
                                <div class="mobile-list-value positive">+8.30%</div>
                            </div>
                            <div class="mobile-transaction-item">
                                <div class="mobile-list-icon"><i class="fas fa-chart-area"></i></div>
                                <div class="mobile-list-content">
                                    <div class="mobile-list-title">Ïù¥ÎçîÎ¶¨ÏõÄ Îß§ÎèÑ</div>
                                    <div class="mobile-transaction-meta">32Î∂Ñ Ï†Ñ ¬∑ 5Î∂Ñ ÏòàÏ∏°</div>
                                </div>
                                <div class="mobile-list-value negative">-3.17%</div>
                            </div>
                            <div class="mobile-transaction-item">
                                <div class="mobile-list-icon"><i class="fas fa-rocket"></i></div>
                                <div class="mobile-list-content">
                                    <div class="mobile-list-title">ÌÖåÏä¨Îùº ÏÉÅÏäπ</div>
                                    <div class="mobile-transaction-meta">Ïñ¥Ï†ú ¬∑ 1Ï£º ÏòàÏ∏°</div>
                                </div>
                                <div class="mobile-list-value positive">+4.52%</div>
                            </div>
                        </div>
                    </div>

                    <div class="mobile-card mobile-fade-in">
                        <div class="mobile-card-header">
                            <h3 class="mobile-card-title">ÏãúÏû• Îâ¥Ïä§</h3>
                            <button class="mobile-card-action">ÏÉàÎ°úÍ≥†Ïπ®</button>
                        </div>
                        <ul class="mobile-news-list">
                            <li>
                                <span class="news-title">BTC Í∏âÎì±, Ï†ÄÌï≠ÏÑ† ÎèåÌåå</span>
                                <span class="news-time">2Î∂Ñ Ï†Ñ</span>
                            </li>
                            <li>
                                <span class="news-title">Áæé Ïó∞Ï§Ä, Í∏àÎ¶¨ ÎèôÍ≤∞ ÏãúÏÇ¨</span>
                                <span class="news-time">12Î∂Ñ Ï†Ñ</span>
                            </li>
                            <li>
                                <span class="news-title">Ï≤®Îã® Í∏∞Ïà† ÏÑπÌÑ∞, Ï°∞Ï†ï ÌõÑ Î∞òÎì± Ïã†Ìò∏</span>
                                <span class="news-time">30Î∂Ñ Ï†Ñ</span>
                            </li>
                        </ul>
                    </div>
                </section>
            </main>
    </div>

    <!-- Mobile Bottom Navigation -->
    <nav class="mobile-bottom-nav mobile-only" aria-label="Î™®Î∞îÏùº ÌïòÎã® ÌÉêÏÉâ">
        <a href="/" class="mobile-nav-item" title="Ìôà">
            <i class="fas fa-home" aria-hidden="true"></i>
            <span>Ìôà</span>
        </a>
        <a href="charts.html" class="mobile-nav-item" title="Ï∞®Ìä∏">
            <i class="fas fa-chart-area" aria-hidden="true"></i>
            <span>Ï∞®Ìä∏</span>
        </a>
        <a href="prediction.html" class="mobile-nav-item active" title="ÏòàÏ∏°" aria-current="page">
            <i class="fas fa-magic" aria-hidden="true"></i>
            <span>ÏòàÏ∏°</span>
        </a>
        <a href="ranking.html" class="mobile-nav-item" title="Îû≠ÌÇπ">
            <i class="fas fa-trophy" aria-hidden="true"></i>
            <span>Îû≠ÌÇπ</span>
        </a>
        <a href="subscription.html" class="mobile-nav-item" title="ÌîÑÎ¶¨ÎØ∏ÏóÑ">
            <i class="fas fa-crown" aria-hidden="true"></i>
            <span>ÌîÑÎ¶¨ÎØ∏ÏóÑ</span>
        </a>
    </nav>

    <!-- JavaScript -->
    <script>
        // Login via Google OAuth
        async function startGoogleLogin() {
            try {
                const btn = document.getElementById('loginButton');
                if (btn) {
                    btn.classList.add('loading');
                    btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Î°úÍ∑∏Ïù∏...';
                }

                    // Use canonical social route: /api/auth/social/<provider>/login/
                    const endpoints = [
                        '/api/auth/social/google/login/',
                        '/api/auth/social/google/login/',
                        '/api/auth/social/google/login',
                        '/api/users/auth/social/google/login/'
                    ];

                let lastError = null;
                for (const url of endpoints) {
                    try {
                        const res = await fetch(url, { credentials: 'same-origin' });
                        if (!res.ok) { lastError = new Error('HTTP ' + res.status); continue; }
                        const data = await res.json();
                        if (data && data.auth_url) {
                            window.location.href = data.auth_url;
                            return;
                        }
                        lastError = new Error('No auth_url in response');
                    } catch (e) {
                        lastError = e;
                    }
                }
                throw lastError || new Error('Ïù∏Ï¶ù URLÏùÑ Î∞õÏßÄ Î™ªÌñàÏäµÎãàÎã§.');
            } catch (err) {
                alert('Google Î°úÍ∑∏Ïù∏ ÏãúÏûë Ï§ë Ïò§Î•ò: ' + err.message);
            } finally {
                const btn = document.getElementById('loginButton');
                if (btn) {
                    btn.classList.remove('loading');
                    btn.innerHTML = '<i class="fas fa-user"></i> Î°úÍ∑∏Ïù∏';
                }
            }
        }

        document.addEventListener('DOMContentLoaded', function(){
            const loginBtn = document.getElementById('loginButton');
            if (loginBtn) {
                loginBtn.addEventListener('click', function(e){
                    e.preventDefault();
                    startGoogleLogin();
                });
            }
        });

        // Ensure mobile nav active state reflects current page
        (function () {
            var path = location.pathname.replace(/\/+$/, '') || '/';
            document.querySelectorAll('.mobile-bottom-nav .mobile-nav-item').forEach(function(a){
                var href = a.getAttribute('href');
                var match = (href === '/' && path === '/') || (href !== '/' && path.endsWith(href));
                a.classList.toggle('active', !!match);
                if (match) a.setAttribute('aria-current', 'page');
            });
        })();

        // Minimal mobile prediction chart init as a fallback
        function initMobilePredictionChart() {
            var el = document.getElementById('mobilePredictionChart');
            if (!el || typeof LightweightCharts === 'undefined') return;
            if (el.__chartInit) return; // prevent double init
            el.__chartInit = true;
            var chart = LightweightCharts.createChart(el, {
                width: el.clientWidth,
                height: 180,
                layout: { background: { type: 'solid', color: '#0b1224' }, textColor: '#eaf2ff' },
                grid: { vertLines: { color: 'rgba(255,255,255,0.06)' }, horzLines: { color: 'rgba(255,255,255,0.06)' }},
                rightPriceScale: { borderColor: 'rgba(255,255,255,0.1)' },
                timeScale: { borderColor: 'rgba(255,255,255,0.1)' }
            });
            var series = chart.addAreaSeries({ lineColor: '#0A84FF', topColor: 'rgba(10,132,255,0.35)', bottomColor: 'rgba(10,132,255,0.05)' });
            var now = Date.now();
            var data = Array.from({length: 50}, (_, i) => ({ time: Math.floor((now/1000) - (50-i)*3600), value: 43000 + Math.sin(i/5)*300 + i*5 }));
            series.setData(data);
            chart.timeScale().fitContent();
            window.addEventListener('resize', function(){ chart.applyOptions({ width: el.clientWidth }); });
        }

        // Delay init to ensure CSS layout applied
        document.addEventListener('DOMContentLoaded', function(){ setTimeout(initMobilePredictionChart, 100); });

        let selectedDirection = null;

        function selectDirection(direction) {
            selectedDirection = direction;
            document.querySelectorAll('.direction-btn-modern').forEach(btn => btn.classList.remove('selected'));
            document.querySelector(`.direction-btn-modern.${direction}`).classList.add('selected');
        }

        function submitPrediction() {
            const symbol = document.getElementById('symbolSelect').value;
            const period = document.getElementById('periodSelect').value;
            const targetPrice = document.getElementById('targetPrice').value;

            if (!symbol || !selectedDirection || !targetPrice) {
                alert('Î™®Îì† ÌïÑÎìúÎ•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.');
                return;
            }

            // Show loading state
            const btn = document.querySelector('.btn-predict-submit-modern');
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Î∂ÑÏÑù Ï§ë...';
            btn.disabled = true;

            // Simulate prediction processing
            setTimeout(() => {
                alert(`${symbol} ${selectedDirection === 'up' ? 'ÏÉÅÏäπ' : 'ÌïòÎùΩ'} ÏòàÏ∏°Ïù¥ Ï†úÏ∂úÎêòÏóàÏäµÎãàÎã§!`);
                btn.innerHTML = '<i class="fas fa-chart-line"></i> ÏòàÏ∏° Ï†úÏ∂ú';
                btn.disabled = false;
                
                // Reset form
                document.getElementById('symbolSelect').value = '';
                document.getElementById('targetPrice').value = '';
                selectedDirection = null;
                document.querySelectorAll('.direction-btn-modern').forEach(btn => btn.classList.remove('selected'));
            }, 2000);
        }

        // Search functionality (header search may not exist on all layouts)
        const headerSearchInput = document.getElementById('searchInput');
        if (headerSearchInput) {
            headerSearchInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    const symbol = this.value.toUpperCase();
                    if (symbol) {
                        document.getElementById('symbolSelect').value = symbol;
                        const activeInterval = document.querySelector('.timeframe-control-btn.active').dataset.period;
                        initializeAdvancedChart(symbol, convertPeriodToInterval(activeInterval));
                        updatePriceInfo(symbol);
                        if (typeof updateMobilePredictionChart === 'function') {
                            updateMobilePredictionChart(symbol);
                        }
                    }
                    this.value = '';
                }
            });
        }
    </script>

    <!-- TradingView Chart Widget -->
    <script type="text/javascript" src="https://s3.tradingview.com/tv.js?v=20240108"></script>
    
    <!-- Advanced Chart JavaScript -->
    <script src="js/advanced-chart.js?v=20240108&t=1738983456"></script>

    <!-- Collapsible Sidebar Script -->
    <script src="js/collapsible-sidebar.js?v=20240108&t=1738983456"></script>
</body>
</html>
