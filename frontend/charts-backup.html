<!DOCTYPE html>
<html lang="ko" class="bg-gray-50 overflow-x-hidden max-w-full">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ï∞®Ìä∏ Î≥¥Îìú - StockChart</title>
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üìà</text></svg>">

    <!-- Banking UI CSS Framework -->
    <link rel="stylesheet" href="css/banking-ui.css">
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <!-- Lightweight Charts - Multiple CDN fallbacks -->
    <script src="https://unpkg.com/lightweight-charts@4.1.3/dist/lightweight-charts.standalone.production.js"
        onerror="this.onerror=null; this.src='https://cdn.jsdelivr.net/npm/lightweight-charts@4.1.3/dist/lightweight-charts.standalone.production.js'"></script>
    <script>
        // Ensure LightweightCharts is loaded before proceeding
        window.chartLibraryReady = false;
        function checkLightweightCharts() {
            if (typeof LightweightCharts !== 'undefined') {
                console.log('‚úÖ LightweightCharts loaded successfully');
                window.chartLibraryReady = true;
                window.dispatchEvent(new Event('lightweightChartsReady'));
            } else {
                console.log('‚ùå LightweightCharts not loaded, retrying...');
                setTimeout(checkLightweightCharts, 100);
            }
        }
        // Start checking after a brief delay
        setTimeout(checkLightweightCharts, 50);
    </script>

    <!-- Custom Tailwind Config -->
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        // Banking UI colors
                        'primary': '#2563eb',
                        'primary-dark': '#1d4ed8',
                        'secondary': '#64748b',
                        'accent': '#3b82f6',
                        'success': '#10b981',
                        'warning': '#f59e0b',
                        'error': '#ef4444',
                        'surface': '#ffffff',
                        'background': '#f8fafc',
                        'text-primary': '#1e293b',
                        'text-secondary': '#64748b',
                        'border': '#e2e8f0',
                    },
                    fontFamily: {
                        'inter': ['Inter', 'ui-sans-serif', 'system-ui'],
                        'noto': ['Noto Sans KR', 'ui-sans-serif', 'system-ui'],
                    }
                }
            }
        }
    </script>

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap"
        rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">

    <!-- Fluorescent Chart Styles - Boss Requirements -->
    <style>
        @keyframes neon-pulse {

            0%,
            100% {
                opacity: 0.1;
                transform: scale(1);
                box-shadow: 0 0 20px rgba(0, 255, 65, 0.3);
            }

            50% {
                opacity: 0.4;
                transform: scale(1.02);
                box-shadow: 0 0 40px rgba(0, 255, 65, 0.6);
            }
        }

        .chart-container-fluorescent {
            background: radial-gradient(circle at center, rgba(0, 255, 65, 0.05) 0%, transparent 70%);
            border-radius: 15px;
            position: relative;
            overflow: hidden;
        }

        .chart-container-fluorescent::before {
            content: '';
            position: absolute;
            top: -5px;
            left: -5px;
            right: -5px;
            bottom: -5px;
            background: linear-gradient(45deg, #00FF41, #0080FF, #FF007F);
            border-radius: 20px;
            opacity: 0.1;
            animation: neon-pulse 2s ease-in-out infinite;
            z-index: -1;
        }

        .chart-container-fluorescent:nth-child(2)::before {
            background: linear-gradient(45deg, #0080FF, #00FFFF, #8A2BE2);
        }

        .chart-container-fluorescent:nth-child(3)::before {
            background: linear-gradient(45deg, #FF007F, #FF4500, #FFFF00);
        }

        @media (max-width: 768px) {
            .chart-container-fluorescent {
                min-height: 200px;
            }
        }
    </style>

    <!-- JavaScript files -->
    <script src="js/tradingview-pro.js"></script>
    <script src="js/chart-legend.js"></script>
    <script src="js/chart-controls.js"></script>
    <script src="js/view-toggle.js"></script>
    <script src="js/price-formatter.js"></script>
    <!-- Fluorescent Charts Module - Boss Requirements -->
    <script src="js/fluorescent-charts.js"></script>

    <style>
        /* Mobile overflow prevention using pure Tailwind approach */
        * {
            box-sizing: border-box;
        }

        /* Hamburger Menu Animation */
        .hamburger-line {
            transition: all 0.3s ease;
            transform-origin: center;
        }

        .menu-open .hamburger-line:nth-child(1) {
            transform: rotate(45deg) translate(6px, 6px);
        }

        .menu-open .hamburger-line:nth-child(2) {
            opacity: 0;
        }

        .menu-open .hamburger-line:nth-child(3) {
            transform: rotate(-45deg) translate(6px, -6px);
        }
    </style>
</head>

<body class="bg-gray-50 text-gray-900 font-inter overflow-x-hidden max-w-full min-h-screen">
    <!-- Navigation Bar -->
    <nav class="sticky top-0 z-50 bg-white border-b border-gray-200 backdrop-blur-sm shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <!-- Logo -->
                <div class="flex items-center">
                    <a href="home.html"
                        class="flex items-center space-x-2 text-gray-900 hover:text-blue-600 transition-colors">
                        <i class="fas fa-chart-line text-blue-600 text-xl"></i>
                        <span class="text-xl font-bold">StockChart</span>
                    </a>
                </div>

                <!-- Desktop Navigation -->
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-1">
                        <a href="home.html"
                            class="text-gray-600 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium flex items-center space-x-1 transition-colors">
                            <i class="fas fa-home"></i>
                            <span>Ìôà</span>
                        </a>
                        <a href="charts.html"
                            class="bg-blue-600 text-white px-3 py-2 rounded-md text-sm font-medium flex items-center space-x-1">
                            <i class="fas fa-chart-line"></i>
                            <span>Ï∞®Ìä∏ Î≥¥Îìú</span>
                        </a>
                        <a href="prediction.html"
                            class="text-gray-600 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium flex items-center space-x-1 transition-colors">
                            <i class="fas fa-lightbulb"></i>
                            <span>ÏòàÏ∏°</span>
                        </a>
                        <a href="my-predictions.html"
                            class="text-gray-600 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium flex items-center space-x-1 transition-colors">
                            <i class="fas fa-user-chart"></i>
                            <span>ÎÇòÏùò ÏòàÏ∏°</span>
                        </a>
                        <a href="ranking.html"
                            class="text-tv-text-secondary hover:text-white px-3 py-2 rounded-md text-sm font-medium flex items-center space-x-1 transition-colors">
                            <i class="fas fa-trophy"></i>
                            <span>Îû≠ÌÇπ</span>
                        </a>
                        <a href="events.html"
                            class="text-tv-text-secondary hover:text-white px-3 py-2 rounded-md text-sm font-medium flex items-center space-x-1 transition-colors">
                            <i class="fas fa-calendar"></i>
                            <span>Ïù¥Î≤§Ìä∏</span>
                        </a>
                        <a href="subscription.html"
                            class="text-tv-text-secondary hover:text-white px-3 py-2 rounded-md text-sm font-medium flex items-center space-x-1 transition-colors">
                            <i class="fas fa-crown"></i>
                            <span>Íµ¨ÎèÖ</span>
                        </a>
                    </div>
                </div>

                <!-- CTA Button -->
                <div class="hidden md:block">
                    <button onclick="showLoginModal()"
                        class="bg-tv-blue hover:bg-blue-600 text-white px-6 py-2 rounded-lg text-sm font-semibold flex items-center space-x-2 transition-all duration-200 transform hover:scale-105">
                        <i class="fas fa-rocket"></i>
                        <span>ÏßÄÍ∏à ÏãúÏûë</span>
                    </button>
                </div>

                <!-- Mobile menu button -->
                <div class="md:hidden">
                    <button onclick="toggleMobileMenu()"
                        class="relative z-[99999] text-tv-text-secondary hover:text-white p-2 rounded-lg transition-all duration-300 hover:bg-tv-light"
                        id="mobileMenuButton" aria-label="Î©îÎâ¥ Ïó¥Í∏∞">
                        <div class="w-6 h-6 flex flex-col justify-center items-center">
                            <span
                                class="hamburger-line w-6 h-0.5 bg-current transition-all duration-300 transform origin-center"></span>
                            <span
                                class="hamburger-line w-6 h-0.5 bg-current transition-all duration-300 transform origin-center mt-1.5"></span>
                            <span
                                class="hamburger-line w-6 h-0.5 bg-current transition-all duration-300 transform origin-center mt-1.5"></span>
                        </div>
                    </button>
                </div>
            </div>
        </div>

        </div>
        </div>
        </div>
    </nav>

    <!-- Mobile Menu Portal - Outside Nav Context -->
    <div id="mobile-menu-portal" class="fixed inset-0 lg:hidden"
        style="display: none; z-index: 999999 !important; position: fixed !important;">
        <!-- Full Screen Overlay -->
        <div class="absolute inset-0 bg-black/50 backdrop-blur-sm" style="z-index: 999990 !important;"
            onclick="toggleMobileMenu()"></div>

        <!-- Menu Sidebar -->
        <div id="mobile-menu-content"
            class="absolute left-0 top-0 h-full w-80 max-w-[80vw] bg-[#1e1e2e] border-r border-[#8b5cf6]/20 transform -translate-x-full transition-transform duration-300 ease-in-out shadow-2xl"
            style="z-index: 999999 !important;">
            <!-- Menu Header -->
            <div class="flex items-center justify-between p-6 border-b border-[#8b5cf6]/20">
                <div class="flex items-center space-x-3">
                    <div
                        class="w-8 h-8 bg-gradient-to-r from-[#8b5cf6] to-[#3b82f6] rounded-lg flex items-center justify-center">
                        <i class="fas fa-chart-line text-white text-sm"></i>
                    </div>
                    <span class="text-white font-bold text-xl">StockChart</span>
                </div>
                <button onclick="toggleMobileMenu()" class="text-gray-400 hover:text-white transition-colors p-2">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>

            <!-- Menu Items -->
            <div class="p-6 space-y-4">
                <a href="home.html"
                    class="flex items-center space-x-3 p-3 rounded-lg hover:bg-[#8b5cf6]/10 transition-colors group">
                    <i class="fas fa-home text-[#8b5cf6] group-hover:text-white transition-colors"></i>
                    <span class="text-gray-300 group-hover:text-white transition-colors">Ìôà</span>
                </a>
                <a href="charts.html"
                    class="flex items-center space-x-3 p-3 rounded-lg bg-[#8b5cf6]/20 border border-[#8b5cf6] transition-colors group">
                    <i class="fas fa-chart-area text-[#8b5cf6] transition-colors"></i>
                    <span class="text-white transition-colors">Ï∞®Ìä∏ Î∂ÑÏÑù</span>
                </a>
                <a href="prediction.html"
                    class="flex items-center space-x-3 p-3 rounded-lg hover:bg-[#8b5cf6]/10 transition-colors group">
                    <i class="fas fa-brain text-[#8b5cf6] group-hover:text-white transition-colors"></i>
                    <span class="text-gray-300 group-hover:text-white transition-colors">AI ÏòàÏ∏°</span>
                </a>
                <a href="my-predictions.html"
                    class="flex items-center space-x-3 p-3 rounded-lg hover:bg-[#8b5cf6]/10 transition-colors group">
                    <i class="fas fa-user-chart text-[#8b5cf6] group-hover:text-white transition-colors"></i>
                    <span class="text-gray-300 group-hover:text-white transition-colors">ÎÇ¥ ÏòàÏ∏°</span>
                </a>
                <a href="ranking.html"
                    class="flex items-center space-x-3 p-3 rounded-lg hover:bg-[#8b5cf6]/10 transition-colors group">
                    <i class="fas fa-trophy text-[#8b5cf6] group-hover:text-white transition-colors"></i>
                    <span class="text-gray-300 group-hover:text-white transition-colors">Îû≠ÌÇπ</span>
                </a>
                <a href="events.html"
                    class="flex items-center space-x-3 p-3 rounded-lg hover:bg-[#8b5cf6]/10 transition-colors group">
                    <i class="fas fa-calendar-alt text-[#8b5cf6] group-hover:text-white transition-colors"></i>
                    <span class="text-gray-300 group-hover:text-white transition-colors">Ïù¥Î≤§Ìä∏</span>
                </a>
                <a href="subscription.html"
                    class="flex items-center space-x-3 p-3 rounded-lg hover:bg-[#8b5cf6]/10 transition-colors group">
                    <i class="fas fa-crown text-[#8b5cf6] group-hover:text-white transition-colors"></i>
                    <span class="text-gray-300 group-hover:text-white transition-colors">Íµ¨ÎèÖ</span>
                </a>
            </div>

            <!-- Bottom Section -->
            <div class="absolute bottom-6 left-6 right-6">
                <div
                    class="p-4 bg-gradient-to-r from-[#8b5cf6]/20 to-[#3b82f6]/20 rounded-lg border border-[#8b5cf6]/30">
                    <div class="text-white font-semibold mb-2">ÌîÑÎ¶¨ÎØ∏ÏóÑ Íµ¨ÎèÖ</div>
                    <div class="text-gray-300 text-sm mb-3">Í≥†Í∏â Î∂ÑÏÑù ÎèÑÍµ¨ÏôÄ Ïã§ÏãúÍ∞Ñ ÏïåÎ¶ºÏùÑ Î∞õÏïÑÎ≥¥ÏÑ∏Ïöî</div>
                    <button
                        class="w-full bg-gradient-to-r from-[#8b5cf6] to-[#3b82f6] text-white py-2 px-4 rounded-lg hover:from-[#7c3aed] hover:to-[#2563eb] transition-all">
                        Î¨¥Î£åÎ°ú ÏãúÏûëÌïòÍ∏∞
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Charts Board Section -->
    <section class="py-8 bg-white min-h-screen">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <!-- Page Header -->
            <div class="mb-8">
                <div class="flex items-center space-x-3 mb-4">
                    <i class="fas fa-chart-line text-blue-600 text-3xl"></i>
                    <h1 class="text-3xl lg:text-4xl font-bold text-gray-900">Ïã§ÏãúÍ∞Ñ Ï∞®Ìä∏ Î≥¥Îìú</h1>
                </div>
                <p class="text-lg text-gray-600 max-w-2xl">Ï†Ñ ÏÑ∏Í≥Ñ ÏÇ¨Ïö©ÏûêÎì§Ïùò ÏòàÏ∏°Í≥º Ïã§Ï†ú Í≤∞Í≥ºÎ•º Ïã§ÏãúÍ∞ÑÏúºÎ°ú ÌôïÏù∏Ìï¥Î≥¥ÏÑ∏Ïöî</p>
            </div>

            <!-- Chart Controls -->
            <div class="banking-card border border-gray-200 rounded-xl p-6 mb-8">
                <div class="flex flex-col lg:flex-row gap-6 items-start lg:items-center justify-between">
                    <!-- Filters -->
                    <div class="flex flex-wrap gap-4">
                        <div class="flex flex-col space-y-2">
                            <label class="text-sm font-medium text-gray-700">ÎßàÏºì ÏÑ†ÌÉù</label>
                            <select id="marketSelector"
                                class="bg-white border border-gray-300 rounded-lg px-4 py-2 text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                onchange="filterStocksByMarket()">
                                <option value="all">Ï†ÑÏ≤¥</option>
                                <option value="crypto">ÏïîÌò∏ÌôîÌèê</option>
                                <option value="kr">ÌïúÍµ≠ Ï£ºÏãù</option>
                                <option value="us">ÎØ∏Íµ≠ Ï£ºÏãù</option>
                                <option value="jp">ÏùºÎ≥∏ Ï£ºÏãù</option>
                                <option value="in">Ïù∏ÎèÑ Ï£ºÏãù</option>
                                <option value="uk">ÏòÅÍµ≠ Ï£ºÏãù</option>
                                <option value="ca">Ï∫êÎÇòÎã§ Ï£ºÏãù</option>
                                <option value="fr">ÌîÑÎûëÏä§ Ï£ºÏãù</option>
                                <option value="de">ÎèÖÏùº Ï£ºÏãù</option>
                                <option value="tw">ÎåÄÎßå Ï£ºÏãù</option>
                            </select>
                        </div>
                        <div class="flex flex-col space-y-2">
                            <label class="text-sm font-medium text-gray-700">Îç∞Ïù¥ÌÑ∞ ÏÉàÎ°úÍ≥†Ïπ®</label>
                            <div class="flex space-x-2">
                                <button onclick="refreshCharts()"
                                    class="bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white px-3 py-2 rounded-lg transition-all duration-200 flex items-center justify-center space-x-1 focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 text-sm">
                                    <i class="fas fa-sync-alt"></i>
                                    <span>ÏÉàÎ°úÍ≥†Ïπ®</span>
                                </button>
                                <button onclick="loadMoreStocks()"
                                    class="bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white px-3 py-2 rounded-lg transition-all duration-200 flex items-center justify-center space-x-1 focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 text-sm">
                                    <i class="fas fa-plus"></i>
                                    <span id="load-more-text">ÎçîÎ≥¥Í∏∞</span>
                                </button>
                            </div>
                        </div>
                        <div class="flex flex-col space-y-2">
                            <label class="text-sm font-medium text-tv-text-secondary">ÏãúÍ∞Ñ ÌîÑÎ†àÏûÑ</label>
                            <select
                                class="bg-tv-light border border-tv-border rounded-lg px-4 py-2 text-tv-text focus:ring-2 focus:ring-tv-blue focus:border-transparent">
                                <option>1ÏãúÍ∞Ñ</option>
                                <option>4ÏãúÍ∞Ñ</option>
                                <option>1Ïùº</option>
                                <option>1Ï£º</option>
                                <option>1Í∞úÏõî</option>
                            </select>
                        </div>
                        <div class="flex flex-col space-y-2">
                            <label class="text-sm font-medium text-tv-text-secondary">Ï†ïÎ†¨ Í∏∞Ï§Ä</label>
                            <select
                                class="bg-tv-light border border-tv-border rounded-lg px-4 py-2 text-tv-text focus:ring-2 focus:ring-tv-blue focus:border-transparent">
                                <option>ÏµúÏã†Ïàú</option>
                                <option>Ïù∏Í∏∞Ïàú</option>
                                <option>Ï†ïÌôïÎèÑÏàú</option>
                                <option>ÏàòÏùµÎ•†Ïàú</option>
                            </select>
                        </div>
                    </div>

                    <!-- View Toggle -->
                    <div class="flex items-center space-x-2 bg-gray-100 rounded-lg p-1">
                        <button class="bg-blue-600 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors"
                            id="grid-view">
                            <i class="fas fa-th-large mr-2"></i>Í∑∏Î¶¨Îìú
                        </button>
                        <button
                            class="text-gray-600 hover:text-gray-900 px-4 py-2 rounded-md text-sm font-medium transition-colors"
                            id="list-view">
                            <i class="fas fa-list mr-2"></i>Î¶¨Ïä§Ìä∏
                        </button>
                    </div>

                    <!-- API Status Indicator -->
                    <div class="flex items-center space-x-4 text-sm">
                        <div class="flex items-center space-x-2">
                            <div id="api-status-dot" class="w-3 h-3 bg-green-500 rounded-full animate-pulse"></div>
                            <span class="text-gray-600">Ïã§ÏãúÍ∞Ñ Îç∞Ïù¥ÌÑ∞</span>
                        </div>
                        <div class="flex items-center space-x-2 text-xs text-gray-500">
                            <i class="fas fa-database"></i>
                            <span id="api-count">6Í∞ú API ÌôúÏÑ±Ìôî</span>
                        </div>
                        <div class="flex items-center space-x-2 text-xs text-gray-500">
                            <i class="fas fa-chart-line"></i>
                            <span id="stock-count">Ï¥ù 285Í∞ú Ï¢ÖÎ™©</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Debug Panel (Hidden by default) -->
            <div id="debug-panel" class="banking-card border border-gray-200 rounded-xl p-4 mb-6 hidden">
                <div class="flex items-center justify-between mb-3">
                    <h3 class="text-lg font-semibold text-gray-900">üîç Debug Information</h3>
                    <button onclick="toggleDebugPanel()" class="text-gray-600 hover:text-gray-900">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div id="debug-content" class="text-sm text-gray-600 space-y-2 max-h-40 overflow-y-auto">
                    <p>Debug information will appear here...</p>
                </div>
            </div>

            <!-- Charts Grid - Expanded to show 9 stocks -->
            <div class="grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6" id="charts-container">
                <!-- Chart Card 1 -->
                <div
                    class="banking-card border border-gray-200 rounded-xl overflow-hidden hover:border-blue-500 transition-all duration-200 group">
                    <!-- Chart Header -->
                    <div class="p-4 border-b border-gray-200">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center space-x-3">
                                <div
                                    class="w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center">
                                    <i class="fab fa-bitcoin text-orange-500"></i>
                                </div>
                                <div>
                                    <h3 class="font-semibold text-gray-900">Bitcoin (BTC)</h3>
                                    <p class="text-sm text-gray-600">ÏòàÏ∏°Ïûê: TradingPro</p>
                                </div>
                            </div>
                            <div class="text-right">
                                <div class="text-lg font-bold text-gray-900">$112,380</div>
                                <div class="flex items-center space-x-1 text-green-600">
                                    <i class="fas fa-caret-up"></i>
                                    <span class="text-sm font-medium">+2.5%</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Chart Body -->
                    <div class="relative h-64 bg-gray-50">
                        <div class="chart-placeholder w-full h-full" id="chart-1"></div>

                        <!-- Enhanced Chart Overlay with Fluorescent Styling -->
                        <div class="absolute top-4 right-4 bg-black bg-opacity-90 backdrop-blur-sm rounded-lg p-3 border-2 border-neon-green"
                            style="box-shadow: 0 0 20px rgba(0, 255, 65, 0.4);">
                            <div class="text-xs text-gray-400 mb-1">Î™©ÌëúÍ∞Ä</div>
                            <div class="text-sm font-semibold text-neon-green">$120,000</div>
                            <div class="flex items-center mt-2">
                                <div class="w-2 h-2 bg-neon-green rounded-full animate-pulse mr-2"></div>
                                <span class="text-xs text-neon-green">Ïã§ÏãúÍ∞Ñ</span>
                            </div>
                        </div>
                    </div>

                    <!-- Chart Footer -->
                    <div class="p-4">
                        <div class="flex items-center justify-between mb-3">
                            <div class="flex items-center space-x-4">
                                <div class="flex items-center space-x-1">
                                    <i class="fas fa-eye text-tv-text-secondary text-sm"></i>
                                    <span class="text-sm text-tv-text-secondary">1.2K</span>
                                </div>
                                <div class="flex items-center space-x-1">
                                    <i class="fas fa-thumbs-up text-tv-green text-sm"></i>
                                    <span class="text-sm text-tv-text-secondary">89%</span>
                                </div>
                            </div>
                            <div class="text-sm text-tv-text-secondary">2ÏãúÍ∞Ñ Ï†Ñ</div>
                        </div>
                        <div class="flex space-x-2">
                            <button onclick="voteOnPrediction('chart1', 'up')"
                                class="flex-1 bg-tv-green hover:bg-green-600 text-white py-2 rounded-lg text-sm font-medium transition-colors">
                                <i class="fas fa-arrow-up mr-1"></i>ÏÉÅÏäπ ÎèôÏ°∞
                            </button>
                            <button onclick="voteOnPrediction('chart1', 'down')"
                                class="flex-1 bg-tv-red hover:bg-red-600 text-white py-2 rounded-lg text-sm font-medium transition-colors">
                                <i class="fas fa-arrow-down mr-1"></i>ÌïòÎùΩ ÎèôÏ°∞
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Chart Card 2 -->
                <div
                    class="bg-tv-card border border-tv-border rounded-xl overflow-hidden hover:border-tv-blue transition-all duration-200 group">
                    <!-- Chart Header -->
                    <div class="p-4 border-b border-tv-border">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center space-x-3">
                                <div
                                    class="w-10 h-10 bg-tv-green bg-opacity-20 rounded-lg flex items-center justify-center">
                                    <i class="fas fa-microchip text-tv-green"></i>
                                </div>
                                <div>
                                    <h3 class="font-semibold text-tv-text">ÏÇºÏÑ±Ï†ÑÏûê (005930)</h3>
                                    <p class="text-sm text-tv-text-secondary">ÏòàÏ∏°Ïûê: KoreaTrader</p>
                                </div>
                            </div>
                            <div class="text-right">
                                <div class="text-lg font-bold text-tv-text">‚Ç©72,600</div>
                                <div class="flex items-center space-x-1 text-tv-green">
                                    <i class="fas fa-caret-up"></i>
                                    <span class="text-sm font-medium">+1.8%</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Chart Body - Enhanced with Fluorescent Effects -->
                    <div class="relative h-64 bg-tv-dark chart-container-fluorescent">
                        <div class="chart-placeholder w-full h-full" id="chart-2"></div>

                        <!-- Enhanced Chart Overlay with Blue Fluorescent Styling -->
                        <div class="absolute top-4 right-4 bg-black bg-opacity-90 backdrop-blur-sm rounded-lg p-3 border-2 border-neon-blue"
                            style="border-color: #0033FF; box-shadow: 0 0 20px rgba(0, 51, 255, 0.4);">
                            <div class="text-xs text-gray-400 mb-1">Î™©ÌëúÍ∞Ä</div>
                            <div class="text-sm font-semibold" style="color: #0033FF;">‚Ç©80,000</div>
                            <div class="flex items-center mt-2">
                                <div class="w-2 h-2 rounded-full animate-pulse mr-2" style="background-color: #0033FF;">
                                </div>
                                <span class="text-xs" style="color: #0033FF;">Ïã§ÏãúÍ∞Ñ</span>
                            </div>
                        </div>
                    </div>

                    <!-- Chart Footer -->
                    <div class="p-4">
                        <div class="flex items-center justify-between mb-3">
                            <div class="flex items-center space-x-4">
                                <div class="flex items-center space-x-1">
                                    <i class="fas fa-eye text-tv-text-secondary text-sm"></i>
                                    <span class="text-sm text-tv-text-secondary">856</span>
                                </div>
                                <div class="flex items-center space-x-1">
                                    <i class="fas fa-thumbs-up text-tv-green text-sm"></i>
                                    <span class="text-sm text-tv-text-secondary">76%</span>
                                </div>
                            </div>
                            <div class="text-sm text-tv-text-secondary">4ÏãúÍ∞Ñ Ï†Ñ</div>
                        </div>
                        <div class="flex space-x-2">
                            <button onclick="voteOnPrediction('chart2', 'up')"
                                class="flex-1 bg-tv-green hover:bg-green-600 text-white py-2 rounded-lg text-sm font-medium transition-colors">
                                <i class="fas fa-arrow-up mr-1"></i>ÏÉÅÏäπ ÎèôÏ°∞
                            </button>
                            <button onclick="voteOnPrediction('chart2', 'down')"
                                class="flex-1 bg-tv-red hover:bg-red-600 text-white py-2 rounded-lg text-sm font-medium transition-colors">
                                <i class="fas fa-arrow-down mr-1"></i>ÌïòÎùΩ ÎèôÏ°∞
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Chart Card 3 -->
                <div
                    class="bg-tv-card border border-tv-border rounded-xl overflow-hidden hover:border-tv-blue transition-all duration-200 group">
                    <!-- Chart Header -->
                    <div class="p-4 border-b border-tv-border">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center space-x-3">
                                <div
                                    class="w-10 h-10 bg-blue-500 bg-opacity-20 rounded-lg flex items-center justify-center">
                                    <i class="fab fa-ethereum text-blue-500"></i>
                                </div>
                                <div>
                                    <h3 class="font-semibold text-tv-text">Ethereum (ETH)</h3>
                                    <p class="text-sm text-tv-text-secondary">ÏòàÏ∏°Ïûê: CryptoExpert</p>
                                </div>
                            </div>
                            <div class="text-right">
                                <div class="text-lg font-bold text-tv-text">$4,320</div>
                                <div class="flex items-center space-x-1 text-tv-red">
                                    <i class="fas fa-caret-down"></i>
                                    <span class="text-sm font-medium">-1.2%</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Chart Body - Enhanced with Fluorescent Effects -->
                    <div class="relative h-64 bg-tv-dark chart-container-fluorescent">
                        <div class="chart-placeholder w-full h-full" id="chart-3"></div>

                        <!-- Enhanced Chart Overlay with Pink Fluorescent Styling -->
                        <div class="absolute top-4 right-4 bg-black bg-opacity-90 backdrop-blur-sm rounded-lg p-3 border-2 border-neon-pink"
                            style="border-color: #FF0066; box-shadow: 0 0 20px rgba(255, 0, 102, 0.4);">
                            <div class="text-xs text-gray-400 mb-1">Î™©ÌëúÍ∞Ä</div>
                            <div class="text-sm font-semibold" style="color: #FF0066;">$3,800</div>
                            <div class="flex items-center mt-2">
                                <div class="w-2 h-2 rounded-full animate-pulse mr-2" style="background-color: #FF0066;">
                                </div>
                                <span class="text-xs" style="color: #FF0066;">Ïã§ÏãúÍ∞Ñ</span>
                            </div>
                        </div>
                    </div>

                    <!-- Chart Footer -->
                    <div class="p-4">
                        <div class="flex items-center justify-between mb-3">
                            <div class="flex items-center space-x-4">
                                <div class="flex items-center space-x-1">
                                    <i class="fas fa-eye text-tv-text-secondary text-sm"></i>
                                    <span class="text-sm text-tv-text-secondary">643</span>
                                </div>
                                <div class="flex items-center space-x-1">
                                    <i class="fas fa-thumbs-down text-tv-red text-sm"></i>
                                    <span class="text-sm text-tv-text-secondary">45%</span>
                                </div>
                            </div>
                            <div class="text-sm text-tv-text-secondary">1ÏãúÍ∞Ñ Ï†Ñ</div>
                        </div>
                        <div class="flex space-x-2">
                            <button onclick="voteOnPrediction('chart3', 'up')"
                                class="flex-1 bg-tv-green hover:bg-green-600 text-white py-2 rounded-lg text-sm font-medium transition-colors">
                                <i class="fas fa-arrow-up mr-1"></i>ÏÉÅÏäπ ÎèôÏ°∞
                            </button>
                            <button onclick="voteOnPrediction('chart3', 'down')"
                                class="flex-1 bg-tv-red hover:bg-red-600 text-white py-2 rounded-lg text-sm font-medium transition-colors">
                                <i class="fas fa-arrow-down mr-1"></i>ÌïòÎùΩ ÎèôÏ°∞
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Clean Statistics Section -->
                <section class="py-20 bg-tv-darker/50 border-t border-tv-border/30">
                    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                        <!-- Section Header -->
                        <div class="text-center mb-16">
                            <h2 class="text-3xl lg:text-4xl font-bold text-tv-text mb-4">
                                ÌîåÎû´Ìèº ÌÜµÍ≥Ñ
                            </h2>
                            <p class="text-lg text-tv-text-secondary max-w-2xl mx-auto">
                                Ïã§ÏãúÍ∞ÑÏúºÎ°ú ÏóÖÎç∞Ïù¥Ìä∏ÎêòÎäî Ìà¨Ïûê ÏÑ±Í≥º ÏßÄÌëú
                            </p>
                        </div>

                        <!-- Enhanced Statistics Grid -->
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                            <!-- Active Predictions -->
                            <div
                                class="group relative bg-gradient-to-br from-tv-card/60 to-tv-card/30 backdrop-blur-lg border border-tv-border/30 rounded-2xl p-6 text-center hover:shadow-xl hover:shadow-tv-blue/10 transition-all duration-500 hover:scale-105">
                                <div
                                    class="absolute inset-0 bg-gradient-to-br from-tv-blue/5 to-transparent rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-500">
                                </div>
                                <div class="relative z-10">
                                    <div
                                        class="w-16 h-16 mx-auto mb-6 bg-gradient-to-br from-tv-blue/20 to-tv-blue/10 rounded-2xl flex items-center justify-center shadow-lg">
                                        <i class="fas fa-chart-line text-2xl text-tv-blue"></i>
                                    </div>
                                    <div class="text-4xl font-black text-tv-text mb-3 tracking-tight">1,247</div>
                                    <div
                                        class="text-base font-semibold text-tv-text-secondary uppercase tracking-wider">
                                        ÌôúÏÑ± ÏòàÏ∏°</div>
                                    <div class="mt-3 text-xs text-tv-text-tertiary">Ïã§ÏãúÍ∞Ñ ÏóÖÎç∞Ïù¥Ìä∏</div>
                                </div>
                            </div>

                            <!-- Average Accuracy - Enhanced with Boss Requirements -->
                            <div
                                class="group relative bg-gradient-to-br from-tv-card/60 to-tv-card/30 backdrop-blur-lg border border-tv-border/30 rounded-2xl p-6 text-center hover:shadow-xl hover:shadow-tv-green/10 transition-all duration-500 hover:scale-105">
                                <div
                                    class="absolute inset-0 bg-gradient-to-br from-tv-green/5 to-transparent rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-500">
                                </div>
                                <div class="relative z-10">
                                    <div
                                        class="w-16 h-16 mx-auto mb-6 bg-gradient-to-br from-tv-green/20 to-tv-green/10 rounded-2xl flex items-center justify-center shadow-lg">
                                        <i class="fas fa-trophy text-2xl text-tv-green"></i>
                                    </div>
                                    <div class="text-4xl font-black text-tv-green mb-3 tracking-tight">89.5%</div>
                                    <div
                                        class="text-base font-semibold text-tv-text-secondary uppercase tracking-wider">
                                        ÌöåÏõê ÏòàÏ∏° Ï†ïÌôïÎèÑ</div>
                                    <div class="mt-3 text-xs text-tv-text-tertiary">Ïã§ÏãúÍ∞Ñ ÏóÖÎç∞Ïù¥Ìä∏</div>
                                    <div
                                        class="mt-2 px-3 py-1 bg-tv-green/20 rounded-full text-xs font-medium text-tv-green">
                                        Ïã†Í∑ú Î∞©Î¨∏ÏûêÎèÑ ÏâΩÍ≤å Ïù¥Ìï¥!
                                    </div>
                                </div>
                            </div>

                            <!-- Participating Users -->
                            <div
                                class="group relative bg-gradient-to-br from-tv-card/60 to-tv-card/30 backdrop-blur-lg border border-tv-border/30 rounded-2xl p-6 text-center hover:shadow-xl hover:shadow-tv-yellow/10 transition-all duration-500 hover:scale-105">
                                <div
                                    class="absolute inset-0 bg-gradient-to-br from-tv-yellow/5 to-transparent rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-500">
                                </div>
                                <div class="relative z-10">
                                    <div
                                        class="w-16 h-16 mx-auto mb-6 bg-gradient-to-br from-tv-yellow/20 to-tv-yellow/10 rounded-2xl flex items-center justify-center shadow-lg">
                                        <i class="fas fa-users text-2xl text-tv-yellow"></i>
                                    </div>
                                    <div class="text-4xl font-black text-tv-text mb-3 tracking-tight">3,421</div>
                                    <div
                                        class="text-base font-semibold text-tv-text-secondary uppercase tracking-wider">
                                        Ï∞∏Ïó¨ ÏÇ¨Ïö©Ïûê</div>
                                    <div class="mt-3 text-xs text-tv-text-tertiary">ÌôúÏÑ± Ìä∏Î†àÏù¥Îçî</div>
                                </div>
                            </div>

                            <!-- Average Returns -->
                            <div
                                class="group relative bg-gradient-to-br from-tv-card/60 to-tv-card/30 backdrop-blur-lg border border-tv-border/30 rounded-2xl p-6 text-center hover:shadow-xl hover:shadow-tv-green/10 transition-all duration-500 hover:scale-105">
                                <div
                                    class="absolute inset-0 bg-gradient-to-br from-tv-green/5 to-transparent rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-500">
                                </div>
                                <div class="relative z-10">
                                    <div
                                        class="w-16 h-16 mx-auto mb-6 bg-gradient-to-br from-tv-green/20 to-tv-green/10 rounded-2xl flex items-center justify-center shadow-lg">
                                        <i class="fas fa-trending-up text-2xl text-tv-green"></i>
                                    </div>
                                    <div class="text-4xl font-black text-tv-green mb-3 tracking-tight">+245%</div>
                                    <div
                                        class="text-base font-semibold text-tv-text-secondary uppercase tracking-wider">
                                        ÌèâÍ∑† ÏàòÏùµÎ•†</div>
                                    <div class="mt-3 text-xs text-tv-text-tertiary">Ïó∞Í∞Ñ Í∏∞Ï§Ä</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Chart Explanation Section for New Users -->
                <section class="py-12 bg-tv-card/30">
                    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
                        <div class="text-center mb-12">
                            <div class="inline-flex items-center space-x-3 mb-4">
                                <i class="fas fa-lightbulb text-tv-yellow text-2xl"></i>
                                <h2 class="text-2xl lg:text-3xl font-bold text-tv-text">Ï∞®Ìä∏ ÏùΩÎäî Î∞©Î≤ï</h2>
                            </div>
                            <p class="text-lg text-tv-text-secondary">Ïã†Í∑ú Î∞©Î¨∏ÏûêÎ•º ÏúÑÌïú Ï∞®Ìä∏ Í∞ÄÏù¥Îìú</p>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                            <!-- Actual Data Line Explanation -->
                            <div class="bg-tv-card border border-tv-border rounded-xl p-6">
                                <div class="flex items-center space-x-3 mb-4">
                                    <div class="w-4 h-4 bg-gradient-to-r from-tv-blue to-blue-400 rounded"></div>
                                    <h3 class="text-lg font-semibold text-tv-text">Ïã§Ï†ú Îç∞Ïù¥ÌÑ∞ ÎùºÏù∏</h3>
                                </div>
                                <p class="text-tv-text-secondary mb-3">
                                    ÌååÎûÄÏÉâ Ïã§ÏÑ†ÏúºÎ°ú ÌëúÏãúÎêòÎäî Ïã§Ï†ú ÏãúÏû• Îç∞Ïù¥ÌÑ∞ÏûÖÎãàÎã§.
                                </p>
                                <ul class="text-sm text-tv-text-secondary space-y-2">
                                    <li>‚Ä¢ Ïã§ÏãúÍ∞Ñ Ï£ºÏãù/ÏïîÌò∏ÌôîÌèê Í∞ÄÍ≤©</li>
                                    <li>‚Ä¢ Í≤ÄÏ¶ùÎêú ÎßàÏºì Îç∞Ïù¥ÌÑ∞</li>
                                    <li>‚Ä¢ Í≥ºÍ±∞ ÏÑ±Í≥º Í∏∞Î°ù</li>
                                </ul>
                            </div>

                            <!-- Prediction Line Explanation -->
                            <div class="bg-tv-card border border-tv-border rounded-xl p-6">
                                <div class="flex items-center space-x-3 mb-4">
                                    <div
                                        class="w-4 h-4 bg-gradient-to-r from-orange-500 to-orange-400 rounded border border-dashed border-white/30">
                                    </div>
                                    <h3 class="text-lg font-semibold text-tv-text">ÌöåÏõê ÏòàÏ∏° ÎùºÏù∏</h3>
                                </div>
                                <p class="text-tv-text-secondary mb-3">
                                    Ï£ºÌô©ÏÉâ Ï†êÏÑ†ÏúºÎ°ú ÌëúÏãúÎêòÎäî ÏÇ¨Ïö©Ïûê ÏòàÏ∏° Îç∞Ïù¥ÌÑ∞ÏûÖÎãàÎã§.
                                </p>
                                <ul class="text-sm text-tv-text-secondary space-y-2">
                                    <li>‚Ä¢ Ïª§ÎÆ§ÎãàÌã∞ ÏòàÏ∏° ÌèâÍ∑†</li>
                                    <li>‚Ä¢ <span class="text-tv-green font-semibold">89.5% ÌèâÍ∑† Ï†ïÌôïÎèÑ</span></li>
                                    <li>‚Ä¢ ÎØ∏Îûò Í∞ÄÍ≤© Ï†ÑÎßù</li>
                                </ul>
                            </div>
                        </div>

                        <!-- Key Benefits -->
                        <div
                            class="mt-8 bg-gradient-to-r from-tv-green/10 to-tv-blue/10 border border-tv-green/20 rounded-xl p-6">
                            <div class="text-center">
                                <h3 class="text-lg font-semibold text-tv-text mb-3">
                                    <i class="fas fa-trophy text-tv-green mr-2"></i>
                                    ÌöåÏõê ÏòàÏ∏° Ï†ïÌôïÎèÑ 89.5%
                                </h3>
                                <p class="text-tv-text-secondary">
                                    Îëê ÎùºÏù∏ÏùÑ ÎπÑÍµêÌïòÏó¨ ÏòàÏ∏°Ïùò Ï†ïÌôïÏÑ±ÏùÑ ÌôïÏù∏ÌïòÍ≥†, Ìà¨Ïûê Í≤∞Ï†ïÏóê ÌôúÏö©ÌïòÏÑ∏Ïöî.
                                    Ïã†Í∑ú Î∞©Î¨∏ÏûêÎèÑ ÏâΩÍ≤å Ïù¥Ìï¥Ìï† Ïàò ÏûàÎèÑÎ°ù ÏÑ§Í≥ÑÎêòÏóàÏäµÎãàÎã§.
                                </p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Clean Footer -->
                <footer class="bg-tv-darker border-t border-tv-border/30">
                    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
                        <!-- Top Section -->
                        <div class="text-center mb-12">
                            <div class="flex items-center justify-center space-x-3 mb-4">
                                <div class="w-10 h-10 bg-tv-blue rounded-xl flex items-center justify-center">
                                    <i class="fas fa-chart-line text-white"></i>
                                </div>
                                <h3 class="text-2xl font-bold text-tv-text">StockChart</h3>
                            </div>
                            <p class="text-tv-text-secondary max-w-md mx-auto leading-relaxed">
                                ÎØ∏ÎûòÏùò Ï£ºÏãù Í∞ÄÍ≤©ÏùÑ ÏòàÏ∏°ÌïòÍ≥† Í≥µÏú†ÌïòÎäî ÌîÑÎ¶¨ÎØ∏ÏóÑ Ìà¨Ïûê ÌîåÎû´Ìèº
                            </p>
                        </div>

                        <!-- Main Footer Content -->
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-12 mb-12">
                            <!-- Services -->
                            <div>
                                <h4 class="text-lg font-semibold text-tv-text mb-6">ÏÑúÎπÑÏä§</h4>
                                <ul class="space-y-4">
                                    <li><a href="charts.html"
                                            class="text-tv-text-secondary hover:text-tv-blue transition-colors">Ï∞®Ìä∏
                                            Î≥¥Îìú</a></li>
                                    <li><a href="prediction.html"
                                            class="text-tv-text-secondary hover:text-tv-blue transition-colors">ÏòàÏ∏°ÌïòÍ∏∞</a>
                                    </li>
                                    <li><a href="my-predictions.html"
                                            class="text-tv-text-secondary hover:text-tv-blue transition-colors">ÎÇ¥ ÏòàÏ∏°</a>
                                    </li>
                                    <li><a href="ranking.html"
                                            class="text-tv-text-secondary hover:text-tv-blue transition-colors">Îû≠ÌÇπ</a>
                                    </li>
                                    <li><a href="events.html"
                                            class="text-tv-text-secondary hover:text-tv-blue transition-colors">Ïù¥Î≤§Ìä∏</a>
                                    </li>
                                </ul>
                            </div>

                            <!-- Support -->
                            <div>
                                <h4 class="text-lg font-semibold text-tv-text mb-6">Í≥†Í∞ùÏßÄÏõê</h4>
                                <ul class="space-y-4">
                                    <li><a href="#"
                                            class="text-tv-text-secondary hover:text-tv-green transition-colors">FAQ</a>
                                    </li>
                                    <li><a href="#"
                                            class="text-tv-text-secondary hover:text-tv-green transition-colors">Î¨∏ÏùòÌïòÍ∏∞</a>
                                    </li>
                                    <li><a href="#"
                                            class="text-tv-text-secondary hover:text-tv-green transition-colors">Ïù¥Ïö©ÏïΩÍ¥Ä</a>
                                    </li>
                                    <li><a href="#"
                                            class="text-tv-text-secondary hover:text-tv-green transition-colors">Í∞úÏù∏Ï†ïÎ≥¥Ï≤òÎ¶¨Î∞©Ïπ®</a>
                                    </li>
                                </ul>
                            </div>

                            <!-- Contact -->
                            <div>
                                <h4 class="text-lg font-semibold text-tv-text mb-6">Ïó∞ÎùΩÏ≤ò</h4>
                                <div class="space-y-4 text-tv-text-secondary">
                                    <div class="flex items-center space-x-3">
                                        <i class="fas fa-envelope text-tv-blue w-5"></i>
                                        <span>support@stockchart.kr</span>
                                    </div>
                                    <div class="flex items-center space-x-3">
                                        <i class="fas fa-phone text-tv-green w-5"></i>
                                        <span>02-1234-5678</span>
                                    </div>
                                    <div class="flex items-start space-x-3">
                                        <i class="fas fa-map-marker-alt text-tv-yellow w-5 mt-1"></i>
                                        <span>ÏÑúÏö∏Ïãú Í∞ïÎÇ®Íµ¨ ÌÖåÌó§ÎûÄÎ°ú 123</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Social Links -->
                        <div class="flex items-center justify-center space-x-6 mb-8">
                            <a href="#"
                                class="w-10 h-10 bg-tv-card hover:bg-tv-blue rounded-lg flex items-center justify-center text-tv-text-secondary hover:text-white transition-all duration-300">
                                <i class="fab fa-facebook"></i>
                            </a>
                            <a href="#"
                                class="w-10 h-10 bg-tv-card hover:bg-tv-blue rounded-lg flex items-center justify-center text-tv-text-secondary hover:text-white transition-all duration-300">
                                <i class="fab fa-twitter"></i>
                            </a>
                            <a href="#"
                                class="w-10 h-10 bg-tv-card hover:bg-tv-blue rounded-lg flex items-center justify-center text-tv-text-secondary hover:text-white transition-all duration-300">
                                <i class="fab fa-instagram"></i>
                            </a>
                            <a href="#"
                                class="w-10 h-10 bg-tv-card hover:bg-tv-blue rounded-lg flex items-center justify-center text-tv-text-secondary hover:text-white transition-all duration-300">
                                <i class="fab fa-youtube"></i>
                            </a>
                        </div>

                        <!-- Footer Bottom -->
                        <div class="border-t border-tv-border/20 pt-8 text-center text-tv-text-secondary">
                            <p>&copy; 2025 StockChart. All rights reserved.</p>
                        </div>
                    </div>
                </footer>

                <!-- Login Modal -->
                <div id="loginModal"
                    class="fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm z-50 hidden flex items-center justify-center p-4">
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-12 mb-16">
                        <!-- Services Section -->
                        <div class="space-y-6">
                            <h4 class="text-xl font-bold text-tv-text mb-6 relative">
                                ÏÑúÎπÑÏä§
                                <div
                                    class="absolute -bottom-2 left-0 w-8 h-0.5 bg-gradient-to-r from-tv-blue to-tv-green rounded-full">
                                </div>
                            </h4>
                            <ul class="space-y-4">
                                <li>
                                    <a href="charts.html"
                                        class="group flex items-center space-x-3 text-tv-text-secondary hover:text-tv-blue transition-all duration-300">
                                        <i
                                            class="fas fa-chart-line w-5 text-center group-hover:scale-110 transition-transform duration-300"></i>
                                        <span class="group-hover:translate-x-1 transition-transform duration-300">Ï∞®Ìä∏
                                            Î≥¥Îìú</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="prediction.html"
                                        class="group flex items-center space-x-3 text-tv-text-secondary hover:text-tv-blue transition-all duration-300">
                                        <i
                                            class="fas fa-lightbulb w-5 text-center group-hover:scale-110 transition-transform duration-300"></i>
                                        <span
                                            class="group-hover:translate-x-1 transition-transform duration-300">ÏòàÏ∏°ÌïòÍ∏∞</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="my-predictions.html"
                                        class="group flex items-center space-x-3 text-tv-text-secondary hover:text-tv-blue transition-all duration-300">
                                        <i
                                            class="fas fa-user-chart w-5 text-center group-hover:scale-110 transition-transform duration-300"></i>
                                        <span class="group-hover:translate-x-1 transition-transform duration-300">ÎÇ¥
                                            ÏòàÏ∏°</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="ranking.html"
                                        class="group flex items-center space-x-3 text-tv-text-secondary hover:text-tv-blue transition-all duration-300">
                                        <i
                                            class="fas fa-trophy w-5 text-center group-hover:scale-110 transition-transform duration-300"></i>
                                        <span
                                            class="group-hover:translate-x-1 transition-transform duration-300">Îû≠ÌÇπ</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="events.html"
                                        class="group flex items-center space-x-3 text-tv-text-secondary hover:text-tv-blue transition-all duration-300">
                                        <i
                                            class="fas fa-calendar w-5 text-center group-hover:scale-110 transition-transform duration-300"></i>
                                        <span
                                            class="group-hover:translate-x-1 transition-transform duration-300">Ïù¥Î≤§Ìä∏</span>
                                    </a>
                                </li>
                            </ul>
                        </div>

                        <!-- Support Section -->
                        <div class="space-y-6">
                            <h4 class="text-xl font-bold text-tv-text mb-6 relative">
                                Í≥†Í∞ùÏßÄÏõê
                                <div
                                    class="absolute -bottom-2 left-0 w-8 h-0.5 bg-gradient-to-r from-tv-green to-tv-yellow rounded-full">
                                </div>
                            </h4>
                            <ul class="space-y-4">
                                <li>
                                    <a href="#"
                                        class="group flex items-center space-x-3 text-tv-text-secondary hover:text-tv-green transition-all duration-300">
                                        <i
                                            class="fas fa-question-circle w-5 text-center group-hover:scale-110 transition-transform duration-300"></i>
                                        <span
                                            class="group-hover:translate-x-1 transition-transform duration-300">FAQ</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="#"
                                        class="group flex items-center space-x-3 text-tv-text-secondary hover:text-tv-green transition-all duration-300">
                                        <i
                                            class="fas fa-headset w-5 text-center group-hover:scale-110 transition-transform duration-300"></i>
                                        <span
                                            class="group-hover:translate-x-1 transition-transform duration-300">Î¨∏ÏùòÌïòÍ∏∞</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="#"
                                        class="group flex items-center space-x-3 text-tv-text-secondary hover:text-tv-green transition-all duration-300">
                                        <i
                                            class="fas fa-file-contract w-5 text-center group-hover:scale-110 transition-transform duration-300"></i>
                                        <span
                                            class="group-hover:translate-x-1 transition-transform duration-300">Ïù¥Ïö©ÏïΩÍ¥Ä</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="#"
                                        class="group flex items-center space-x-3 text-tv-text-secondary hover:text-tv-green transition-all duration-300">
                                        <i
                                            class="fas fa-shield-alt w-5 text-center group-hover:scale-110 transition-transform duration-300"></i>
                                        <span
                                            class="group-hover:translate-x-1 transition-transform duration-300">Í∞úÏù∏Ï†ïÎ≥¥Ï≤òÎ¶¨Î∞©Ïπ®</span>
                                    </a>
                                </li>
                            </ul>
                        </div>

                        <!-- Contact Section -->
                        <div class="space-y-6">
                            <h4 class="text-xl font-bold text-tv-text mb-6 relative">
                                Ïó∞ÎùΩÏ≤ò
                                <div
                                    class="absolute -bottom-2 left-0 w-8 h-0.5 bg-gradient-to-r from-tv-yellow to-tv-red rounded-full">
                                </div>
                            </h4>
                            <div class="space-y-6">
                                <div
                                    class="group flex items-start space-x-4 p-4 bg-tv-card/30 rounded-xl backdrop-blur-sm hover:bg-tv-card/50 transition-all duration-300">
                                    <div
                                        class="w-10 h-10 bg-tv-blue/20 rounded-xl flex items-center justify-center flex-shrink-0 group-hover:scale-110 transition-transform duration-300">
                                        <i class="fas fa-envelope text-tv-blue"></i>
                                    </div>
                                    <div>
                                        <p class="text-sm text-tv-text-secondary mb-1">Ïù¥Î©îÏùº</p>
                                        <p class="text-tv-text font-medium">support@stockchart.kr</p>
                                    </div>
                                </div>

                                <div
                                    class="group flex items-start space-x-4 p-4 bg-tv-card/30 rounded-xl backdrop-blur-sm hover:bg-tv-card/50 transition-all duration-300">
                                    <div
                                        class="w-10 h-10 bg-tv-green/20 rounded-xl flex items-center justify-center flex-shrink-0 group-hover:scale-110 transition-transform duration-300">
                                        <i class="fas fa-phone text-tv-green"></i>
                                    </div>
                                    <div>
                                        <p class="text-sm text-tv-text-secondary mb-1">Ï†ÑÌôîÎ≤àÌò∏</p>
                                        <p class="text-tv-text font-medium">02-1234-5678</p>
                                    </div>
                                </div>

                                <div
                                    class="group flex items-start space-x-4 p-4 bg-tv-card/30 rounded-xl backdrop-blur-sm hover:bg-tv-card/50 transition-all duration-300">
                                    <div
                                        class="w-10 h-10 bg-tv-yellow/20 rounded-xl flex items-center justify-center flex-shrink-0 group-hover:scale-110 transition-transform duration-300">
                                        <i class="fas fa-map-marker-alt text-tv-yellow"></i>
                                    </div>
                                    <div>
                                        <p class="text-sm text-tv-text-secondary mb-1">Ï£ºÏÜå</p>
                                        <p class="text-tv-text font-medium">ÏÑúÏö∏Ïãú Í∞ïÎÇ®Íµ¨<br>ÌÖåÌó§ÎûÄÎ°ú 123</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Newsletter Section -->
                        <div class="space-y-6">
                            <h4 class="text-xl font-bold text-tv-text mb-6 relative">
                                Îâ¥Ïä§Î†àÌÑ∞
                                <div
                                    class="absolute -bottom-2 left-0 w-8 h-0.5 bg-gradient-to-r from-tv-red to-tv-blue rounded-full">
                                </div>
                            </h4>
                            <div class="space-y-4">
                                <p class="text-tv-text-secondary leading-relaxed">
                                    ÏµúÏã† ÏãúÏû• ÎèôÌñ•Í≥º Ìà¨Ïûê Ïù∏ÏÇ¨Ïù¥Ìä∏Î•º Î∞õÏïÑÎ≥¥ÏÑ∏Ïöî
                                </p>
                                <div class="space-y-3">
                                    <input type="email" placeholder="Ïù¥Î©îÏùº Ï£ºÏÜå"
                                        class="w-full px-4 py-3 bg-tv-card border border-tv-border rounded-xl text-tv-text placeholder-tv-text-secondary focus:border-tv-blue focus:outline-none focus:ring-2 focus:ring-tv-blue/20 transition-all duration-300">
                                    <button
                                        class="w-full bg-gradient-to-r from-tv-blue to-tv-green hover:from-tv-blue hover:to-tv-blue text-white py-3 rounded-xl font-medium transition-all duration-300 transform hover:scale-105 hover:shadow-lg hover:shadow-tv-blue/25">
                                        <i class="fas fa-paper-plane mr-2"></i>
                                        Íµ¨ÎèÖÌïòÍ∏∞
                                    </button>
                                </div>
                                <div class="flex items-center space-x-2 text-xs text-tv-text-secondary">
                                    <i class="fas fa-shield-check text-tv-green"></i>
                                    <span>Í∞úÏù∏Ï†ïÎ≥¥Îäî ÏïàÏ†ÑÌïòÍ≤å Î≥¥Ìò∏Îê©ÎãàÎã§</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Enhanced Footer Bottom -->
                    <div class="border-t border-tv-border/30 pt-8">
                        <div class="flex flex-col lg:flex-row items-center justify-between space-y-6 lg:space-y-0">
                            <div
                                class="flex flex-col sm:flex-row items-center space-y-2 sm:space-y-0 sm:space-x-6 text-tv-text-secondary">
                                <p>&copy; 2025 StockChart. All rights reserved.</p>
                                <div class="flex items-center space-x-4 text-sm">
                                    <span class="flex items-center space-x-1">
                                        <i class="fas fa-shield-alt text-tv-green"></i>
                                        <span>SSL Î≥¥Ïïà</span>
                                    </span>
                                    <span class="flex items-center space-x-1">
                                        <i class="fas fa-server text-tv-blue"></i>
                                        <span>99.9% ÏóÖÌÉÄÏûÑ</span>
                                    </span>
                                </div>
                            </div>

                            <div class="flex items-center space-x-6">
                                <div class="flex items-center space-x-2 text-sm text-tv-text-secondary">
                                    <i class="fas fa-globe text-tv-blue"></i>
                                    <span>ÌïúÍµ≠Ïñ¥</span>
                                    <i class="fas fa-chevron-down"></i>
                                </div>
                                <div class="flex items-center space-x-2 text-sm text-tv-text-secondary">
                                    <i class="fas fa-won-sign text-tv-green"></i>
                                    <span>KRW</span>
                                    <i class="fas fa-chevron-down"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                </footer>

                <!-- Login Modal -->
                <div id="loginModal"
                    class="fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm z-50 hidden flex items-center justify-center p-4">
                    <div class="bg-tv-bg-secondary rounded-2xl shadow-2xl w-full max-w-md border border-tv-border-light overflow-hidden transform transition-all duration-300 scale-95 opacity-0"
                        id="loginModalContent">
                        <!-- Header -->
                        <div class="px-8 pt-8 pb-6">
                            <div class="flex items-center justify-between mb-6">
                                <div class="flex items-center space-x-3">
                                    <div class="w-10 h-10 bg-tv-blue rounded-xl flex items-center justify-center">
                                        <i class="fas fa-chart-line text-white text-lg"></i>
                                    </div>
                                    <h2 class="text-2xl font-bold text-tv-text-primary">Î°úÍ∑∏Ïù∏</h2>
                                </div>
                                <button onclick="hideLoginModal()"
                                    class="text-tv-text-secondary hover:text-tv-text-primary transition-colors p-2 hover:bg-tv-bg-tertiary rounded-lg">
                                    <i class="fas fa-times text-xl"></i>
                                </button>
                            </div>
                            <p class="text-tv-text-secondary">Í≥ÑÏ†ïÏóê Î°úÍ∑∏Ïù∏ÌïòÏó¨ Î™®Îì† Í∏∞Îä•ÏùÑ Ïù¥Ïö©ÌïòÏÑ∏Ïöî</p>
                        </div>

                        <!-- Form -->
                        <div class="px-8 pb-8">
                            <form id="loginForm" class="space-y-6">
                                <div class="space-y-4">
                                    <div class="relative">
                                        <label class="block text-sm font-medium text-tv-text-primary mb-2">Ïù¥Î©îÏùº</label>
                                        <div class="relative">
                                            <input type="email" id="loginEmail"
                                                class="w-full px-4 py-3 bg-tv-bg-primary border border-tv-border rounded-xl text-tv-text-primary placeholder-tv-text-tertiary focus:border-tv-blue focus:ring-2 focus:ring-tv-blue focus:ring-opacity-20 focus:outline-none transition-all duration-200"
                                                placeholder="Ïù¥Î©îÏùºÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî" required>
                                            <div class="absolute inset-y-0 right-0 pr-3 flex items-center">
                                                <i class="fas fa-envelope text-tv-text-tertiary"></i>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="relative">
                                        <label class="block text-sm font-medium text-tv-text-primary mb-2">ÎπÑÎ∞ÄÎ≤àÌò∏</label>
                                        <div class="relative">
                                            <input type="password" id="loginPassword"
                                                class="w-full px-4 py-3 bg-tv-bg-primary border border-tv-border rounded-xl text-tv-text-primary placeholder-tv-text-tertiary focus:border-tv-blue focus:ring-2 focus:ring-tv-blue focus:ring-opacity-20 focus:outline-none transition-all duration-200"
                                                placeholder="ÎπÑÎ∞ÄÎ≤àÌò∏Î•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî" required>
                                            <div class="absolute inset-y-0 right-0 pr-3 flex items-center">
                                                <button type="button"
                                                    onclick="togglePasswordVisibility('loginPassword')"
                                                    class="text-tv-text-tertiary hover:text-tv-text-secondary">
                                                    <i class="fas fa-eye" id="loginPasswordEye"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="flex items-center justify-between">
                                    <label class="flex items-center space-x-2 cursor-pointer">
                                        <input type="checkbox"
                                            class="w-4 h-4 text-tv-blue bg-tv-bg-primary border-tv-border rounded focus:ring-tv-blue focus:ring-2 focus:ring-opacity-20">
                                        <span class="text-sm text-tv-text-secondary">Î°úÍ∑∏Ïù∏ ÏÉÅÌÉú Ïú†ÏßÄ</span>
                                    </label>
                                    <a href="#" class="text-sm text-tv-blue hover:text-blue-400 transition-colors">ÎπÑÎ∞ÄÎ≤àÌò∏
                                        Ï∞æÍ∏∞</a>
                                </div>

                                <button type="submit"
                                    class="w-full bg-gradient-to-r from-tv-blue to-blue-600 hover:from-blue-600 hover:to-tv-blue text-white font-semibold py-3 px-6 rounded-xl transition-all duration-200 transform hover:scale-[1.02] hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-tv-blue focus:ring-opacity-50">
                                    <i class="fas fa-sign-in-alt mr-2"></i>Î°úÍ∑∏Ïù∏
                                </button>
                            </form>

                            <!-- Divider -->
                            <div class="flex items-center my-6">
                                <div class="flex-1 border-t border-tv-border"></div>
                                <span class="px-4 text-tv-text-tertiary text-sm">ÎòêÎäî</span>
                                <div class="flex-1 border-t border-tv-border"></div>
                            </div>

                            <!-- Social Login -->
                            <div class="space-y-3">
                                <button onclick="loginWithGoogle()"
                                    class="w-full flex items-center justify-center px-6 py-3 bg-white hover:bg-gray-50 text-gray-700 font-medium rounded-xl border border-gray-200 transition-all duration-200 transform hover:scale-[1.02] hover:shadow-md">
                                    <svg class="w-5 h-5 mr-3" viewBox="0 0 24 24">
                                        <path fill="#4285F4"
                                            d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" />
                                        <path fill="#34A853"
                                            d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" />
                                        <path fill="#FBBC05"
                                            d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" />
                                        <path fill="#EA4335"
                                            d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" />
                                    </svg>
                                    GoogleÎ°ú Î°úÍ∑∏Ïù∏
                                </button>

                                <button onclick="loginWithApple()"
                                    class="w-full flex items-center justify-center px-6 py-3 bg-black hover:bg-gray-900 text-white font-medium rounded-xl transition-all duration-200 transform hover:scale-[1.02] hover:shadow-md">
                                    <i class="fab fa-apple text-xl mr-3"></i>
                                    AppleÎ°ú Î°úÍ∑∏Ïù∏
                                </button>
                            </div>

                            <!-- Footer -->
                            <div class="mt-6 text-center">
                                <p class="text-tv-text-secondary">
                                    Í≥ÑÏ†ïÏù¥ ÏóÜÏúºÏã†Í∞ÄÏöî?
                                    <button onclick="showSignupModal()"
                                        class="text-tv-blue hover:text-blue-400 font-medium transition-colors">
                                        ÌöåÏõêÍ∞ÄÏûÖ
                                    </button>
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Signup Modal -->
                <div id="signupModal"
                    class="fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm z-50 hidden flex items-center justify-center p-4">
                    <div class="bg-tv-bg-secondary rounded-2xl shadow-2xl w-full max-w-md border border-tv-border-light overflow-hidden transform transition-all duration-300 scale-95 opacity-0"
                        id="signupModalContent">
                        <!-- Header -->
                        <div class="px-8 pt-8 pb-6">
                            <div class="flex items-center justify-between mb-6">
                                <div class="flex items-center space-x-3">
                                    <div
                                        class="w-10 h-10 bg-gradient-to-r from-tv-green to-emerald-500 rounded-xl flex items-center justify-center">
                                        <i class="fas fa-user-plus text-white text-lg"></i>
                                    </div>
                                    <h2 class="text-2xl font-bold text-tv-text-primary">ÌöåÏõêÍ∞ÄÏûÖ</h2>
                                </div>
                                <button onclick="hideSignupModal()"
                                    class="text-tv-text-secondary hover:text-tv-text-primary transition-colors p-2 hover:bg-tv-bg-tertiary rounded-lg">
                                    <i class="fas fa-times text-xl"></i>
                                </button>
                            </div>
                            <p class="text-tv-text-secondary">StockChartÏóê Í∞ÄÏûÖÌïòÍ≥† ÏòàÏ∏°ÏùÑ ÏãúÏûëÌïòÏÑ∏Ïöî</p>
                        </div>

                        <!-- Form -->
                        <div class="px-8 pb-8">
                            <!-- Social Signup First -->
                            <div class="space-y-3 mb-6">
                                <button onclick="signupWithGoogle()"
                                    class="w-full flex items-center justify-center px-6 py-3 bg-white hover:bg-gray-50 text-gray-700 font-medium rounded-xl border border-gray-200 transition-all duration-200 transform hover:scale-[1.02] hover:shadow-md">
                                    <svg class="w-5 h-5 mr-3" viewBox="0 0 24 24">
                                        <path fill="#4285F4"
                                            d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" />
                                        <path fill="#34A853"
                                            d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" />
                                        <path fill="#FBBC05"
                                            d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" />
                                        <path fill="#EA4335"
                                            d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" />
                                    </svg>
                                    GoogleÎ°ú Í∞ÄÏûÖ
                                </button>

                                <button onclick="signupWithApple()"
                                    class="w-full flex items-center justify-center px-6 py-3 bg-black hover:bg-gray-900 text-white font-medium rounded-xl transition-all duration-200 transform hover:scale-[1.02] hover:shadow-md">
                                    <i class="fab fa-apple text-xl mr-3"></i>
                                    AppleÎ°ú Í∞ÄÏûÖ
                                </button>
                            </div>

                            <!-- Divider -->
                            <div class="flex items-center my-6">
                                <div class="flex-1 border-t border-tv-border"></div>
                                <span class="px-4 text-tv-text-tertiary text-sm">ÎòêÎäî Ïù¥Î©îÏùºÎ°ú</span>
                                <div class="flex-1 border-t border-tv-border"></div>
                            </div>

                            <form id="signupForm" class="space-y-4">
                                <div class="grid grid-cols-1 gap-4">
                                    <div class="relative">
                                        <label class="block text-sm font-medium text-tv-text-primary mb-2">ÏÇ¨Ïö©ÏûêÎ™Ö</label>
                                        <input type="text" id="signupUsername"
                                            class="w-full px-4 py-3 bg-tv-bg-primary border border-tv-border rounded-xl text-tv-text-primary placeholder-tv-text-tertiary focus:border-tv-blue focus:ring-2 focus:ring-tv-blue focus:ring-opacity-20 focus:outline-none transition-all duration-200"
                                            placeholder="ÏÇ¨Ïö©ÏûêÎ™ÖÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî" required>
                                    </div>

                                    <div class="relative">
                                        <label class="block text-sm font-medium text-tv-text-primary mb-2">Ïù¥Î©îÏùº</label>
                                        <input type="email" id="signupEmail"
                                            class="w-full px-4 py-3 bg-tv-bg-primary border border-tv-border rounded-xl text-tv-text-primary placeholder-tv-text-tertiary focus:border-tv-blue focus:ring-2 focus:ring-tv-blue focus:ring-opacity-20 focus:outline-none transition-all duration-200"
                                            placeholder="Ïù¥Î©îÏùºÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî" required>
                                    </div>

                                    <div class="relative">
                                        <label class="block text-sm font-medium text-tv-text-primary mb-2">ÎπÑÎ∞ÄÎ≤àÌò∏</label>
                                        <div class="relative">
                                            <input type="password" id="signupPassword"
                                                class="w-full px-4 py-3 bg-tv-bg-primary border border-tv-border rounded-xl text-tv-text-primary placeholder-tv-text-tertiary focus:border-tv-blue focus:ring-2 focus:ring-tv-blue focus:ring-opacity-20 focus:outline-none transition-all duration-200"
                                                placeholder="ÎπÑÎ∞ÄÎ≤àÌò∏Î•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî" required>
                                            <div class="absolute inset-y-0 right-0 pr-3 flex items-center">
                                                <button type="button"
                                                    onclick="togglePasswordVisibility('signupPassword')"
                                                    class="text-tv-text-tertiary hover:text-tv-text-secondary">
                                                    <i class="fas fa-eye" id="signupPasswordEye"></i>
                                                </button>
                                            </div>
                                        </div>
                                        <div class="mt-1 text-xs text-tv-text-tertiary">
                                            ÏµúÏÜå 8Ïûê, ÏòÅÎ¨∏, Ïà´Ïûê, ÌäπÏàòÎ¨∏Ïûê Ìè¨Ìï®
                                        </div>
                                    </div>

                                    <div class="relative">
                                        <label class="block text-sm font-medium text-tv-text-primary mb-2">ÎπÑÎ∞ÄÎ≤àÌò∏
                                            ÌôïÏù∏</label>
                                        <input type="password" id="signupPasswordConfirm"
                                            class="w-full px-4 py-3 bg-tv-bg-primary border border-tv-border rounded-xl text-tv-text-primary placeholder-tv-text-tertiary focus:border-tv-blue focus:ring-2 focus:ring-tv-blue focus:ring-opacity-20 focus:outline-none transition-all duration-200"
                                            placeholder="ÎπÑÎ∞ÄÎ≤àÌò∏Î•º Îã§Ïãú ÏûÖÎ†•ÌïòÏÑ∏Ïöî" required>
                                    </div>

                                    <div class="relative">
                                        <label class="block text-sm font-medium text-tv-text-secondary mb-2">Ï∂îÏ≤úÏù∏ ÏΩîÎìú
                                            (ÏÑ†ÌÉùÏÇ¨Ìï≠)</label>
                                        <input type="text" id="referralCode"
                                            class="w-full px-4 py-3 bg-tv-bg-primary border border-tv-border rounded-xl text-tv-text-primary placeholder-tv-text-tertiary focus:border-tv-blue focus:ring-2 focus:ring-tv-blue focus:ring-opacity-20 focus:outline-none transition-all duration-200"
                                            placeholder="Ï∂îÏ≤úÏù∏ ÏΩîÎìú ÏûÖÎ†• (ÏÑ†ÌÉùÏÇ¨Ìï≠)">
                                    </div>
                                </div>

                                <div class="space-y-3 pt-2">
                                    <label class="flex items-start space-x-3 cursor-pointer group">
                                        <input type="checkbox" id="agreeTerms" required
                                            class="w-4 h-4 text-tv-blue bg-tv-bg-primary border-tv-border rounded focus:ring-tv-blue focus:ring-2 focus:ring-opacity-20 mt-0.5">
                                        <span
                                            class="text-sm text-tv-text-secondary group-hover:text-tv-text-primary transition-colors">
                                            <a href="#" class="text-tv-blue hover:text-blue-400">Ïù¥Ïö©ÏïΩÍ¥Ä</a> Î∞è
                                            <a href="#" class="text-tv-blue hover:text-blue-400">Í∞úÏù∏Ï†ïÎ≥¥Ï≤òÎ¶¨Î∞©Ïπ®</a>Ïóê ÎèôÏùòÌï©ÎãàÎã§.
                                        </span>
                                    </label>
                                </div>

                                <button type="submit"
                                    class="w-full bg-gradient-to-r from-tv-green to-emerald-500 hover:from-emerald-500 hover:to-tv-green text-white font-semibold py-3 px-6 rounded-xl transition-all duration-200 transform hover:scale-[1.02] hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-tv-green focus:ring-opacity-50">
                                    <i class="fas fa-user-plus mr-2"></i>ÌöåÏõêÍ∞ÄÏûÖ
                                </button>
                            </form>

                            <!-- Footer -->
                            <div class="mt-6 text-center">
                                <p class="text-tv-text-secondary">
                                    Ïù¥ÎØ∏ Í≥ÑÏ†ïÏù¥ ÏûàÏúºÏã†Í∞ÄÏöî?
                                    <button onclick="showLoginModal()"
                                        class="text-tv-blue hover:text-blue-400 font-medium transition-colors">
                                        Î°úÍ∑∏Ïù∏
                                    </button>
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

                <script src="js/notification.js?v=1.0"></script>
                <script src="js/stock-chart-app.js?v=1.0"></script>
                <script src="js/app.js?v=1.5"></script>
                <script src="js/access-limit.js?v=1.0"></script>

                <!-- Chart Initialization Script -->
                <script>
                    console.log('üöÄ Charts page script loaded!');

                    // ========== GLOBAL VARIABLES ==========
                    // API_BASE_URL is already declared in app.js
                    let marketData = [];
                    let currentDisplayCount = 3;
                    let globalStocks = {}; // Will be populated in initializeChartsPageCharts

                    // ========== UTILITY FUNCTIONS ==========

                    // Wait for page to be fully loaded
                    window.addEventListener('load', function () {
                        console.log('üìä Page fully loaded, starting chart initialization...');

                        // Wait a bit more for all scripts to load
                        setTimeout(() => {
                            console.log('‚è∞ Starting delayed chart initialization...');

                            // Check if LightweightCharts is available
                            if (typeof LightweightCharts === 'undefined') {
                                console.error('‚ùå LightweightCharts not available, loading fallback...');
                                loadLightweightChartsFallback();
                            } else {
                                console.log('‚úÖ LightweightCharts is available, proceeding...');
                                initializeChartsPageCharts();
                            }
                        }, 1000);
                    });

                    function loadLightweightChartsFallback() {
                        console.log('ÔøΩ Loading LightweightCharts fallback...');
                        const script = document.createElement('script');
                        script.src = 'https://cdn.jsdelivr.net/npm/lightweight-charts@4.1.3/dist/lightweight-charts.standalone.production.js';
                        script.onload = function () {
                            console.log('‚úÖ LightweightCharts fallback loaded successfully');
                            setTimeout(() => {
                                initializeChartsPageCharts();
                            }, 500);
                        };
                        script.onerror = function () {
                            console.error('‚ùå Failed to load LightweightCharts fallback');
                        };
                        document.head.appendChild(script);
                    }

                    function initializeChartsPageCharts() {
                        console.log('üìà Starting chart initialization...');

                        // Double-check LightweightCharts availability
                        if (typeof LightweightCharts === 'undefined') {
                            console.error('‚ùå LightweightCharts still not available in initializeChartsPageCharts');
                            return;
                        }

                        console.log('‚úÖ LightweightCharts confirmed available:', typeof LightweightCharts);

                        // Check if chart containers exist
                        const chart1 = document.getElementById('chart-1');
                        const chart2 = document.getElementById('chart-2');
                        const chart3 = document.getElementById('chart-3');

                        console.log('Chart containers found:', {
                            'chart-1': chart1 ? 'YES' : 'NO',
                            'chart-2': chart2 ? 'YES' : 'NO',
                            'chart-3': chart3 ? 'YES' : 'NO'
                        });

                        if (!chart1 && !chart2 && !chart3) {
                            console.error('‚ùå No chart containers found! Make sure chart-1, chart-2, chart-3 exist.');
                            return;
                        }

                        // API Configuration - using global API_BASE_URL

                        // Add cleanup function for chart resources
                        function cleanupCharts() {
                            console.log('üßπ Cleaning up existing charts...');
                            const chartsContainer = document.getElementById('charts-container');
                            if (chartsContainer) {
                                // Find all chart containers and clean up their resources
                                const chartElements = chartsContainer.querySelectorAll('[id^="chart-"]');
                                chartElements.forEach(container => {
                                    if (container._chart) {
                                        try {
                                            container._chart.remove();
                                            console.log(`üóëÔ∏è Cleaned up chart: ${container.id}`);
                                        } catch (error) {
                                            console.warn(`‚ö†Ô∏è Error cleaning up chart ${container.id}:`, error);
                                        }
                                    }
                                    if (container._resizeObserver) {
                                        try {
                                            container._resizeObserver.disconnect();
                                        } catch (error) {
                                            console.warn(`‚ö†Ô∏è Error disconnecting resize observer for ${container.id}:`, error);
                                        }
                                    }
                                });
                            }
                        }

                        // Make cleanup function globally available
                        window.cleanupCharts = cleanupCharts;

                        // Populate global stock symbols by market
                        globalStocks = {
                            crypto: [
                                { symbol: 'BTC', name: 'ÎπÑÌä∏ÏΩîÏù∏', market: 'crypto' },
                                { symbol: 'ETH', name: 'Ïù¥ÎçîÎ¶¨ÏõÄ', market: 'crypto' },
                                { symbol: 'ADA', name: 'Ïπ¥Î•¥Îã§ÎÖ∏', market: 'crypto' },
                                { symbol: 'SOL', name: 'ÏÜîÎùºÎÇò', market: 'crypto' },
                                { symbol: 'XRP', name: 'Î¶¨Ìîå', market: 'crypto' },
                                { symbol: 'DOT', name: 'Ìè¥Ïπ¥Îã∑', market: 'crypto' },
                                { symbol: 'AVAX', name: 'ÏïÑÎ∞úÎûÄÏ≤¥', market: 'crypto' },
                                { symbol: 'LINK', name: 'Ï≤¥Ïù∏ÎßÅÌÅ¨', market: 'crypto' },
                                { symbol: 'MATIC', name: 'Ìè¥Î¶¨Í≥§', market: 'crypto' },
                                { symbol: 'UNI', name: 'Ïú†ÎãàÏä§Ïôë', market: 'crypto' },
                                { symbol: 'LTC', name: 'ÎùºÏù¥Ìä∏ÏΩîÏù∏', market: 'crypto' },
                                { symbol: 'BCH', name: 'ÎπÑÌä∏ÏΩîÏù∏Ï∫êÏãú', market: 'crypto' },
                                { symbol: 'ATOM', name: 'ÏΩîÏä§Î™®Ïä§', market: 'crypto' },
                                { symbol: 'VET', name: 'ÎπÑÏ≤¥Ïù∏', market: 'crypto' },
                                { symbol: 'FIL', name: 'ÌååÏùºÏΩîÏù∏', market: 'crypto' },
                                { symbol: 'TRX', name: 'Ìä∏Î°†', market: 'crypto' },
                                { symbol: 'ETC', name: 'Ïù¥ÎçîÎ¶¨ÏõÄÌÅ¥ÎûòÏãù', market: 'crypto' },
                                { symbol: 'XLM', name: 'Ïä§ÌÖîÎùºÎ£®Î©ò', market: 'crypto' },
                                { symbol: 'ALGO', name: 'ÏïåÍ≥†ÎûúÎìú', market: 'crypto' },
                                { symbol: 'NEAR', name: 'ÎãàÏñ¥ÌîÑÎ°úÌÜ†ÏΩú', market: 'crypto' },
                                { symbol: 'MANA', name: 'ÎîîÏÑºÌä∏Îü¥ÎûúÎìú', market: 'crypto' },
                                { symbol: 'SAND', name: 'ÏÉåÎìúÎ∞ïÏä§', market: 'crypto' },
                                { symbol: 'AAVE', name: 'ÏïÑÎ≤†', market: 'crypto' },
                                { symbol: 'CRV', name: 'Ïª§Î∏å', market: 'crypto' },
                                { symbol: 'COMP', name: 'Ïª¥ÌååÏö¥Îìú', market: 'crypto' }
                            ],
                            korean: [
                                { symbol: '005930.KS', name: 'ÏÇºÏÑ±Ï†ÑÏûê', market: 'korean' },
                                { symbol: '000660.KS', name: 'SKÌïòÏù¥ÎãâÏä§', market: 'korean' },
                                { symbol: '035420.KS', name: 'NAVER', market: 'korean' },
                                { symbol: '051910.KS', name: 'LGÌôîÌïô', market: 'korean' },
                                { symbol: '006400.KS', name: 'ÏÇºÏÑ±SDI', market: 'korean' },
                                { symbol: '035720.KS', name: 'Ïπ¥Ïπ¥Ïò§', market: 'korean' },
                                { symbol: '207940.KS', name: 'ÏÇºÏÑ±Î∞îÏù¥Ïò§Î°úÏßÅÏä§', market: 'korean' },
                                { symbol: '068270.KS', name: 'ÏÖÄÌä∏Î¶¨Ïò®', market: 'korean' },
                                { symbol: '373220.KS', name: 'LGÏóêÎÑàÏßÄÏÜîÎ£®ÏÖò', market: 'korean' },
                                { symbol: '000270.KS', name: 'Í∏∞ÏïÑ', market: 'korean' },
                                { symbol: '005380.KS', name: 'ÌòÑÎåÄÏ∞®', market: 'korean' },
                                { symbol: '012330.KS', name: 'ÌòÑÎåÄÎ™®ÎπÑÏä§', market: 'korean' },
                                { symbol: '003670.KS', name: 'Ìè¨Ïä§ÏΩîÌôÄÎî©Ïä§', market: 'korean' },
                                { symbol: '066570.KS', name: 'LGÏ†ÑÏûê', market: 'korean' },
                                { symbol: '017670.KS', name: 'SKÌÖîÎ†àÏΩ§', market: 'korean' },
                                { symbol: '030200.KS', name: 'KT', market: 'korean' },
                                { symbol: '032830.KS', name: 'ÏÇºÏÑ±ÏÉùÎ™Ö', market: 'korean' },
                                { symbol: '055550.KS', name: 'Ïã†ÌïúÏßÄÏ£º', market: 'korean' },
                                { symbol: '086790.KS', name: 'ÌïòÎÇòÍ∏àÏúµÏßÄÏ£º', market: 'korean' },
                                { symbol: '105560.KS', name: 'KBÍ∏àÏúµ', market: 'korean' },
                                { symbol: '096770.KS', name: 'SKÏù¥ÎÖ∏Î≤†Ïù¥ÏÖò', market: 'korean' },
                                { symbol: '018260.KS', name: 'ÏÇºÏÑ±ÏóêÏä§ÎîîÏóêÏä§', market: 'korean' },
                                { symbol: '028260.KS', name: 'ÏÇºÏÑ±Î¨ºÏÇ∞', market: 'korean' },
                                { symbol: '009150.KS', name: 'ÏÇºÏÑ±Ï†ÑÍ∏∞', market: 'korean' },
                                { symbol: '011070.KS', name: 'LGÏù¥ÎÖ∏ÌÖç', market: 'korean' },
                                { symbol: '034730.KS', name: 'SK', market: 'korean' },
                                { symbol: '036570.KS', name: 'ÏóîÏî®ÏÜåÌîÑÌä∏', market: 'korean' },
                                { symbol: '251270.KS', name: 'ÎÑ∑ÎßàÎ∏î', market: 'korean' },
                                { symbol: '003550.KS', name: 'LG', market: 'korean' },
                                { symbol: '015760.KS', name: 'ÌïúÍµ≠Ï†ÑÎ†•', market: 'korean' }
                            ],
                            us: [
                                { symbol: 'AAPL', name: 'Apple Inc.', market: 'us' },
                                { symbol: 'MSFT', name: 'Microsoft', market: 'us' },
                                { symbol: 'GOOGL', name: 'Alphabet', market: 'us' },
                                { symbol: 'AMZN', name: 'Amazon', market: 'us' },
                                { symbol: 'TSLA', name: 'Tesla', market: 'us' },
                                { symbol: 'NVDA', name: 'NVIDIA', market: 'us' },
                                { symbol: 'META', name: 'Meta', market: 'us' },
                                { symbol: 'NFLX', name: 'Netflix', market: 'us' },
                                { symbol: 'BRK.A', name: 'Berkshire Hathaway', market: 'us' },
                                { symbol: 'JPM', name: 'JPMorgan Chase', market: 'us' },
                                { symbol: 'JNJ', name: 'Johnson & Johnson', market: 'us' },
                                { symbol: 'V', name: 'Visa', market: 'us' },
                                { symbol: 'PG', name: 'Procter & Gamble', market: 'us' },
                                { symbol: 'UNH', name: 'UnitedHealth', market: 'us' },
                                { symbol: 'MA', name: 'Mastercard', market: 'us' },
                                { symbol: 'HD', name: 'Home Depot', market: 'us' },
                                { symbol: 'DIS', name: 'Disney', market: 'us' },
                                { symbol: 'ADBE', name: 'Adobe', market: 'us' },
                                { symbol: 'BAC', name: 'Bank of America', market: 'us' },
                                { symbol: 'CRM', name: 'Salesforce', market: 'us' },
                                { symbol: 'XOM', name: 'Exxon Mobil', market: 'us' },
                                { symbol: 'WMT', name: 'Walmart', market: 'us' },
                                { symbol: 'CVX', name: 'Chevron', market: 'us' },
                                { symbol: 'KO', name: 'Coca-Cola', market: 'us' },
                                { symbol: 'PEP', name: 'PepsiCo', market: 'us' },
                                { symbol: 'TMO', name: 'Thermo Fisher', market: 'us' },
                                { symbol: 'COST', name: 'Costco', market: 'us' },
                                { symbol: 'AVGO', name: 'Broadcom', market: 'us' },
                                { symbol: 'NKE', name: 'Nike', market: 'us' },
                                { symbol: 'ABT', name: 'Abbott Labs', market: 'us' }
                            ],
                            japanese: [
                                { symbol: '7203.T', name: 'ÌÜ†ÏöîÌÉÄÏûêÎèôÏ∞®', market: 'japanese' },
                                { symbol: '6758.T', name: 'ÏÜåÎãàÍ∑∏Î£π', market: 'japanese' },
                                { symbol: '9984.T', name: 'ÏÜåÌîÑÌä∏Î±ÖÌÅ¨Í∑∏Î£π', market: 'japanese' },
                                { symbol: '6861.T', name: 'ÌÇ§ÏóîÏä§', market: 'japanese' },
                                { symbol: '8035.T', name: 'ÎèÑÏøÑÏùºÎ†âÌä∏Î°†', market: 'japanese' },
                                { symbol: '4063.T', name: 'Ïã†ÏóêÏ∏†ÌôîÌïô', market: 'japanese' },
                                { symbol: '6098.T', name: 'Î¶¨Ïø†Î•¥Ìä∏ÌôÄÎî©Ïä§', market: 'japanese' },
                                { symbol: '4519.T', name: 'Ï§ëÏô∏Ï†úÏïΩ', market: 'japanese' },
                                { symbol: '8306.T', name: 'ÎØ∏Ïì∞ÎπÑÏãúUFJÍ∏àÏúµ', market: 'japanese' },
                                { symbol: '9432.T', name: 'NTT', market: 'japanese' },
                                { symbol: '6594.T', name: 'ÎãõÎç¥Ïã†Í≥µ', market: 'japanese' },
                                { symbol: '4568.T', name: 'Îã§Ïù¥Ïù¥ÏπòÏÇ∞ÏøÑ', market: 'japanese' },
                                { symbol: '9434.T', name: 'ÏÜåÌîÑÌä∏Î±ÖÌÅ¨', market: 'japanese' },
                                { symbol: '7974.T', name: 'ÎãåÌÖêÎèÑ', market: 'japanese' },
                                { symbol: '6954.T', name: 'Ìå¨ÌÅ¨ÎùºÏù¥ÏãúÏä§', market: 'japanese' },
                                { symbol: '8058.T', name: 'ÎØ∏Ïì∞ÎπÑÏãúÏÉÅÏÇ¨', market: 'japanese' },
                                { symbol: '8031.T', name: 'ÎØ∏Ïì∞Ïù¥Î¨ºÏÇ∞', market: 'japanese' },
                                { symbol: '7267.T', name: 'ÌòºÎã§Í∏∞Ïó∞', market: 'japanese' },
                                { symbol: '9983.T', name: 'Ìå®Ïä§Ìä∏Î¶¨ÌÖåÏùºÎßÅ', market: 'japanese' },
                                { symbol: '4502.T', name: 'Îã§ÏºÄÎã§ÏïΩÌíà', market: 'japanese' },
                                { symbol: '8766.T', name: 'ÎèÑÏøÑÏÑºÏ∏ÑÎ¶¨', market: 'japanese' },
                                { symbol: '6367.T', name: 'Îã§Ïù¥ÌÇ®Í≥µÏóÖ', market: 'japanese' },
                                { symbol: '4661.T', name: 'Ïò§Î¶¨ÏóîÌÉàÎûúÎìú', market: 'japanese' },
                                { symbol: '6902.T', name: 'Îç¥ÏÜå', market: 'japanese' },
                                { symbol: '6178.T', name: 'ÏùºÎ≥∏Ïö∞Ï†ïÌôÄÎî©Ïä§', market: 'japanese' },
                                { symbol: '4543.T', name: 'ÌÖåÎ£®Î™®', market: 'japanese' },
                                { symbol: '7741.T', name: 'ÌòºÎã§', market: 'japanese' },
                                { symbol: '6273.T', name: 'SMC', market: 'japanese' },
                                { symbol: '4503.T', name: 'ÏïÑÏä§ÌÖîÎùºÏä§Ï†úÏïΩ', market: 'japanese' },
                                { symbol: '6501.T', name: 'ÌûàÌÉÄÏπòÏ†úÏûëÏÜå', market: 'japanese' }
                            ],
                            indian: [
                                { symbol: 'RELIANCE.NS', name: 'Reliance Industries', market: 'indian' },
                                { symbol: 'TCS.NS', name: 'Tata Consultancy Services', market: 'indian' },
                                { symbol: 'HDFCBANK.NS', name: 'HDFC Bank', market: 'indian' },
                                { symbol: 'INFY.NS', name: 'Infosys', market: 'indian' },
                                { symbol: 'HINDUNILVR.NS', name: 'Hindustan Unilever', market: 'indian' },
                                { symbol: 'ICICIBANK.NS', name: 'ICICI Bank', market: 'indian' },
                                { symbol: 'BHARTIARTL.NS', name: 'Bharti Airtel', market: 'indian' },
                                { symbol: 'ITC.NS', name: 'ITC Limited', market: 'indian' },
                                { symbol: 'SBIN.NS', name: 'State Bank of India', market: 'indian' },
                                { symbol: 'LT.NS', name: 'Larsen & Toubro', market: 'indian' },
                                { symbol: 'HCLTECH.NS', name: 'HCL Technologies', market: 'indian' },
                                { symbol: 'AXISBANK.NS', name: 'Axis Bank', market: 'indian' },
                                { symbol: 'MARUTI.NS', name: 'Maruti Suzuki', market: 'indian' },
                                { symbol: 'ASIANPAINT.NS', name: 'Asian Paints', market: 'indian' },
                                { symbol: 'WIPRO.NS', name: 'Wipro', market: 'indian' },
                                { symbol: 'NTPC.NS', name: 'NTPC', market: 'indian' },
                                { symbol: 'ULTRACEMCO.NS', name: 'UltraTech Cement', market: 'indian' },
                                { symbol: 'TATAMOTORS.NS', name: 'Tata Motors', market: 'indian' },
                                { symbol: 'POWERGRID.NS', name: 'Power Grid Corp', market: 'indian' },
                                { symbol: 'NESTLEIND.NS', name: 'Nestle India', market: 'indian' },
                                { symbol: 'TECHM.NS', name: 'Tech Mahindra', market: 'indian' },
                                { symbol: 'COALINDIA.NS', name: 'Coal India', market: 'indian' },
                                { symbol: 'TITAN.NS', name: 'Titan Company', market: 'indian' },
                                { symbol: 'BAJFINANCE.NS', name: 'Bajaj Finance', market: 'indian' },
                                { symbol: 'SUNPHARMA.NS', name: 'Sun Pharma', market: 'indian' },
                                { symbol: 'DRREDDY.NS', name: 'Dr Reddys Labs', market: 'indian' },
                                { symbol: 'JSWSTEEL.NS', name: 'JSW Steel', market: 'indian' },
                                { symbol: 'TATASTEEL.NS', name: 'Tata Steel', market: 'indian' },
                                { symbol: 'ADANIENT.NS', name: 'Adani Enterprises', market: 'indian' },
                                { symbol: 'ONGC.NS', name: 'Oil & Natural Gas Corp', market: 'indian' }
                            ],
                            uk: [
                                { symbol: 'SHEL.L', name: 'Shell plc', market: 'uk' },
                                { symbol: 'AZN.L', name: 'AstraZeneca', market: 'uk' },
                                { symbol: 'ULVR.L', name: 'Unilever', market: 'uk' },
                                { symbol: 'HSBA.L', name: 'HSBC Holdings', market: 'uk' },
                                { symbol: 'BP.L', name: 'BP plc', market: 'uk' },
                                { symbol: 'VOD.L', name: 'Vodafone', market: 'uk' },
                                { symbol: 'LLOY.L', name: 'Lloyds Banking', market: 'uk' },
                                { symbol: 'BARC.L', name: 'Barclays', market: 'uk' },
                                { symbol: 'LSEG.L', name: 'London Stock Exchange', market: 'uk' },
                                { symbol: 'GSK.L', name: 'GSK', market: 'uk' },
                                { symbol: 'GLEN.L', name: 'Glencore', market: 'uk' },
                                { symbol: 'RIO.L', name: 'Rio Tinto', market: 'uk' },
                                { symbol: 'RDSB.L', name: 'Royal Dutch Shell B', market: 'uk' },
                                { symbol: 'DGE.L', name: 'Diageo', market: 'uk' },
                                { symbol: 'REL.L', name: 'RELX', market: 'uk' },
                                { symbol: 'RB.L', name: 'Reckitt Benckiser', market: 'uk' },
                                { symbol: 'NG.L', name: 'National Grid', market: 'uk' },
                                { symbol: 'BT-A.L', name: 'BT Group', market: 'uk' },
                                { symbol: 'TSCO.L', name: 'Tesco', market: 'uk' },
                                { symbol: 'PRU.L', name: 'Prudential', market: 'uk' },
                                { symbol: 'SSE.L', name: 'SSE', market: 'uk' },
                                { symbol: 'CNA.L', name: 'Centrica', market: 'uk' },
                                { symbol: 'STAN.L', name: 'Standard Chartered', market: 'uk' },
                                { symbol: 'WPP.L', name: 'WPP', market: 'uk' },
                                { symbol: 'RBS.L', name: 'NatWest Group', market: 'uk' },
                                { symbol: 'ANTO.L', name: 'Antofagasta', market: 'uk' },
                                { symbol: 'FLTR.L', name: 'Flutter Entertainment', market: 'uk' },
                                { symbol: 'SBRY.L', name: 'Sainsbury', market: 'uk' },
                                { symbol: 'MRW.L', name: 'Morrison', market: 'uk' },
                                { symbol: 'OCDO.L', name: 'Ocado Group', market: 'uk' }
                            ],
                            canadian: [
                                { symbol: 'SHOP.TO', name: 'Shopify Inc.', market: 'canadian' },
                                { symbol: 'CNQ.TO', name: 'Canadian Natural Resources', market: 'canadian' },
                                { symbol: 'RY.TO', name: 'Royal Bank of Canada', market: 'canadian' },
                                { symbol: 'TD.TO', name: 'Toronto-Dominion Bank', market: 'canadian' },
                                { symbol: 'BNS.TO', name: 'Bank of Nova Scotia', market: 'canadian' },
                                { symbol: 'BCE.TO', name: 'BCE Inc.', market: 'canadian' },
                                { symbol: 'T.TO', name: 'TELUS Corporation', market: 'canadian' },
                                { symbol: 'CP.TO', name: 'Canadian Pacific Railway', market: 'canadian' },
                                { symbol: 'BMO.TO', name: 'Bank of Montreal', market: 'canadian' },
                                { symbol: 'CM.TO', name: 'Canadian Imperial Bank', market: 'canadian' },
                                { symbol: 'CSU.TO', name: 'Constellation Software', market: 'canadian' },
                                { symbol: 'ENB.TO', name: 'Enbridge', market: 'canadian' },
                                { symbol: 'TRP.TO', name: 'TC Energy', market: 'canadian' },
                                { symbol: 'SU.TO', name: 'Suncor Energy', market: 'canadian' },
                                { symbol: 'WCN.TO', name: 'Waste Connections', market: 'canadian' },
                                { symbol: 'CNR.TO', name: 'Canadian National Railway', market: 'canadian' },
                                { symbol: 'ATD.TO', name: 'Alimentation Couche-Tard', market: 'canadian' },
                                { symbol: 'CCO.TO', name: 'Cameco Corporation', market: 'canadian' },
                                { symbol: 'CVE.TO', name: 'Cenovus Energy', market: 'canadian' },
                                { symbol: 'MFC.TO', name: 'Manulife Financial', market: 'canadian' },
                                { symbol: 'QSR.TO', name: 'Restaurant Brands Intl', market: 'canadian' },
                                { symbol: 'WPM.TO', name: 'Wheaton Precious Metals', market: 'canadian' },
                                { symbol: 'GIB-A.TO', name: 'CGI Inc.', market: 'canadian' },
                                { symbol: 'SLF.TO', name: 'Sun Life Financial', market: 'canadian' },
                                { symbol: 'DOL.TO', name: 'Dollarama Inc.', market: 'canadian' },
                                { symbol: 'BIP-UN.TO', name: 'Brookfield Infrastructure', market: 'canadian' },
                                { symbol: 'PPL.TO', name: 'Pembina Pipeline', market: 'canadian' },
                                { symbol: 'FNV.TO', name: 'Franco-Nevada', market: 'canadian' },
                                { symbol: 'ABX.TO', name: 'Barrick Gold', market: 'canadian' },
                                { symbol: 'TOU.TO', name: 'Tourmaline Oil', market: 'canadian' }
                            ],
                            french: [
                                { symbol: 'MC.PA', name: 'LVMH', market: 'french' },
                                { symbol: 'OR.PA', name: "L'Or√©al", market: 'french' },
                                { symbol: 'SAF.PA', name: 'Safran', market: 'french' },
                                { symbol: 'TTE.PA', name: 'TotalEnergies', market: 'french' },
                                { symbol: 'SAN.PA', name: 'Sanofi', market: 'french' },
                                { symbol: 'AI.PA', name: 'Air Liquide', market: 'french' },
                                { symbol: 'BNP.PA', name: 'BNP Paribas', market: 'french' },
                                { symbol: 'CA.PA', name: 'Cr√©dit Agricole', market: 'french' },
                                { symbol: 'ATO.PA', name: 'Atos', market: 'french' },
                                { symbol: 'ML.PA', name: 'Michelin', market: 'french' },
                                { symbol: 'VIE.PA', name: 'Veolia Environnement', market: 'french' },
                                { symbol: 'DG.PA', name: 'Vinci', market: 'french' },
                                { symbol: 'RNO.PA', name: 'Renault', market: 'french' },
                                { symbol: 'CS.PA', name: 'AXA', market: 'french' },
                                { symbol: 'GLE.PA', name: 'Soci√©t√© G√©n√©rale', market: 'french' },
                                { symbol: 'VIV.PA', name: 'Vivendi', market: 'french' },
                                { symbol: 'CAP.PA', name: 'Capgemini', market: 'french' },
                                { symbol: 'EL.PA', name: 'EssilorLuxottica', market: 'french' },
                                { symbol: 'UG.PA', name: 'Peugeot', market: 'french' },
                                { symbol: 'SU.PA', name: 'Schneider Electric', market: 'french' },
                                { symbol: 'BN.PA', name: 'Danone', market: 'french' },
                                { symbol: 'DSY.PA', name: 'Dassault Syst√®mes', market: 'french' },
                                { symbol: 'KER.PA', name: 'Kering', market: 'french' },
                                { symbol: 'RMS.PA', name: 'Herm√®s', market: 'french' },
                                { symbol: 'EN.PA', name: 'Bouygues', market: 'french' },
                                { symbol: 'ORA.PA', name: 'Orange', market: 'french' },
                                { symbol: 'SGO.PA', name: 'Saint-Gobain', market: 'french' },
                                { symbol: 'WLN.PA', name: 'Worldline', market: 'french' },
                                { symbol: 'PUB.PA', name: 'Publicis Groupe', market: 'french' },
                                { symbol: 'LHN.PA', name: 'LafargeHolcim', market: 'french' }
                            ],
                            german: [
                                { symbol: 'SAP.DE', name: 'SAP SE', market: 'german' },
                                { symbol: 'SIE.DE', name: 'Siemens AG', market: 'german' },
                                { symbol: 'ALV.DE', name: 'Allianz SE', market: 'german' },
                                { symbol: 'DTE.DE', name: 'Deutsche Telekom', market: 'german' },
                                { symbol: 'MUV2.DE', name: 'Munich Re', market: 'german' },
                                { symbol: 'BAS.DE', name: 'BASF SE', market: 'german' },
                                { symbol: 'BMW.DE', name: 'BMW AG', market: 'german' },
                                { symbol: 'VOW3.DE', name: 'Volkswagen AG', market: 'german' },
                                { symbol: 'DBK.DE', name: 'Deutsche Bank', market: 'german' },
                                { symbol: 'DAI.DE', name: 'Daimler AG', market: 'german' },
                                { symbol: 'ADS.DE', name: 'Adidas AG', market: 'german' },
                                { symbol: 'LIN.DE', name: 'Linde plc', market: 'german' },
                                { symbol: 'BEI.DE', name: 'Beiersdorf AG', market: 'german' },
                                { symbol: 'CON.DE', name: 'Continental AG', market: 'german' },
                                { symbol: 'DB1.DE', name: 'Deutsche B√∂rse', market: 'german' },
                                { symbol: 'FRE.DE', name: 'Fresenius SE', market: 'german' },
                                { symbol: 'HEI.DE', name: 'HeidelbergCement', market: 'german' },
                                { symbol: 'IFX.DE', name: 'Infineon Technologies', market: 'german' },
                                { symbol: 'MRK.DE', name: 'Merck KGaA', market: 'german' },
                                { symbol: 'RWE.DE', name: 'RWE AG', market: 'german' },
                                { symbol: 'EOAN.DE', name: 'E.ON SE', market: 'german' },
                                { symbol: 'VNA.DE', name: 'Vonovia SE', market: 'german' },
                                { symbol: 'WDI.DE', name: 'Wirecard AG', market: 'german' },
                                { symbol: 'ZAL.DE', name: 'Zalando SE', market: 'german' },
                                { symbol: 'HEN3.DE', name: 'Henkel AG', market: 'german' },
                                { symbol: 'MTX.DE', name: 'MTU Aero Engines', market: 'german' },
                                { symbol: 'QIA.DE', name: 'Qiagen N.V.', market: 'german' },
                                { symbol: 'SHL.DE', name: 'Siemens Healthineers', market: 'german' },
                                { symbol: 'TKA.DE', name: 'ThyssenKrupp AG', market: 'german' },
                                { symbol: 'PUM.DE', name: 'Puma SE', market: 'german' }
                            ],
                            taiwanese: [
                                { symbol: '2330.TW', name: 'Taiwan Semiconductor', market: 'taiwanese' },
                                { symbol: '2454.TW', name: 'MediaTek Inc.', market: 'taiwanese' },
                                { symbol: '2317.TW', name: 'Hon Hai Precision', market: 'taiwanese' },
                                { symbol: '1303.TW', name: 'Nan Ya Plastics', market: 'taiwanese' },
                                { symbol: '2412.TW', name: 'Chunghwa Telecom', market: 'taiwanese' },
                                { symbol: '1216.TW', name: 'Uni-President', market: 'taiwanese' },
                                { symbol: '2881.TW', name: 'Fubon Financial', market: 'taiwanese' },
                                { symbol: '2002.TW', name: 'China Steel', market: 'taiwanese' },
                                { symbol: '2891.TW', name: 'CTBC Financial', market: 'taiwanese' },
                                { symbol: '2886.TW', name: 'Mega Financial', market: 'taiwanese' },
                                { symbol: '2303.TW', name: 'United Microelectronics', market: 'taiwanese' },
                                { symbol: '1301.TW', name: 'Formosa Plastics', market: 'taiwanese' },
                                { symbol: '3008.TW', name: 'Largan Precision', market: 'taiwanese' },
                                { symbol: '2308.TW', name: 'Delta Electronics', market: 'taiwanese' },
                                { symbol: '2882.TW', name: 'Cathay Financial', market: 'taiwanese' },
                                { symbol: '1326.TW', name: 'Formosa Chemicals', market: 'taiwanese' },
                                { symbol: '2357.TW', name: 'Asustek Computer', market: 'taiwanese' },
                                { symbol: '2382.TW', name: 'Quanta Computer', market: 'taiwanese' },
                                { symbol: '2379.TW', name: 'Foxconn Technology', market: 'taiwanese' },
                                { symbol: '2395.TW', name: 'Advantech', market: 'taiwanese' },
                                { symbol: '6505.TW', name: 'Taiwan Fertilizer', market: 'taiwanese' },
                                { symbol: '4938.TW', name: 'Pegatron Corporation', market: 'taiwanese' },
                                { symbol: '2207.TW', name: 'Hotai Motor', market: 'taiwanese' },
                                { symbol: '1101.TW', name: 'Taiwan Cement', market: 'taiwanese' },
                                { symbol: '9910.TW', name: 'Feng Tay Enterprise', market: 'taiwanese' },
                                { symbol: '2887.TW', name: 'Taishin Financial', market: 'taiwanese' },
                                { symbol: '2890.TW', name: 'Sinopac Financial', market: 'taiwanese' },
                                { symbol: '1402.TW', name: 'Far Eastern New Century', market: 'taiwanese' },
                                { symbol: '2105.TW', name: 'Cheng Shin Rubber', market: 'taiwanese' },
                                { symbol: '2884.TW', name: 'E.Sun Financial', market: 'taiwanese' }
                            ]
                        };

                        console.log(`üìä Global stocks populated: ${Object.keys(globalStocks).length} markets`);
                        console.log(`üìä Total stocks available: ${Object.values(globalStocks).flat().length}`);

                        // Flatten all stocks for random selection
                        const allStocks = Object.values(globalStocks).flat();

                        // Select random stocks for display (mix from different markets)
                        const getRandomStocks = (count = 6) => {
                            const shuffled = [...allStocks].sort(() => 0.5 - Math.random());
                            return shuffled.slice(0, count);
                        };

                        // Get stocks from specific market
                        const getMarketStocks = (market, count = 10) => {
                            const marketStocks = globalStocks[market] || [];
                            return marketStocks.slice(0, count);
                        };

                        // Load real market data
                        let marketData = [];
                        let currentDisplayCount = 3; // Start with 3, can expand

                        console.log(`üìä Total stocks available: ${allStocks.length}`);

                        // Load market data from APIs
                        async function loadMarketData() {
                            console.log('üì° Loading real market data from APIs...');
                            const selectedStocks = getRandomStocks(currentDisplayCount);

                            for (const stock of selectedStocks) {
                                try {
                                    let data;
                                    if (stock.market === 'crypto') {
                                        // Use multiple crypto APIs
                                        data = await loadCryptoData(stock.symbol);
                                    } else {
                                        // Use stock APIs
                                        data = await loadStockData(stock.symbol);
                                    }

                                    if (data && data.currentPrice && data.chartData && data.chartData.length > 0) {
                                        console.log(`‚úÖ Valid real data for ${stock.symbol}: $${data.currentPrice}`);
                                        marketData.push({
                                            symbol: stock.symbol,
                                            name: stock.name,
                                            market: stock.market,
                                            currentPrice: data.currentPrice,
                                            predictedPrice: data.predictedPrice || data.currentPrice * (1 + (Math.random() - 0.5) * 0.1),
                                            change: data.change,
                                            data: data.chartData,
                                            volume: data.volume,
                                            high: data.high,
                                            low: data.low
                                        });
                                    } else {
                                        console.warn(`‚ùå Invalid data structure for ${stock.symbol}:`, data);
                                    }
                                } catch (error) {
                                    console.error(`‚ùå Error loading data for ${stock.symbol}:`, error);
                                    console.log(`‚ö†Ô∏è Skipping ${stock.symbol} - no real data available`);
                                    // Skip this stock - only show real data
                                }
                            }

                            console.log('üìä Market data loaded:', marketData.length, 'stocks');
                            initializeCharts();
                        }

                        // Load cryptocurrency data - BACKEND APIS ONLY
                        async function loadCryptoData(symbol) {
                            try {
                                console.log(`ü™ô Loading crypto data for ${symbol} from backend APIs...`);

                                // Try your backend crypto APIs in sequence with timeout
                                const endpoints = [
                                    `/api/market-data/crypto/${symbol}/`,
                                    `/api/market-data/coingecko/${symbol}/`,
                                    `/api/market-data/quote/${symbol}/`,
                                    `/api/market-data/enhanced/${symbol}/`
                                ];

                                for (const endpoint of endpoints) {
                                    try {
                                        console.log(`üîÑ Trying crypto endpoint: ${endpoint}`);

                                        // Add timeout to prevent hanging
                                        const controller = new AbortController();
                                        const timeoutId = setTimeout(() => controller.abort(), 10000); // 10 second timeout

                                        const response = await fetch(`${API_BASE_URL}${endpoint}`, {
                                            signal: controller.signal,
                                            headers: {
                                                'Accept': 'application/json',
                                                'Content-Type': 'application/json'
                                            }
                                        });

                                        clearTimeout(timeoutId);

                                        if (response.ok) {
                                            const data = await response.json();
                                            console.log(`üìä Raw crypto API response for ${symbol}:`, data);

                                            // Check for valid data structure
                                            if (data && (data.success !== false) && (data.current_price || data.price || data.close || data.data)) {
                                                console.log(`‚úÖ Valid crypto data found for ${symbol} from ${endpoint}`);
                                                return formatApiData(data.data || data);
                                            } else {
                                                console.log(`‚ö†Ô∏è Invalid data structure from ${endpoint}:`, data);
                                            }
                                        } else {
                                            console.log(`‚ùå ${endpoint} returned status ${response.status}: ${response.statusText}`);
                                        }
                                    } catch (err) {
                                        if (err.name === 'AbortError') {
                                            console.log(`‚è±Ô∏è Request timeout for ${endpoint}`);
                                        } else {
                                            console.log(`‚è≠Ô∏è ${endpoint} failed: ${err.message}`);
                                        }
                                    }
                                }

                                console.warn(`‚ùå All crypto APIs failed for ${symbol}`);
                                return null;

                            } catch (error) {
                                console.error(`Error loading crypto data for ${symbol}:`, error);
                                return null;
                            }
                        }

                        // Load stock data - IMPROVED WITH BETTER ERROR HANDLING
                        async function loadStockData(symbol) {
                            try {
                                console.log(`üìà Loading stock data for ${symbol} from backend APIs...`);

                                // Try your backend APIs in sequence with timeout
                                const endpoints = [
                                    `/api/market-data/quote/${symbol}/`,
                                    `/api/market-data/enhanced/${symbol}/`,
                                    `/api/market-data/historical/${symbol}/`,
                                    `/api/market-data/tiingo/quote/${symbol}/`,
                                    `/api/market-data/marketstack/quote/${symbol}/`
                                ];

                                for (const endpoint of endpoints) {
                                    try {
                                        console.log(`üîÑ Trying stock endpoint: ${endpoint}`);

                                        // Add timeout to prevent hanging
                                        const controller = new AbortController();
                                        const timeoutId = setTimeout(() => controller.abort(), 10000); // 10 second timeout

                                        const response = await fetch(`${API_BASE_URL}${endpoint}`, {
                                            signal: controller.signal,
                                            headers: {
                                                'Accept': 'application/json',
                                                'Content-Type': 'application/json'
                                            }
                                        });

                                        clearTimeout(timeoutId);

                                        if (response.ok) {
                                            const data = await response.json();
                                            console.log(`üìä Raw stock API response for ${symbol}:`, data);

                                            // Check for valid data structure
                                            if (data && (data.success !== false) && (data.current_price || data.price || data.close || data.regularMarketPrice || data.data)) {
                                                console.log(`‚úÖ Valid stock data found for ${symbol} from ${endpoint}`);
                                                return formatApiData(data.data || data);
                                            } else {
                                                console.log(`‚ö†Ô∏è Invalid data structure from ${endpoint}:`, data);
                                            }
                                        } else {
                                            console.log(`‚ùå ${endpoint} returned status ${response.status}: ${response.statusText}`);
                                        }
                                    } catch (err) {
                                        if (err.name === 'AbortError') {
                                            console.log(`‚è±Ô∏è Request timeout for ${endpoint}`);
                                        } else {
                                            console.log(`‚è≠Ô∏è ${endpoint} failed: ${err.message}`);
                                        }
                                    }
                                }

                                console.warn(`‚ùå All stock APIs failed for ${symbol}`);
                                return null;

                            } catch (error) {
                                console.error(`Error loading stock data for ${symbol}:`, error);
                                return null;
                            }
                        }

                        // Format API response data - REAL DATA ONLY
                        function formatApiData(data) {
                            console.log('üîß Formatting API data:', data);

                            const currentPrice = data.current_price || data.price || data.close || data.regularMarketPrice;
                            const change = data.change_percent || data.change || data.regularMarketChangePercent;
                            const volume = data.volume || data.regularMarketVolume;
                            const high = data.high || data.regularMarketDayHigh || data.dayHigh;
                            const low = data.low || data.regularMarketDayLow || data.dayLow;

                            // Only proceed if we have a valid current price
                            if (!currentPrice || currentPrice <= 0) {
                                console.warn('‚ùå No valid price data found');
                                return null;
                            }

                            // Try to extract historical data from API response
                            let chartData = [];
                            if (data.historical || data.chart || data.time_series) {
                                const historicalData = data.historical || data.chart || data.time_series;

                                if (Array.isArray(historicalData)) {
                                    chartData = historicalData.map(item => ({
                                        time: item.date || item.time || item.timestamp,
                                        value: item.close || item.price || item.value
                                    })).filter(item => item.time && item.value);
                                } else if (typeof historicalData === 'object') {
                                    chartData = Object.entries(historicalData).map(([date, priceData]) => ({
                                        time: date,
                                        value: priceData.close || priceData['4. close'] || priceData.price
                                    })).filter(item => item.time && item.value);
                                }
                            }

                            // If no historical data, create a single point for current price
                            if (chartData.length === 0) {
                                const today = new Date().toISOString().split('T')[0];
                                chartData = [{ time: today, value: currentPrice }];
                            }

                            console.log(`‚úÖ Formatted data for price: $${currentPrice}, points: ${chartData.length}`);

                            return {
                                currentPrice: parseFloat(currentPrice),
                                change: typeof change === 'string' ? change : (change > 0 ? `+${change.toFixed(2)}%` : `${change.toFixed(2)}%`),
                                chartData: chartData,
                                volume: volume || 0,
                                high: high || currentPrice,
                                low: low || currentPrice
                            };
                        }

                        // Generate realistic chart data - Make it globally available
                        window.generateRealisticData = function (basePrice, days) {
                            const data = [];
                            let price = basePrice;
                            const today = new Date();

                            for (let i = days - 1; i >= 0; i--) {
                                const date = new Date(today);
                                date.setDate(date.getDate() - i);

                                // Add realistic volatility
                                const volatility = 0.02; // 2% daily volatility
                                const change = (Math.random() - 0.5) * 2 * volatility;
                                price = price * (1 + change);

                                data.push({
                                    time: date.toISOString().split('T')[0],
                                    value: Math.round(price * 100) / 100
                                });
                            }

                            return data;
                        }

                        // Also create a local reference for easy access
                        const generateRealisticData = window.generateRealisticData;

                        // Initialize charts with real data
                        function initializeCharts() {
                            console.log('üìä About to initialize', marketData.length, 'charts with real data');

                            // Get the charts container
                            const chartsContainer = document.getElementById('charts-container');
                            if (!chartsContainer) {
                                console.error('‚ùå Charts container not found!');
                                return;
                            }

                            // Clear existing charts completely
                            chartsContainer.innerHTML = '';

                            if (marketData.length === 0) {
                                console.warn('‚ö†Ô∏è No market data available for chart initialization');
                                chartsContainer.innerHTML = `
                                    <div class="col-span-full text-center p-8">
                                        <i class="fas fa-chart-line text-4xl text-gray-500 mb-4"></i>
                                        <p class="text-tv-text-secondary">Ï∞®Ìä∏ Îç∞Ïù¥ÌÑ∞Í∞Ä ÏóÜÏäµÎãàÎã§</p>
                                    </div>
                                `;
                                return;
                            }

                            // Create charts for all loaded data
                            marketData.forEach((stockData, index) => {
                                console.log(`üéØ Creating chart ${index + 1} for ${stockData.symbol} (${stockData.name})`);

                                // Create chart card
                                const chartCard = document.createElement('div');
                                chartCard.className = 'tv-card p-6 rounded-lg border bg-card text-card-foreground shadow-lg hover:shadow-xl transition-all duration-300';

                                // Get market display name
                                const marketDisplayNames = {
                                    'crypto': 'Cryptocurrency',
                                    'us': 'US Stock',
                                    'korean': 'Korean Stock',
                                    'japanese': 'Japanese Stock',
                                    'indian': 'Indian Stock',
                                    'uk': 'UK Stock',
                                    'canadian': 'Canadian Stock',
                                    'french': 'French Stock',
                                    'german': 'German Stock',
                                    'taiwanese': 'Taiwanese Stock'
                                };

                                const uniqueChartId = `chart-${index + 1}-${Date.now()}`;

                                chartCard.innerHTML = `
                                    <div class="flex items-center justify-between mb-4">
                                        <div>
                                            <h3 class="text-lg font-semibold text-white">${stockData.name}</h3>
                                            <p class="text-sm text-gray-400">${stockData.symbol} ‚Ä¢ ${marketDisplayNames[stockData.market] || stockData.market}</p>
                                        </div>
                                        <div class="text-right">
                                            <div class="text-xl font-bold text-white">$${stockData.currentPrice?.toFixed(2) || '0.00'}</div>
                                            <div class="text-sm ${stockData.change?.includes('-') ? 'text-red-400' : 'text-green-400'}">${stockData.change || '+0.00%'}</div>
                                        </div>
                                    </div>
                                    <div class="relative h-64 bg-tv-dark chart-container-fluorescent">
                                        <div class="chart-placeholder w-full h-full" id="${uniqueChartId}"></div>
                                    </div>
                                    <div class="mt-4 grid grid-cols-3 gap-4 text-sm">
                                        <div>
                                            <p class="text-gray-400">High</p>
                                            <p class="text-green-400 font-semibold">$${stockData.high?.toFixed(2) || '0.00'}</p>
                                        </div>
                                        <div>
                                            <p class="text-gray-400">Low</p>
                                            <p class="text-red-400 font-semibold">$${stockData.low?.toFixed(2) || '0.00'}</p>
                                        </div>
                                        <div>
                                            <p class="text-gray-400">Volume</p>
                                            <p class="text-white font-semibold">${stockData.volume ? formatVolume(stockData.volume) : 'N/A'}</p>
                                        </div>
                                    </div>
                                `;

                                chartsContainer.appendChild(chartCard);

                                // Now create the chart in the container with a delay to ensure DOM is ready
                                setTimeout(() => {
                                    const chartContainer = document.getElementById(uniqueChartId);
                                    if (chartContainer && typeof LightweightCharts !== 'undefined') {
                                        console.log(`‚úÖ Initializing chart: ${uniqueChartId} with ${stockData.symbol}`);
                                        createStockChart(chartContainer, stockData);
                                    } else {
                                        console.warn(`‚ùå Chart container ${uniqueChartId} not found or LightweightCharts not loaded`);
                                        // Show error message in the chart container
                                        if (chartContainer) {
                                            chartContainer.innerHTML = '<div class="text-center text-red-500 p-4">Ï∞®Ìä∏ Î°úÎî© Ïã§Ìå®</div>';
                                        }
                                    }
                                }, 100 * (index + 1)); // Stagger chart creation to avoid conflicts
                            });

                            console.log(`‚úÖ All ${marketData.length} charts initialized successfully`);
                        }

                        // Format volume for display
                        function formatVolume(volume) {
                            if (volume >= 1000000000) {
                                return (volume / 1000000000).toFixed(1) + 'B';
                            } else if (volume >= 1000000) {
                                return (volume / 1000000).toFixed(1) + 'M';
                            } else if (volume >= 1000) {
                                return (volume / 1000).toFixed(1) + 'K';
                            }
                            return volume.toString();
                        }

                        // Start loading data
                        loadMarketData();
                    }

                    function createStockChart(container, stockData) {
                        console.log(`üéØ Creating chart for ${stockData.symbol} in container:`, container.id);

                        try {
                            // Validate input data
                            if (!stockData || !stockData.data || stockData.data.length === 0) {
                                console.warn(`‚ö†Ô∏è No valid chart data for ${stockData.symbol}`);
                                container.innerHTML = '<div class="text-center text-yellow-500 p-4">Ï∞®Ìä∏ Îç∞Ïù¥ÌÑ∞ ÏóÜÏùå</div>';
                                return;
                            }

                            // Ensure container has dimensions
                            if (container.clientWidth === 0 || container.clientHeight === 0) {
                                console.warn(`‚ö†Ô∏è Container has no dimensions: ${container.clientWidth}x${container.clientHeight}`);
                                container.style.width = '100%';
                                container.style.height = '256px';
                                container.style.position = 'relative';

                                // Force layout recalculation
                                container.offsetHeight;
                            }

                            // Wait for layout to stabilize
                            setTimeout(() => {
                                const finalWidth = container.clientWidth || 600;
                                const finalHeight = 256;

                                console.log(`üìè Final container dimensions: ${finalWidth}x${finalHeight}`);

                                // Prepare chart data - convert to LightweightCharts format
                                const chartData = stockData.data.map(item => {
                                    // Handle different time formats
                                    let time;
                                    if (typeof item.time === 'string') {
                                        // If it's a date string, convert to timestamp
                                        time = Math.floor(new Date(item.time).getTime() / 1000);
                                    } else if (typeof item.time === 'number') {
                                        // If it's already a timestamp, use as is
                                        time = item.time;
                                    } else {
                                        // Default to current time
                                        time = Math.floor(Date.now() / 1000);
                                    }

                                    return {
                                        time: time,
                                        value: parseFloat(item.value || item.close || stockData.currentPrice)
                                    };
                                }).filter(item => !isNaN(item.value) && item.value > 0)
                                    .sort((a, b) => a.time - b.time); // Sort by time

                                if (chartData.length === 0) {
                                    console.warn(`‚ö†Ô∏è No valid data points for ${stockData.symbol}`);
                                    container.innerHTML = '<div class="text-center text-yellow-500 p-4">Ïú†Ìö®ÌïòÏßÄ ÏïäÏùÄ Ï∞®Ìä∏ Îç∞Ïù¥ÌÑ∞</div>';
                                    return;
                                }

                                console.log(`üìä Chart data prepared for ${stockData.symbol}: ${chartData.length} points`);

                                // Chart configuration
                                const chartOptions = {
                                    width: finalWidth,
                                    height: finalHeight,
                                    layout: {
                                        background: { color: '#131722' },
                                        textColor: '#d1d4dc',
                                    },
                                    grid: {
                                        vertLines: { color: '#2a2e39' },
                                        horzLines: { color: '#2a2e39' },
                                    },
                                    rightPriceScale: {
                                        borderColor: '#2a2e39',
                                    },
                                    timeScale: {
                                        borderColor: '#2a2e39',
                                        timeVisible: true,
                                        secondsVisible: false,
                                    },
                                    crosshair: {
                                        mode: LightweightCharts.CrosshairMode.Normal,
                                    },
                                    handleScroll: {
                                        mouseWheel: true,
                                        pressedMouseMove: true,
                                    },
                                    handleScale: {
                                        axisPressedMouseMove: true,
                                        mouseWheel: true,
                                        pinch: true,
                                    },
                                };

                                // Create chart
                                console.log(`üîß Creating LightweightCharts instance with options:`, chartOptions);
                                const chart = LightweightCharts.createChart(container, chartOptions);
                                console.log(`‚úÖ Chart instance created for ${stockData.symbol}`);

                                // Determine chart type based on data
                                let series;
                                if (chartData.length > 1 && chartData.some(item => item.high && item.low)) {
                                    // Use candlestick if we have OHLC data
                                    series = chart.addCandlestickSeries({
                                        upColor: '#26a69a',
                                        downColor: '#ef5350',
                                        borderDownColor: '#ef5350',
                                        borderUpColor: '#26a69a',
                                        wickDownColor: '#ef5350',
                                        wickUpColor: '#26a69a',
                                    });
                                } else {
                                    // Use line series for simple price data
                                    series = chart.addLineSeries({
                                        color: '#2962FF',
                                        lineWidth: 2,
                                        crosshairMarkerVisible: true,
                                        crosshairMarkerRadius: 6,
                                    });
                                }

                                // Set data
                                series.setData(chartData);
                                console.log(`üìà Data set for ${stockData.symbol} chart`);

                                // Add prediction line if available
                                if (stockData.predictedPrice && stockData.predictedPrice !== stockData.currentPrice) {
                                    const lineSeries = chart.addLineSeries({
                                        color: '#f7931e',
                                        lineWidth: 2,
                                        lineStyle: LightweightCharts.LineStyle.Dotted,
                                        title: 'Prediction',
                                    });

                                    // Add prediction point (future date)
                                    const lastDataPoint = chartData[chartData.length - 1];
                                    const predictionTime = lastDataPoint.time + (7 * 24 * 60 * 60); // 7 days later

                                    const predictionData = [
                                        { time: lastDataPoint.time, value: lastDataPoint.value },
                                        { time: predictionTime, value: stockData.predictedPrice }
                                    ];

                                    lineSeries.setData(predictionData);
                                }

                                // Fit content to show all data
                                chart.timeScale().fitContent();

                                // Handle resize
                                const resizeObserver = new ResizeObserver(entries => {
                                    if (entries.length === 0) return;
                                    const newRect = entries[0].contentRect;
                                    if (newRect.width > 0) {
                                        chart.applyOptions({ width: newRect.width });
                                    }
                                });

                                resizeObserver.observe(container);

                                // Store chart reference for cleanup
                                container._chart = chart;
                                container._resizeObserver = resizeObserver;

                                console.log(`‚úÖ Chart ${stockData.symbol} initialized successfully with ${chartData.length} data points`);
                            }, 50);

                        } catch (error) {
                            console.error(`‚ùå Error creating chart for ${stockData.symbol}:`, error);
                            container.innerHTML = `
                                <div class="text-center text-red-500 p-4">
                                    <i class="fas fa-exclamation-triangle mb-2"></i>
                                    <p>Ï∞®Ìä∏ Î°úÎî© Ïã§Ìå®</p>
                                    <small class="text-gray-500">${error.message}</small>
                                </div>
                            `;
                        }
                    }

                    function generateSampleData(basePrice, days) {
                        const data = [];
                        let currentPrice = basePrice;
                        const startDate = new Date();
                        startDate.setDate(startDate.getDate() - days);

                        for (let i = 0; i < days; i++) {
                            const date = new Date(startDate);
                            date.setDate(date.getDate() + i);

                            // Generate realistic OHLC data
                            const change = (Math.random() - 0.5) * 0.05; // ¬±2.5% change
                            const open = currentPrice;
                            const high = open * (1 + Math.random() * 0.03);
                            const low = open * (1 - Math.random() * 0.03);
                            const close = open * (1 + change);

                            data.push({
                                time: Math.floor(date.getTime() / 1000),
                                open: parseFloat(open.toFixed(2)),
                                high: parseFloat(high.toFixed(2)),
                                low: parseFloat(low.toFixed(2)),
                                close: parseFloat(close.toFixed(2))
                            });

                            currentPrice = close;
                        }

                        return data;
                    }
                </script>

                <script>
                    // Mobile menu toggle function
                    function toggleMobileMenu() {
                        const mobileMenu = document.getElementById('mobileMenu');
                        mobileMenu.classList.toggle('hidden');
                    }

                    // Enhanced Modal Functions
                    function showLoginModal() {
                        const modal = document.getElementById('loginModal');
                        const content = document.getElementById('loginModalContent');

                        modal.classList.remove('hidden');
                        document.body.style.overflow = 'hidden';

                        // Animation
                        setTimeout(() => {
                            content.classList.remove('scale-95', 'opacity-0');
                            content.classList.add('scale-100', 'opacity-100');
                        }, 10);
                    }

                    function hideLoginModal() {
                        const modal = document.getElementById('loginModal');
                        const content = document.getElementById('loginModalContent');

                        content.classList.add('scale-95', 'opacity-0');
                        content.classList.remove('scale-100', 'opacity-100');

                        setTimeout(() => {
                            modal.classList.add('hidden');
                            document.body.style.overflow = '';
                        }, 300);
                    }

                    function showSignupModal() {
                        hideLoginModal();

                        const modal = document.getElementById('signupModal');
                        const content = document.getElementById('signupModalContent');

                        modal.classList.remove('hidden');
                        document.body.style.overflow = 'hidden';

                        // Animation
                        setTimeout(() => {
                            content.classList.remove('scale-95', 'opacity-0');
                            content.classList.add('scale-100', 'opacity-100');
                        }, 10);
                    }

                    function hideSignupModal() {
                        const modal = document.getElementById('signupModal');
                        const content = document.getElementById('signupModalContent');

                        content.classList.add('scale-95', 'opacity-0');
                        content.classList.remove('scale-100', 'opacity-100');

                        setTimeout(() => {
                            modal.classList.add('hidden');
                            document.body.style.overflow = '';
                        }, 300);
                    }

                    // Password visibility toggle
                    function togglePasswordVisibility(inputId) {
                        const input = document.getElementById(inputId);
                        const eyeIcon = document.getElementById(inputId + 'Eye');

                        if (input.type === 'password') {
                            input.type = 'text';
                            eyeIcon.className = 'fas fa-eye-slash';
                        } else {
                            input.type = 'password';
                            eyeIcon.className = 'fas fa-eye';
                        }
                    }

                    // Enhanced Social Auth Functions with Loading States
                    async function loginWithGoogle() {
                        const button = event.target;
                        const originalContent = button.innerHTML;

                        // Show loading state
                        button.innerHTML = '<i class="fas fa-spinner fa-spin mr-3"></i>GoogleÎ°ú Ïó∞Í≤∞ Ï§ë...';
                        button.disabled = true;

                        try {
                            // Simulate API call - replace with actual Google OAuth implementation
                            await new Promise(resolve => setTimeout(resolve, 2000));

                            // Success handling
                            console.log('Google login successful');
                            hideLoginModal();

                            // Show success message
                            showNotification('Google Í≥ÑÏ†ïÏúºÎ°ú Î°úÍ∑∏Ïù∏ÎêòÏóàÏäµÎãàÎã§!', 'success');

                        } catch (error) {
                            console.error('Google login error:', error);
                            showNotification('Google Î°úÍ∑∏Ïù∏Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§. Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.', 'error');
                        } finally {
                            // Reset button
                            button.innerHTML = originalContent;
                            button.disabled = false;
                        }
                    }

                    async function loginWithApple() {
                        const button = event.target;
                        const originalContent = button.innerHTML;

                        // Show loading state
                        button.innerHTML = '<i class="fas fa-spinner fa-spin mr-3"></i>AppleÎ°ú Ïó∞Í≤∞ Ï§ë...';
                        button.disabled = true;

                        try {
                            // Simulate API call - replace with actual Apple Sign-In implementation
                            await new Promise(resolve => setTimeout(resolve, 2000));

                            // Success handling
                            console.log('Apple login successful');
                            hideLoginModal();

                            // Show success message
                            showNotification('Apple Í≥ÑÏ†ïÏúºÎ°ú Î°úÍ∑∏Ïù∏ÎêòÏóàÏäµÎãàÎã§!', 'success');

                        } catch (error) {
                            console.error('Apple login error:', error);
                            showNotification('Apple Î°úÍ∑∏Ïù∏Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§. Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.', 'error');
                        } finally {
                            // Reset button
                            button.innerHTML = originalContent;
                            button.disabled = false;
                        }
                    }

                    async function signupWithGoogle() {
                        const button = event.target;
                        const originalContent = button.innerHTML;

                        // Show loading state
                        button.innerHTML = '<i class="fas fa-spinner fa-spin mr-3"></i>GoogleÎ°ú Ïó∞Í≤∞ Ï§ë...';
                        button.disabled = true;

                        try {
                            // Simulate API call - replace with actual Google OAuth implementation
                            await new Promise(resolve => setTimeout(resolve, 2000));

                            // Success handling
                            console.log('Google signup successful');
                            hideSignupModal();

                            // Show success message
                            showNotification('Google Í≥ÑÏ†ïÏúºÎ°ú Í∞ÄÏûÖÏù¥ ÏôÑÎ£åÎêòÏóàÏäµÎãàÎã§!', 'success');

                        } catch (error) {
                            console.error('Google signup error:', error);
                            showNotification('Google ÌöåÏõêÍ∞ÄÏûÖÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§. Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.', 'error');
                        } finally {
                            // Reset button
                            button.innerHTML = originalContent;
                            button.disabled = false;
                        }
                    }

                    async function signupWithApple() {
                        const button = event.target;
                        const originalContent = button.innerHTML;

                        // Show loading state
                        button.innerHTML = '<i class="fas fa-spinner fa-spin mr-3"></i>AppleÎ°ú Ïó∞Í≤∞ Ï§ë...';
                        button.disabled = true;

                        try {
                            // Simulate API call - replace with actual Apple Sign-In implementation
                            await new Promise(resolve => setTimeout(resolve, 2000));

                            // Success handling
                            console.log('Apple signup successful');
                            hideSignupModal();

                            // Show success message
                            showNotification('Apple Í≥ÑÏ†ïÏúºÎ°ú Í∞ÄÏûÖÏù¥ ÏôÑÎ£åÎêòÏóàÏäµÎãàÎã§!', 'success');

                        } catch (error) {
                            console.error('Apple signup error:', error);
                            showNotification('Apple ÌöåÏõêÍ∞ÄÏûÖÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§. Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.', 'error');
                        } finally {
                            // Reset button
                            button.innerHTML = originalContent;
                            button.disabled = false;
                        }
                    }

                    // Enhanced Form Validation and Submission
                    document.addEventListener('DOMContentLoaded', function () {
                        // Login form handling
                        const loginForm = document.getElementById('loginForm');
                        if (loginForm) {
                            loginForm.addEventListener('submit', async function (e) {
                                e.preventDefault();

                                const email = document.getElementById('loginEmail').value;
                                const password = document.getElementById('loginPassword').value;
                                const submitBtn = this.querySelector('button[type="submit"]');
                                const originalContent = submitBtn.innerHTML;

                                // Validation
                                if (!email || !password) {
                                    showNotification('Î™®Îì† ÌïÑÎìúÎ•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.', 'error');
                                    return;
                                }

                                // Email validation
                                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                                if (!emailRegex.test(email)) {
                                    showNotification('Ïò¨Î∞îÎ•∏ Ïù¥Î©îÏùº Ï£ºÏÜåÎ•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.', 'error');
                                    return;
                                }

                                // Show loading
                                submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Î°úÍ∑∏Ïù∏ Ï§ë...';
                                submitBtn.disabled = true;

                                try {
                                    // Simulate API call - replace with actual authentication
                                    await new Promise(resolve => setTimeout(resolve, 2000));

                                    // Success
                                    console.log('Login successful');
                                    hideLoginModal();
                                    showNotification('Î°úÍ∑∏Ïù∏ ÏÑ±Í≥µ!', 'success');

                                } catch (error) {
                                    console.error('Login error:', error);
                                    showNotification('Î°úÍ∑∏Ïù∏Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§. Ïù¥Î©îÏùºÍ≥º ÎπÑÎ∞ÄÎ≤àÌò∏Î•º ÌôïÏù∏Ìï¥Ï£ºÏÑ∏Ïöî.', 'error');
                                } finally {
                                    submitBtn.innerHTML = originalContent;
                                    submitBtn.disabled = false;
                                }
                            });
                        }

                        // Signup form handling
                        const signupForm = document.getElementById('signupForm');
                        if (signupForm) {
                            signupForm.addEventListener('submit', async function (e) {
                                e.preventDefault();

                                const username = document.getElementById('signupUsername').value;
                                const email = document.getElementById('signupEmail').value;
                                const password = document.getElementById('signupPassword').value;
                                const passwordConfirm = document.getElementById('signupPasswordConfirm').value;
                                const agreeTerms = document.getElementById('agreeTerms').checked;
                                const submitBtn = this.querySelector('button[type="submit"]');
                                const originalContent = submitBtn.innerHTML;

                                // Validation
                                if (!username || !email || !password || !passwordConfirm) {
                                    showNotification('Î™®Îì† ÌïÑÏàò ÌïÑÎìúÎ•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.', 'error');
                                    return;
                                }

                                if (!agreeTerms) {
                                    showNotification('Ïù¥Ïö©ÏïΩÍ¥ÄÏóê ÎèôÏùòÌï¥Ï£ºÏÑ∏Ïöî.', 'error');
                                    return;
                                }

                                // Email validation
                                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                                if (!emailRegex.test(email)) {
                                    showNotification('Ïò¨Î∞îÎ•∏ Ïù¥Î©îÏùº Ï£ºÏÜåÎ•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.', 'error');
                                    return;
                                }

                                // Password validation
                                const passwordRegex = /^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]{8,}$/;
                                if (!passwordRegex.test(password)) {
                                    showNotification('ÎπÑÎ∞ÄÎ≤àÌò∏Îäî ÏµúÏÜå 8Ïûê, ÏòÅÎ¨∏, Ïà´Ïûê, ÌäπÏàòÎ¨∏ÏûêÎ•º Ìè¨Ìï®Ìï¥Ïïº Ìï©ÎãàÎã§.', 'error');
                                    return;
                                }

                                // Password confirmation
                                if (password !== passwordConfirm) {
                                    showNotification('ÎπÑÎ∞ÄÎ≤àÌò∏Í∞Ä ÏùºÏπòÌïòÏßÄ ÏïäÏäµÎãàÎã§.', 'error');
                                    return;
                                }

                                // Show loading
                                submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Í∞ÄÏûÖ Ï§ë...';
                                submitBtn.disabled = true;

                                try {
                                    // Simulate API call - replace with actual registration
                                    await new Promise(resolve => setTimeout(resolve, 2000));

                                    // Success
                                    console.log('Signup successful');
                                    hideSignupModal();
                                    showNotification('ÌöåÏõêÍ∞ÄÏûÖÏù¥ ÏôÑÎ£åÎêòÏóàÏäµÎãàÎã§! Ïù¥Î©îÏùºÏùÑ ÌôïÏù∏Ìï¥Ï£ºÏÑ∏Ïöî.', 'success');

                                } catch (error) {
                                    console.error('Signup error:', error);
                                    showNotification('ÌöåÏõêÍ∞ÄÏûÖÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§. Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.', 'error');
                                } finally {
                                    submitBtn.innerHTML = originalContent;
                                    submitBtn.disabled = false;
                                }
                            });
                        }

                        // Modal backdrop click to close
                        document.getElementById('loginModal')?.addEventListener('click', function (e) {
                            if (e.target === this) hideLoginModal();
                        });

                        document.getElementById('signupModal')?.addEventListener('click', function (e) {
                            if (e.target === this) hideSignupModal();
                        });

                        // ESC key to close modals
                        document.addEventListener('keydown', function (e) {
                            if (e.key === 'Escape') {
                                hideLoginModal();
                                hideSignupModal();
                            }
                        });
                    });

                    // Notification system
                    function showNotification(message, type = 'info') {
                        const notification = document.createElement('div');
                        notification.className = `fixed top-4 right-4 z-50 px-6 py-4 rounded-lg shadow-lg transform translate-x-full transition-transform duration-300 ${type === 'success' ? 'bg-tv-green text-white' :
                            type === 'error' ? 'bg-tv-red text-white' :
                                'bg-tv-blue text-white'
                            }`;
                        notification.innerHTML = `
                            <div class="flex items-center space-x-3">
                                <i class="fas ${type === 'success' ? 'fa-check-circle' :
                                type === 'error' ? 'fa-exclamation-circle' :
                                    'fa-info-circle'
                            }"></i>
                                <span>${message}</span>
                            </div>
                        `;

                        document.body.appendChild(notification);

                        // Show
                        setTimeout(() => notification.classList.remove('translate-x-full'), 100);

                        // Hide after 5 seconds
                        setTimeout(() => {
                            notification.classList.add('translate-x-full');
                            setTimeout(() => notification.remove(), 300);
                        }, 5000);
                    }

                    // Vote functionality for prediction charts
                    function voteOnPrediction(chartId, voteType) {
                        console.log(`üó≥Ô∏è Vote submitted: ${chartId} - ${voteType}`);

                        // Get the button that was clicked
                        const button = event.target.closest('button');
                        const originalContent = button.innerHTML;

                        // Show loading state
                        button.disabled = true;
                        button.innerHTML = `<i class="fas fa-spinner fa-spin mr-1"></i>${voteType === 'up' ? 'ÏÉÅÏäπ ÎèôÏ°∞' : 'ÌïòÎùΩ ÎèôÏ°∞'}`;

                        // Simulate API call
                        setTimeout(() => {
                            try {
                                // Store vote in localStorage for demo purposes
                                const voteKey = `vote_${chartId}`;
                                const existingVote = localStorage.getItem(voteKey);

                                if (existingVote === voteType) {
                                    // User is trying to vote the same way again
                                    showNotification('Ïù¥ÎØ∏ Í∞ôÏùÄ Î∞©Ìñ•ÏúºÎ°ú Ìà¨ÌëúÌïòÏÖ®ÏäµÎãàÎã§!', 'info');
                                } else {
                                    // Store the new vote
                                    localStorage.setItem(voteKey, voteType);

                                    // Show success message
                                    const voteMessage = voteType === 'up' ? 'ÏÉÅÏäπ ÎèôÏ°∞ Ìà¨ÌëúÍ∞Ä ÏôÑÎ£åÎêòÏóàÏäµÎãàÎã§!' : 'ÌïòÎùΩ ÎèôÏ°∞ Ìà¨ÌëúÍ∞Ä ÏôÑÎ£åÎêòÏóàÏäµÎãàÎã§!';
                                    showNotification(voteMessage, 'success');

                                    // Update button styling to show active state
                                    updateVoteButtonStyles(chartId, voteType);

                                    // Simulate updating vote count (in real app, this would come from server)
                                    updateVoteCount(chartId, voteType);
                                }

                            } catch (error) {
                                console.error('Vote error:', error);
                                showNotification('Ìà¨Ìëú Ï≤òÎ¶¨ Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.', 'error');
                            } finally {
                                // Reset button
                                button.innerHTML = originalContent;
                                button.disabled = false;
                            }
                        }, 1000);
                    }

                    function updateVoteButtonStyles(chartId, selectedVote) {
                        // Find the chart container and its vote buttons
                        const chartContainer = document.querySelector(`[data-chart-id="${chartId}"]`) ||
                            document.querySelector(`#${chartId}`)?.closest('.bg-tv-card');

                        if (!chartContainer) return;

                        const voteButtons = chartContainer.querySelectorAll('button[onclick*="voteOnPrediction"]');

                        voteButtons.forEach(button => {
                            const isUpButton = button.textContent.includes('ÏÉÅÏäπ');
                            const isDownButton = button.textContent.includes('ÌïòÎùΩ');

                            // Remove active states
                            button.classList.remove('ring-2', 'ring-white', 'bg-opacity-80');

                            // Add active state to selected button
                            if ((selectedVote === 'up' && isUpButton) || (selectedVote === 'down' && isDownButton)) {
                                button.classList.add('ring-2', 'ring-white', 'bg-opacity-80');
                            }
                        });
                    }

                    function updateVoteCount(chartId, voteType) {
                        // This would normally update from server data
                        // For demo, we'll just show a visual indication
                        console.log(`üìä Vote count updated for ${chartId}: ${voteType}`);
                    }

                    // Initialize vote states on page load
                    document.addEventListener('DOMContentLoaded', function () {
                        // Check for existing votes and update button styles
                        ['chart1', 'chart2', 'chart3'].forEach(chartId => {
                            const existingVote = localStorage.getItem(`vote_${chartId}`);
                            if (existingVote) {
                                updateVoteButtonStyles(chartId, existingVote);
                            }
                        });
                    });
                </script>

                <!-- EMERGENCY CHART TEST - Simple Direct Approach -->
                <script>
                    console.log('üÜò EMERGENCY CHART TEST STARTED');

                    // Wait for everything to load
                    setTimeout(() => {
                        console.log('üÜò Emergency test - checking for containers...');

                        // Find containers
                        const container1 = document.getElementById('chart-1');
                        const container2 = document.getElementById('chart-2');
                        const container3 = document.getElementById('chart-3');

                        console.log('üÜò Container check:', {
                            'chart-1': container1 ? 'FOUND' : 'MISSING',
                            'chart-2': container2 ? 'FOUND' : 'MISSING',
                            'chart-3': container3 ? 'FOUND' : 'MISSING'
                        });

                        if (!container1) {
                            console.error('üÜò chart-1 container not found!');
                            return;
                        }

                        // Check LightweightCharts
                        if (typeof LightweightCharts === 'undefined') {
                            console.log('üÜò LightweightCharts not found, loading directly...');

                            // Load script directly
                            const script = document.createElement('script');
                            script.src = 'https://unpkg.com/lightweight-charts/dist/lightweight-charts.standalone.production.js';
                            script.onload = () => {
                                console.log('üÜò Script loaded, trying to create chart...');
                                createEmergencyChart();
                            };
                            script.onerror = () => {
                                console.error('üÜò Failed to load LightweightCharts!');
                            };
                            document.head.appendChild(script);
                        } else {
                            console.log('üÜò LightweightCharts already available');
                            createEmergencyChart();
                        }

                        function createEmergencyChart() {
                            try {
                                console.log('üÜò Attempting to create emergency chart...');

                                const container = document.getElementById('chart-1');
                                if (!container) {
                                    console.error('üÜò Container disappeared!');
                                    return;
                                }

                                // Set container size
                                container.style.width = '100%';
                                container.style.height = '300px';
                                container.style.position = 'relative';

                                console.log('üÜò Container dimensions:', container.clientWidth, 'x', container.clientHeight);

                                // Create chart with minimal config
                                const chart = LightweightCharts.createChart(container, {
                                    width: 400,
                                    height: 300,
                                    layout: {
                                        background: { color: '#131722' },
                                        textColor: '#d1d4dc',
                                    }
                                });

                                console.log('üÜò Chart created successfully!', chart);

                                // Add simple line series
                                const lineSeries = chart.addLineSeries({
                                    color: '#2962FF',
                                    lineWidth: 2,
                                });

                                // Add some test data
                                const testData = [
                                    { time: '2023-12-22', value: 100 },
                                    { time: '2023-12-23', value: 105 },
                                    { time: '2023-12-24', value: 98 },
                                    { time: '2023-12-25', value: 110 },
                                    { time: '2023-12-26', value: 115 },
                                ];

                                lineSeries.setData(testData);

                                console.log('üÜò SUCCESS! Emergency chart should now be visible');

                            } catch (error) {
                                console.error('üÜò Emergency chart creation failed:', error);
                            }
                        }

                    }, 3000); // Wait 3 seconds

                    // Market filtering function
                    function filterStocksByMarket() {
                        const selectedMarket = document.getElementById('marketSelector').value;
                        console.log('üîç Filtering by market:', selectedMarket);

                        if (selectedMarket === 'all') {
                            // Load random mix from all markets
                            loadMarketData();
                        } else {
                            // Load specific market data
                            loadSpecificMarket(selectedMarket);
                        }
                    }

                    // Load specific market data
                    async function loadSpecificMarket(market) {
                        console.log(`üì° Loading ${market} market data...`);

                        // Check if globalStocks is initialized
                        if (!globalStocks || Object.keys(globalStocks).length === 0) {
                            console.warn('‚ö†Ô∏è globalStocks not initialized yet, skipping market load');
                            return;
                        }

                        // Clean up existing charts first
                        if (window.cleanupCharts) {
                            window.cleanupCharts();
                        }

                        // Clear existing data
                        marketData = [];

                        // Get the charts container and show loading state
                        const chartsContainer = document.getElementById('charts-container');
                        if (chartsContainer) {
                            chartsContainer.innerHTML = `
                                <div class="col-span-full flex items-center justify-center h-64">
                                    <div class="text-center">
                                        <i class="fas fa-spinner fa-spin text-4xl text-tv-blue mb-4"></i>
                                        <p class="text-tv-text-secondary">Loading ${market === 'kr' ? 'ÌïúÍµ≠' : market === 'us' ? 'ÎØ∏Íµ≠' : market === 'crypto' ? 'ÏïîÌò∏ÌôîÌèê' : market} ÏãúÏû• Îç∞Ïù¥ÌÑ∞...</p>
                                    </div>
                                </div>
                            `;
                        }

                        // Map market codes to data
                        const marketMap = {
                            'crypto': globalStocks.crypto,
                            'kr': globalStocks.korean,
                            'us': globalStocks.us,
                            'jp': globalStocks.japanese,
                            'in': globalStocks.indian,
                            'uk': globalStocks.uk,
                            'ca': globalStocks.canadian,
                            'fr': globalStocks.french,
                            'de': globalStocks.german,
                            'tw': globalStocks.taiwanese
                        };

                        const marketStocks = marketMap[market] || [];
                        if (marketStocks.length === 0) {
                            console.warn(`‚ùå No stocks found for market: ${market}`);
                            chartsContainer.innerHTML = `
                                <div class="col-span-full text-center p-8">
                                    <i class="fas fa-exclamation-triangle text-4xl text-yellow-500 mb-4"></i>
                                    <p class="text-tv-text-secondary">Ìï¥Îãπ ÏãúÏû•Ïùò Îç∞Ïù¥ÌÑ∞Í∞Ä ÏóÜÏäµÎãàÎã§: ${market}</p>
                                </div>
                            `;
                            return;
                        }

                        const selectedStocks = marketStocks.slice(0, Math.min(currentDisplayCount, marketStocks.length));
                        console.log(`üìä Loading ${selectedStocks.length} stocks from ${market} market`);

                        let loadedCount = 0;
                        const totalStocks = selectedStocks.length;

                        for (const stock of selectedStocks) {
                            try {
                                console.log(`üîÑ Loading data for ${stock.symbol} (${stock.name})`);
                                let data;

                                if (stock.market === 'crypto') {
                                    data = await loadCryptoData(stock.symbol);
                                } else {
                                    data = await loadStockData(stock.symbol);
                                }

                                if (data && data.currentPrice && data.chartData && data.chartData.length > 0) {
                                    console.log(`‚úÖ Successfully loaded real data for ${stock.symbol}: $${data.currentPrice}`);
                                    marketData.push({
                                        symbol: stock.symbol,
                                        name: stock.name,
                                        market: stock.market,
                                        currentPrice: data.currentPrice,
                                        predictedPrice: data.predictedPrice || data.currentPrice * (1 + (Math.random() - 0.5) * 0.1),
                                        change: data.change,
                                        data: data.chartData,
                                        volume: data.volume,
                                        high: data.high,
                                        low: data.low
                                    });
                                    loadedCount++;
                                } else {
                                    console.warn(`‚ö†Ô∏è Invalid data for ${stock.symbol}, generating fallback data`);
                                    // Generate fallback data to ensure charts still show
                                    const basePrice = Math.random() * 500 + 50;
                                    marketData.push({
                                        symbol: stock.symbol,
                                        name: stock.name,
                                        market: stock.market,
                                        currentPrice: basePrice,
                                        predictedPrice: basePrice * (1 + (Math.random() - 0.5) * 0.1),
                                        change: `${(Math.random() - 0.5) * 10 > 0 ? '+' : ''}${((Math.random() - 0.5) * 10).toFixed(2)}%`,
                                        data: window.generateRealisticData(basePrice, 30),
                                        volume: Math.floor(Math.random() * 1000000),
                                        high: basePrice * 1.05,
                                        low: basePrice * 0.95
                                    });
                                    loadedCount++;
                                }
                            } catch (error) {
                                console.error(`‚ùå Error loading data for ${stock.symbol}:`, error);
                                // Still add fallback data to prevent empty charts
                                const basePrice = Math.random() * 500 + 50;
                                marketData.push({
                                    symbol: stock.symbol,
                                    name: stock.name,
                                    market: stock.market,
                                    currentPrice: basePrice,
                                    predictedPrice: basePrice * (1 + (Math.random() - 0.5) * 0.1),
                                    change: `${(Math.random() - 0.5) * 10 > 0 ? '+' : ''}${((Math.random() - 0.5) * 10).toFixed(2)}%`,
                                    data: window.generateRealisticData(basePrice, 30),
                                    volume: Math.floor(Math.random() * 1000000),
                                    high: basePrice * 1.05,
                                    low: basePrice * 0.95
                                });
                                loadedCount++;
                            }
                        }

                        console.log(`üìä ${market} market loading complete: ${loadedCount}/${totalStocks} stocks loaded`);

                        if (marketData.length > 0) {
                            initializeCharts();
                        } else {
                            console.error('‚ùå No market data loaded, showing error message');
                            chartsContainer.innerHTML = `
                                <div class="col-span-full text-center p-8">
                                    <i class="fas fa-exclamation-triangle text-4xl text-red-500 mb-4"></i>
                                    <p class="text-tv-text-secondary">ÏãúÏû• Îç∞Ïù¥ÌÑ∞ Î°úÎî©Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§. ÎÇòÏ§ëÏóê Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.</p>
                                    <button onclick="filterStocksByMarket()" class="mt-4 bg-tv-blue text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors">
                                        Îã§Ïãú ÏãúÎèÑ
                                    </button>
                                </div>
                            `;
                        }
                    }

                    // Add refresh button functionality
                    function refreshCharts() {
                        console.log('üîÑ Refreshing charts...');
                        const selectedMarket = document.getElementById('marketSelector').value;

                        if (selectedMarket === 'all') {
                            loadMarketData();
                        } else {
                            loadSpecificMarket(selectedMarket);
                        }
                    }

                    // Load more stocks functionality
                    function loadMoreStocks() {
                        const maxStocks = 12; // Maximum stocks to display
                        const currentMax = Math.max(currentDisplayCount + 3, 6);
                        currentDisplayCount = Math.min(currentMax, maxStocks);

                        console.log(`üìà Loading more stocks... Current count: ${currentDisplayCount}`);

                        // Update button text
                        const loadMoreText = document.getElementById('load-more-text');
                        if (currentDisplayCount >= maxStocks) {
                            loadMoreText.textContent = 'ÏµúÎåÄ';
                        } else {
                            loadMoreText.textContent = `ÎçîÎ≥¥Í∏∞ (${currentDisplayCount})`;
                        }

                        // Refresh with new count
                        refreshCharts();
                    }

                    // Auto-refresh every 30 seconds for real-time updates
                    setInterval(() => {
                        if (marketData.length > 0) {
                            console.log('üîÑ Auto-refreshing market data...');
                            refreshCharts();
                        }
                    }, 30000);

                    // Debug functions
                    function toggleDebugPanel() {
                        const panel = document.getElementById('debug-panel');
                        panel.classList.toggle('hidden');
                    }

                    function addDebugMessage(message) {
                        const content = document.getElementById('debug-content');
                        const timestamp = new Date().toLocaleTimeString();
                        const messageElement = document.createElement('div');
                        messageElement.innerHTML = `<span class="text-gray-500">[${timestamp}]</span> ${message}`;
                        content.insertBefore(messageElement, content.firstChild);

                        // Keep only last 20 messages
                        while (content.children.length > 20) {
                            content.removeChild(content.lastChild);
                        }
                    }

                    // Override console.log to also show in debug panel
                    const originalLog = console.log;
                    console.log = function (...args) {
                        originalLog.apply(console, args);
                        if (args[0] && typeof args[0] === 'string' && (args[0].includes('üìä') || args[0].includes('‚úÖ') || args[0].includes('‚ùå') || args[0].includes('üîÑ'))) {
                            addDebugMessage(args.join(' '));
                        }
                    };

                </script>

                <!-- Show/Hide Debug Button -->
                <div class="fixed bottom-4 right-4 z-50">
                    <button id="debug-toggle" onclick="toggleDebugPanel()"
                        class="bg-tv-blue text-white p-3 rounded-full shadow-lg hover:bg-blue-600 transition-colors"
                        title="Toggle Debug Panel">
                        <i class="fas fa-bug"></i>
                    </button>
                </div>

                <!-- Portal-Style Mobile Menu JavaScript -->
                <script>
                    // Professional Portal-Style Mobile Menu Functions
                    function toggleMobileMenu() {
                        const portal = document.getElementById('mobile-menu-portal');
                        const content = document.getElementById('mobile-menu-content');
                        const button = document.getElementById('mobileMenuButton');
                        const body = document.body;

                        const isOpen = portal.style.display !== 'none';

                        if (isOpen) {
                            closeMobileMenu();
                        } else {
                            openMobileMenu();
                        }
                    }

                    function openMobileMenu() {
                        const portal = document.getElementById('mobile-menu-portal');
                        const content = document.getElementById('mobile-menu-content');
                        const button = document.getElementById('mobileMenuButton');
                        const body = document.body;

                        // Prevent body scrolling
                        body.style.overflow = 'hidden';

                        // Show portal
                        portal.style.display = 'block';
                        portal.style.pointerEvents = 'none';

                        // Allow interaction with portal children
                        const overlay = portal.querySelector('.absolute.inset-0');
                        const menuContent = portal.querySelector('#mobile-menu-content');
                        if (overlay) overlay.style.pointerEvents = 'auto';
                        if (menuContent) menuContent.style.pointerEvents = 'auto';

                        // Slide in menu
                        setTimeout(() => {
                            content.classList.remove('-translate-x-full');
                            content.classList.add('translate-x-0');
                        }, 10);

                        // Animate hamburger to X
                        if (button) button.classList.add('menu-open');

                        // Update aria label
                        if (button) button.setAttribute('aria-label', 'Î©îÎâ¥ Îã´Í∏∞');
                    }

                    function closeMobileMenu() {
                        const portal = document.getElementById('mobile-menu-portal');
                        const content = document.getElementById('mobile-menu-content');
                        const button = document.getElementById('mobileMenuButton');
                        const body = document.body;

                        // Allow body scrolling
                        body.style.overflow = '';

                        // Slide out menu
                        content.classList.remove('translate-x-0');
                        content.classList.add('-translate-x-full');

                        // Hide portal after animation
                        setTimeout(() => {
                            portal.style.display = 'none';
                        }, 300);

                        // Animate X back to hamburger
                        if (button) button.classList.remove('menu-open');

                        // Update aria label
                        if (button) button.setAttribute('aria-label', 'Î©îÎâ¥ Ïó¥Í∏∞');
                    }

                    // Close menu when clicking outside or pressing Escape
                    document.addEventListener('keydown', function (e) {
                        if (e.key === 'Escape') {
                            closeMobileMenu();
                        }
                    });

                    // Ensure menu is closed on resize to desktop
                    window.addEventListener('resize', function () {
                        if (window.innerWidth >= 768) {
                            closeMobileMenu();
                        }
                    });

                    // Initialize mobile menu portal
                    document.addEventListener('DOMContentLoaded', function () {
                        const portal = document.getElementById('mobile-menu-portal');
                        if (portal) {
                            portal.style.display = 'none';
                        }
                    });
                </script>

</body>

</html>